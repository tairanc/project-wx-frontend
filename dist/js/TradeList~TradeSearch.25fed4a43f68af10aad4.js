(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4m+e":function(e,t){e.exports="data:image/gif;base64,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"},"9F5X":function(e,t,a){"use strict";(function(e){var r=c(a("Zx67")),n=c(a("kiBT")),s=c(a("OvRC")),o=c(a("pFYg")),l=c(a("C4MV")),i=c(a("woOf"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OrderCtrl=t.OneListInfo=t.GoodsList=void 0;var u=i.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,l.default)(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a("U7vG"),f=_(d),m=a("Zfgq"),h=a("4n+p"),A=a("d2xe"),g=a("fw66"),v=a("f2Hk"),y=a("NUeF"),w=(a("qeJi"),a("f2t5")),E=_(a("qAHI")),S=a("5qLU");a("RYNs");var N=a("8FWJ"),k=a("hd3S");function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}var D={init:{url:S.WXAPI+"/user/order/list",method:"get"},initshop:{url:S.WXAPI+"/user/shopOrder/list",method:"get"},del:{url:S.WXAPI+"/user/shopOrder/discard",method:"post"},conf:{url:S.WXAPI+"/user/shopOrder/confirmReceived",method:"post"}},Q=(0,v.concatPageAndType)("tradeList"),q=(0,v.actionAxios)("tradeList"),F=void 0,b=function(t){function a(e){C(this,a);var t=M(this,(a.__proto__||(0,r.default)(a)).call(this,e));return t.navClickHandle=function(e){F.slideTo(e,300,!0)},t.promptClose=function(){t.props.dispatch(Q("ctrlPrompt",{prompt:{show:!1,msg:""}}))},t.modalClose=function(){t.props.dispatch(Q("ctrlModal",{prompt:{show:!1,msg:"",modalSure:""}}))},t.cancelOrderPoup=function(e){t.props.dispatch(Q("cancelPopup",{status:e}))},t.changeReason=function(e){t.props.dispatch(Q("changeReason",{reason:e}))},t.orderStatus=["all","waitPay","waitSend","waitConfirm","waitRate"],t}return I(a,d.Component),p(a,[{key:"componentWillMount",value:function(){if(this.props.flag){var e=this.props,t=e.currentPage,a=e.status,r=e.dispatch,n=void 0;n=u({},0==a||1==a?D.init:D.initshop),r(q("getbackData",u({},n,{params:{page:Number(t),page_size:10,status:this.orderStatus[a]}}),{type:this.orderStatus[a],page:t,url:location.pathname}))}else this.props.resetData()}},{key:"componentDidMount",value:function(){this.props.flag&&this.props.dispatch(Q("saveHistroy",{flag:!1})),this.addSlide(this.refs.list)}},{key:"addSlide",value:function(e){var t=this,a=this.props,r=a.dispatch,n=a.status,s=a.location,o=a.flag,l=this;F=new Swiper(e,{initialSlide:n,onSlideChangeStart:function(e){!l.props.flag&&r(Q("resetData"));var a=void 0;a=0===e.activeIndex||1===e.activeIndex?u({},D.init):u({},D.initshop),m.browserHistory.replace(t.props.navList[e.activeIndex].url),!l.props.flag&&r(q("getData",u({},a,{params:{page:1,page_size:10,status:t.orderStatus[e.activeIndex]}}),{type:t.orderStatus[e.activeIndex],page:1,url:s.pathname})),l.props.flag&&r(Q("saveHistroy",{flag:!1}))},onTouchStart:function(e){0===e.activeIndex?e.lockSwipeToPrev():e.unlockSwipeToPrev(),e.activeIndex===e.slides.length-1?e.lockSwipeToNext():e.unlockSwipeToNext()}}),0!==Number(F.activeIndex)||o||r(q("getData",u({},D.init,{params:{page:1,page_size:10,status:this.orderStatus[0]}}),{type:this.orderStatus[0],page:1,url:s.pathname}))}},{key:"render",value:function(){var t=this,a=this.props,r=a.cancel_reason,n=a.dispatch,s=a.PopupCancelMsg;a.saveTop;return f.default.createElement("div",{"data-plugin":"swiper","data-page":"trade-list",style:{height:e(window).height(),overflow:"hidden"}},f.default.createElement("section",{ref:"list",className:"swiper-container trade-list"},f.default.createElement(L,{data:this.props.navList,status:this.props.status,clickHandle:this.navClickHandle}),f.default.createElement(J,u({listLength:"5",orderStatus:this.orderStatus,swiper:F},this.props))),f.default.createElement(N.PopupCancelDetail,{PopupCancelMsg:s,cancelOrderPoup:this.cancelOrderPoup,changeReason:this.changeReason,cancel_reason:r,dispatch:n,createActions:Q}),f.default.createElement(g.PopupModal,{active:this.props.modal.show,msg:this.props.modal.msg,onClose:this.modalClose,onSure:this.props.modal.modalSure}),f.default.createElement(g.PopupTip,{active:this.props.prompt.show,msg:this.props.prompt.msg,onClose:this.promptClose}),f.default.createElement(H,null),f.default.createElement(g.ModalAComp,{active:this.props.custom.show,msg:"快去评论商品，给小伙伴一个参考吧",title:"确认收货成功！",btns:[{text:"下次再说",cb:function(){location.reload(),t.props.dispatch(Q("ctrlCustom",{custom:{show:!1}}))}},{text:"立即评论",cb:function(){t.props.dispatch(Q("ctrlCustom",{custom:{show:!1}})),m.browserHistory.push("/evaluateInput?tid="+t.props.custom.tid)}}]}))}}]),a}(),L=function(e){function t(){var e,a,n;C(this,t);for(var s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];return a=n=M(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.clickHandle=function(e,t,a){a.preventDefault(),m.browserHistory.replace(e),n.props.clickHandle(t)},M(n,a)}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this;return f.default.createElement("nav",{className:"trade-list-nav"},this.props.data.map(function(t,a){return f.default.createElement(m.Link,{to:t.url,className:"nav-list",key:a,activeClassName:"active",onClick:e.clickHandle.bind(e,t.url,a)},f.default.createElement("span",null,t.text))}))}}]),t}(),J=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"getHtml",value:function(){for(var e=this.props,t=e.orderStatus,a=(e.list,e.dispatch,e.PopupCancelMsg),r=e.tradeDetailClick,n=e.saveTop,s=e.hasMore,o=e.isSending,l=this.props.listLength,i=[],c=0;l>c;)i.push(f.default.createElement(G,{status:t[c],swiper:this.props.swiper,key:c,orderStatus:t,PopupCancelMsg:a,tradeDetailClick:r,saveTop:n,hasMore:s,isSending:o})),c++;return i}},{key:"render",value:function(){return f.default.createElement("div",{className:"swiper-wrapper list-main"},this.getHtml())}}]),t}(),W=function(t){function a(){var e,t,n;C(this,a);for(var s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];return t=n=M(this,(e=a.__proto__||(0,r.default)(a)).call.apply(e,[this].concat(o))),n.addData=function(){var e=n.props,t=e.dispatch,a=e.isSending,r=e.list,s=e.swiper,o=e.orderStatus,l=void 0;l=0===s.activeIndex||1===s.activeIndex?u({},D.init):u({},D.initshop),a&&E.default.request(u({},l,{params:{page:Number(r.page)+1,page_size:10,status:o[s.activeIndex]}})).then(function(e){t(Q("concatDataSuccess",{result:e.data,dataType:o[s.activeIndex],page:Number(r.page)+1}))}).catch(function(e){console.log(e),t(Q("concatDataError",{error:e}))})},M(n,t)}return I(a,d.Component),p(a,[{key:"componentDidMount",value:function(){var t=this.props.saveTop,a=this;setTimeout(function(){e(".swiper-slide-active").bind("scroll.loadmore",function(){var t=e(this).scrollTop(),r=e(".list-data").height()-e(window).height()-30,n=a.props,s=n.dispatch,o=n.hasMore,l=n.isSending;t>r&&null!=e(".list-data").height()&&o&&!l&&(s(Q("changeSending",{isSending:!0})),a.addData())}),e(".swiper-slide-active").scrollTop(t)},0)}},{key:"componentWillUnmount",value:function(){e(".swiper-slide-active").unbind("scroll.loadmore")}},{key:"componentWillReceiveProps",value:function(t){this.props.saveTop;var a=this;setTimeout(function(){e(".swiper-slide-active").bind("scroll.loadmore",function(){var t=e(this).scrollTop(),r=e(".list-data").height()-e(window).height()-30,n=a.props,s=n.dispatch,o=n.hasMore,l=n.isSending;t>r&&null!=e(".list-data").height()&&o&&!l&&(s(Q("changeSending",{isSending:!0})),a.addData())})},0)}},{key:"render",value:function(){var e=this.props,t=e.list,a=e.status,r=e.PopupCancelMsg,n=e.tradeDetailClick,s=e.saveTop,o=e.hasMore,l=e.isSending,i=e.dispatch;return f.default.createElement("div",{className:"swiper-slide",ref:"list",style:{overflow:"auto",height:document.body.clientHeight-40}},t.load?f.default.createElement(A.LoadingRound,null):t.data&&t.data.length?f.default.createElement(Z,{swiper:this.props.swiper,list:t,listStatus:a,PopupCancelMsg:r,tradeDetailClick:n,saveTop:s,hasMore:o,isSending:l,dispatch:i}):"all"==a?f.default.createElement(A.AllNoMoreOrder,null):f.default.createElement(A.NoMoreOrder,null))}}]),a}();var G=(0,h.connect)(function(e,t){var a=t.swiper&&t.orderStatus[t.swiper.activeIndex];return{list:e.tradeList.list[a||t.status]}},function(e,t){return{dispatch:e}})(W),H=function(t){function a(){return C(this,a),M(this,(a.__proto__||(0,r.default)(a)).apply(this,arguments))}return I(a,d.Component),p(a,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.top")}},{key:"componentDidMount",value:function(){e(window).height();var t=void 0;e(".toTop").on("click",function(){clearInterval(t);var a=e(".swiper-slide-active").scrollTop();t=setInterval(function(){a-=10,e(".swiper-slide-active").scrollTop(a),a<=0&&clearInterval(t)},1)})}},{key:"componentDidUpdate",value:function(){var t=e(".toTop");e(".swiper-slide-active").on("scroll",function(a){e(this).scrollTop()>35?t.show():t.hide()})}},{key:"render",value:function(){return f.default.createElement("div",{className:"search-toTop"},f.default.createElement("ul",null,f.default.createElement(m.Link,{to:"/tradeSearch"},f.default.createElement("li",{className:"search"})),f.default.createElement("li",{className:"toTop"})))}}]),a}(),x=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.count_goods,r=e.payment,n=e.platform,s=e.no,o=e.status,l=e.orderflag,i=e.swiper,c=e.isGroupBuy,u=e.order_shops,p=e.pay_type,d=e.pay_status,m=e.PopupCancelMsg,h=e.tradeDetailClick,A=e.currentPage;u.order_goods;return f.default.createElement("li",{className:"one-order"},f.default.createElement(T,{data:t,count_goods:a,payment:r,orderflag:l,no:s,tradeDetailClick:h,currentPage:A}),f.default.createElement(B,{status:o,tid:s,platform:n,listStatus:this.props.listStatus,swiper:i,isGroupBuy:c,order_shops:u,orderflag:l,pay_type:p,pay_status:d,PopupCancelMsg:m,webcancelFrom:"tradeList"}))}}]),t}(),K=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.no,r=e.orderflag,n=e.tradeDetailClick,s=e.currentPage,o=t.order_goods.map(function(e,t){return f.default.createElement(P,{data:e,key:t})});return f.default.createElement("div",{className:"item-list"},f.default.createElement(m.Link,{className:"one-item",onClick:function(){n(a,r,s)}},o))}}]),t}(),P=t.GoodsList=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props.data,t=e.isExchange,r=e.isGift,n=e.isGroupBuy,s=e.afterSaleStatus;return f.default.createElement("div",{className:"item-info g-row-flex"},f.default.createElement("div",{className:"item-img c-dpb"},f.default.createElement("img",{src:e.primary_image?(0,w.addImageSuffix)(e.primary_image,"_s"):a("VM8K"),width:"75",height:"75"})),f.default.createElement("div",{className:"g-col-1"},f.default.createElement("div",{className:"info-top g-row-flex"},f.default.createElement("div",{className:"info-text g-col-1"},f.default.createElement("div",{className:"info-title"},e.title),f.default.createElement("div",{className:"info-props"},e.spec_nature_info),f.default.createElement("div",{className:"tag-container"},t&&f.default.createElement("span",{className:"label deepred-label"},"换购"),r&&f.default.createElement("span",{className:"label deepred-label"},"赠品"),n&&f.default.createElement("span",{className:"label deepred-label"},"拼团"),!(r||!e.is_free_refund||1!==e.is_free_refund)&&f.default.createElement("span",{className:"label violet-label"},"7天可退"))),f.default.createElement("div",{className:"info-right"},f.default.createElement("div",{className:"info-price"},"¥",Number(e.transaction_price).toFixed(2)),!!s&&f.default.createElement(O,{afterSaleStatus:s}))),f.default.createElement("div",{className:"info-btm"},"×",e.num)))}}]),t}(),T=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.count_goods,r=e.payment,n=e.no,s=e.orderflag,o=e.tradeDetailClick,l=e.currentPage,i=t.order_shops,c=i.map(function(e,t){return f.default.createElement(K,{data:e,key:t,no:n,orderflag:s,tradeDetailClick:o,currentPage:l})});return f.default.createElement("div",{className:"order-info"},f.default.createElement("div",{className:"order-info-time"},f.default.createElement("div",{className:"shop-name"},i.length>1?f.default.createElement("span",{className:"left"},(0,y.storeIcon)("icon_self"),"泰然城"):f.default.createElement("a",{href:1===i[0].shop_info.is_open?"/store/home?shop="+i[0].shop_info.id:"javascript:void(0)"},f.default.createElement("span",{className:"left"},(0,y.storeIcon)(i[0].shop_info.shop_icon),i[0].shop_info.alias?i[0].shop_info.alias:i[0].shop_info.name))),f.default.createElement("div",{className:"arrow-right"},1==i.length&&1===i[0].shop_info.is_open&&f.default.createElement("a",{href:1===i[0].shop_info.is_open?"/store/home?shop="+i[0].shop_info.id:"javascript:void(0)"},f.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-m-icon.png"}))),f.default.createElement("span",{className:"right order-status"},"等待付款")),c,f.default.createElement("div",{className:"order-count"},f.default.createElement("span",{className:"order-number"},"共",a,"件商品")," 合计：",f.default.createElement("span",{className:"order-total-pay"},"¥",(+r).toFixed(2))))}}]),t}(),j=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.orderflag,r=e.listStatus,n=e.swiper,s=e.tradeDetailClick,o=e.currentPage,l=t.platform_from,i=t.order_shops.map(function(e,t){return f.default.createElement(R,{data:e,key:t,payment:e.payment,count_goods:e.count_goods,platform:l,orderflag:a,listStatus:r,swiper:n,tradeDetailClick:s,currentPage:o,consign_status:e.consign_status})});return f.default.createElement("div",{className:"order-info"},i)}}]),t}(),R=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.count_goods,r=e.payment,n=e.platform,s=e.orderflag,o=e.swiper,l=e.tradeDetailClick,i=e.currentPage,c=t.shop_info,u=t.status,p=t.no,d=t.order_goods,h=t.consign_status,A=c.id,g=c.is_open,v=c.name,w=c.alias,E=c.shop_icon,S=t.order_goods.map(function(e,t){return f.default.createElement(P,{data:e,key:t})});return f.default.createElement("div",{className:"item-list"},f.default.createElement("div",{className:"order-info-time"},f.default.createElement("div",{className:"shop-name"},(0,y.storeIcon)(E),f.default.createElement("a",{href:1===g?"/store/home?shop="+A:"javascript:void(0)"},f.default.createElement("span",{className:"left"},w||v))),1===g&&f.default.createElement("div",{className:"arrow-right"},f.default.createElement("a",{href:1===g?"/store/home?shop="+A:"javascript:void(0)"},f.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-m-icon.png"}))),f.default.createElement("span",{className:"right order-status"},40==u?y.confimStatus[h]:y.ordersubStatusAndIconMap[u].status)),f.default.createElement(m.Link,{className:"one-item",onClick:function(){l(p,s,i)}},S),f.default.createElement("div",{className:"order-count"},f.default.createElement("span",{className:"order-number"},"共",a,"件商品")," 合计：",f.default.createElement("span",{className:"order-total-pay"},"￥",(+r).toFixed(2))),f.default.createElement(B,{status:u,tid:p,platform:n,listStatus:this.props.listStatus,swiper:o,orderflag:s,order_goods:d,consign_status:h}))}}]),t}(),U=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.orderflag,r=e.swiper,n=e.tradeDetailClick,s=e.currentPage;return f.default.createElement("li",{className:"one-order"},f.default.createElement(j,{data:t,no:t.no,orderflag:a,listStatus:this.props.listStatus,swiper:r,tradeDetailClick:n,currentPage:s}))}}]),t}(),O=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"render",value:function(){var e="";switch(this.props.afterSaleStatus){case 10:case 40:case 50:e=f.default.createElement("div",{className:"info-afterstatus"},"售后中");break;case 20:case 30:e=f.default.createElement("div",{className:"info-afterstatus"},"售后完成");break;case 60:case 70:case 80:e=null;break;default:e=null}return f.default.createElement("div",{className:"fight-group-status c-tc c-cfff"},e)}}]),t}(),Z=t.OneListInfo=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"getHtml",value:function(){var e=this,t=this.props,a=t.PopupCancelMsg,r=t.tradeDetailClick;t.saveTop;return this.props.list.data.map(function(t,n){return 0===e.props.swiper.activeIndex||1===e.props.swiper.activeIndex?10===t.status?f.default.createElement(x,{key:n,data:t,swiper:e.props.swiper,count_goods:t.count_goods,payment:t.payment,platform:t.platform_from,no:t.no,status:t.status,orderflag:1,listStatus:e.props.listStatus,isGroupBuy:t.isGroupBuy,order_shops:t.order_shops,pay_type:t.pay_type,pay_status:t.pay_status,PopupCancelMsg:a,tradeDetailClick:r,currentPage:t.currentPage}):f.default.createElement(U,{key:n,data:t,swiper:e.props.swiper,orderflag:2,listStatus:e.props.listStatus,tradeDetailClick:r,currentPage:t.currentPage}):f.default.createElement("li",{key:n,className:"one-order"},f.default.createElement("div",{className:"order-info"},f.default.createElement(R,{data:t,payment:t.payment,swiper:e.props.swiper,count_goods:t.count_goods,platform:t.order.platform_from,no:t.no,orderflag:2,listStatus:e.props.listStatus,tradeDetailClick:r,currentPage:t.currentPage})))})}},{key:"render",value:function(){var e=this.props,t=(e.list,e.hasMore),r=e.isSending;return f.default.createElement("div",null,f.default.createElement("div",{className:"list-data"},this.getHtml()),t?r?f.default.createElement("div",{style:{textAlign:"center",height:"30px",lineHeight:"30px"}},f.default.createElement("img",{src:a("4m+e"),alt:""})):f.default.createElement("span",{style:{height:"30px",lineHeight:"30px",textAlign:"center"}},"上拉加载更多"):f.default.createElement(A.NoMore,null))}}]),t}(),X=t.OrderCtrl=function(e){function t(){return C(this,t),M(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,d.Component),p(t,[{key:"getHtml",value:function(){var e=this,t=this.props,a=t.status,r=t.tid,n=t.platform,s=t.orderflag,o=t.isGroupBuy,l=t.order_shops,i=t.pay_type,c=t.pay_status,u=t.canAfterSale,p=t.canFrim,d=t.PopupCancelMsg,h=t.consign_status,A=20==h,g="TR_WRD"!==n&&"catering"!==n,v="",y=0;o&&l[0].order_goods[0].promotions.map(function(e,t){"GroupBuy"===e.extra.type&&(y=e.extra.promotion_id)});var w={isGroupBuy:o,promotion_id:y,tid:r};switch(a){case 10:v=[2!==c&&f.default.createElement("a",{className:"ctrl-block cancel-order",key:"1",onClick:function(){return e.props.cancelOrderPoup({show:!d.show,Msg:r})}},"取消订单"),2!==c&&f.default.createElement(m.Link,{className:g?"ctrl-red pay-order":"ctrl-grey",key:"3",onClick:function(t){g?e.props.checkGroupBuy(w):t.preventDefault()}},20===i?"线下公司转账":"立即支付")];break;case 20:case 25:v=[u&&f.default.createElement(m.Link,{className:"ctrl-block",key:"1",to:"/tradeDetail?tid="+r+"&orderflag="+s},"申请售后")];break;case 40:v=[u&&f.default.createElement(m.Link,{className:"ctrl-block",key:"5",to:"/tradeDetail?tid="+r+"&orderflag="+s},"申请售后"),g&&f.default.createElement(m.Link,{className:"ctrl-block",key:"2",to:"/logistics?tid="+r},"查看物流"),f.default.createElement("a",{className:"ctrl-red pay-order",key:"3",onClick:function(){e.props.confirmReceipt(A,p)}},"确认收货")];break;case 50:v=[f.default.createElement("a",{className:"ctrl-block",key:"29",onClick:this.props.deleteOrder},"删除订单"),g&&f.default.createElement(m.Link,{className:"ctrl-block",key:"30",to:"/logistics?tid="+r},"查看物流"),f.default.createElement(m.Link,{className:"ctrl-red pay-order",key:"31",to:"/evaluateInput?tid="+r},"立即评价")];break;case 60:v=[g&&f.default.createElement(m.Link,{className:"ctrl-block",key:"4",to:"/logistics?tid="+r},"查看物流"),f.default.createElement("a",{className:"ctrl-block",key:"3",onClick:this.props.deleteOrder},"删除订单")];break;case 30:case 31:v=[f.default.createElement("a",{className:"ctrl-block",key:"10",onClick:this.props.deleteOrder},"删除订单")]}return v}},{key:"render",value:function(){return f.default.createElement("div",{className:"order-ctrl c-tr"},this.getHtml())}}]),t}();var B=(0,h.connect)(function(e,t){return{status:t.status}},function(e,t){var a=t.order_goods,r=void 0===a?[]:a,n=r.some(function(e){return e.canAfterSale});return{canFrim:r.some(function(e){return"售后中"===y.afterstatusDeal[e.afterSaleStatus]}),canAfterSale:n,cancelOrderPoup:function(t){e(Q("cancelPopup",{status:t}))},checkGroupBuy:function(e){var t=e.isGroupBuy,a=e.promotion_id,r=e.tid;t?(0,k.groupCheckaxios)(e):m.browserHistory.push("/cashier?tid="+r+"&from=list&zeroBuy=1&isGroupBuy="+t+"&promotionId="+a)},confirmReceipt:function(a,r){e(Q("ctrlModal",{modal:{show:!0,msg:a?"订单存在未发货的商品，是否要确认收货？":r?"订单存在售后中的商品，是否确认收货？":"是否要确认收货？",modalSure:function(){E.default.request(u({},D.conf,{data:{no:t.tid}})).then(function(a){setTimeout(function(){e(Q("ctrlCustom",{custom:{show:!0,tid:t.tid}}))},1e3)}).catch(function(e){throw new Error(e)})}}}))},deleteOrder:function(){e(Q("ctrlModal",{modal:{show:!0,msg:"是否要删除订单？删除后，您可在泰然城官网的订单回收站恢复",modalSure:function(){E.default.request(u({},D.del,{data:{no:t.tid}})).then(function(a){e(Q("ctrlPrompt",{prompt:{show:!0,msg:a.data.message||"删除成功"}})),e(Q("deleteOrder",{tid:t.tid,status:t.listStatus}))}).catch(function(e){throw console.log(e),new Error(e)})}}}))}}})(X);t.default=(0,h.connect)(function(e,t){return u({},e.tradeList,{navList:e.tradeList.navList,status:t.params.status})},function(t){return{dispatch:t,resetData:function(){t(Q("resetData"))},tradeDetailClick:function(a,r,n){var s=e(".swiper-slide-active").scrollTop();t(Q("saveHistroy",{flag:!0,saveTop:s,currentPage:n})),m.browserHistory.push("/tradeDetail?tid="+a+"&orderflag="+r)}}})(b)}).call(this,a("OOjC"))}}]);
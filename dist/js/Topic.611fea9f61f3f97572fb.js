(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"6YY5":function(e,t,n){"use strict";(function(e){var a=c(n("Zx67")),o=c(n("kiBT")),r=c(n("OvRC")),l=c(n("pFYg")),i=c(n("C4MV")),u=c(n("woOf"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TotopAndCart=t.Channels=void 0;var s,d,p,f=u.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),h=n("U7vG"),g=(p=h)&&p.__esModule?p:{default:p},v=n("Zfgq"),_=n("d2xe"),y=n("f2t5");function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,l.default)(t))&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}n("d0sy");t.Channels=(d=s=function(e){function t(e){return w(this,t),E(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return b(t,h.Component),m(t,[{key:"componentWillMount",value:function(){this.props.load&&this.props.getDataList()}},{key:"componentWillUnmount",value:function(){this.props.saveDistanceTop(),this.props.changeReturn(!0)}},{key:"render",value:function(){var e=this.props.topicList;return g.default.createElement("div",{"data-page":"channels-modal"},this.props.load?g.default.createElement(_.LoadingRound,null):g.default.createElement("div",null,g.default.createElement(C,f({data:e},this.props)),g.default.createElement(N,{countCart:this.props.countCart})))}}]),t}(),s.contextTypes={router:g.default.PropTypes.object},d);var C=function(t){function n(){return w(this,n),E(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments))}return b(n,h.Component),m(n,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.loadmore")}},{key:"componentDidMount",value:function(){e(".list").css({minHeight:e(window).height()-40});var t=this.props.addEachList;e(window).scrollTop(0),this.props.saveDistanceTop();var n=this;e(window).bind("scroll.loadmore",function(){if(e(this).scrollTop()>=e(".list").height()-e(window).height()&&n.props.hasMore&&!1===n.props.gettingMore){var a=n.props.page.current_page+1;t(a)}})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.eachList,a=e.hasMore,o=e.gettingMore,r={10:"centerStyle",20:"leftStyle",30:"towColumnStyle"}[t.style],l=n.map(function(e,t){return g.default.createElement(T,{key:t,data:e,type:r})});return g.default.createElement("div",{className:"list c-clrfix"},g.default.createElement("a",{href:t.detail?t.detail:"javascript:void(0)"},t.channel_image&&g.default.createElement("img",{className:"list-banner",src:t.channel_image})),l,n.length?g.default.createElement("div",{className:"add "+(a&&o?"adding":"")},a?o?"加载中...":"下拉加载更多":"别拉了，我是有底线的~"):g.default.createElement(k,null))}}]),n}(),k=function(t){function n(){return w(this,n),E(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments))}return b(n,h.Component),m(n,[{key:"componentDidMount",value:function(){e(".no-goods").css({height:e(".list").height()-e(".list-banner").height()})}},{key:"render",value:function(){return g.default.createElement("div",{className:"no-goods"},g.default.createElement("img",{src:"/src/img/logistics/no-goods.png"}))}}]),n}(),T=function(e){function t(){var e,n,o;w(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return n=o=E(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),o.getPrice=function(e,t){var n=parseFloat(e).toFixed(2).split(".");return g.default.createElement("span",null,"¥",g.default.createElement("span",{className:t?"c-fs19":""},n[0]),".",n[1])},E(o,n)}return b(t,h.Component),m(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.data;n.promotion_detail.length;return g.default.createElement("div",{className:t},g.default.createElement("div",{className:"goods-img c-pr"},0===n.store?g.default.createElement("img",{id:"sold-out",src:"src/img/channels/soldOut.png"}):"",g.default.createElement(v.Link,{to:"item?item_id="+n.id},g.default.createElement("img",{src:n.primary_image?(0,y.addImageSuffix)(n.primary_image,"_m"):"/src/img/evaluate/goodsbg.png"}))),g.default.createElement("div",{className:"goods-msg"},g.default.createElement("div",{className:"goods2-titles"},g.default.createElement("div",{className:"label c-clrfix"},!!n.is_group&&g.default.createElement("span",{className:"not-promotion-label"},"拼团"),!n.is_group&&n.promotion_detail.promotion_tags&&g.default.createElement("span",{className:"promotion_area"},n.promotion_detail.promotion_tags.join("")),(20===n.trade_type||40===n.trade_type)&&g.default.createElement("span",{className:"not-promotion-label yellow-label"},"海外直邮"),30===n.trade_type&&g.default.createElement("span",{className:"not-promotion-label blue-label"},"跨境保税")),g.default.createElement(v.Link,{to:"item?item_id="+n.id},g.default.createElement("div",{className:"title"},n.title)),g.default.createElement("div",{className:"title-add"},n.sub_title)),g.default.createElement("div",{className:"price"},g.default.createElement("div",{className:"now c-fs12"},!!n.is_group&&g.default.createElement("i",{className:"group"},n.group_data.group_person,"人团"),this.getPrice(n.is_group?n.group_data.group_price:n.promotion_detail.promotion_price?n.promotion_detail.promotion_price:n.sell_price,!0)),g.default.createElement("span",{className:"old"},"towColumnStyle"!==t&&(n.is_group?"单买":"原价"),this.getPrice(n.is_group?n.sell_price:n.market_price,!1)),g.default.createElement(v.Link,{to:"item?item_id="+n.id},g.default.createElement("button",null,"去抢购","centerStyle"===t&&g.default.createElement("i",{className:"arrow-right-white-icon"}))))))}}]),t}(),N=t.TotopAndCart=function(t){function n(){var t,o,r;w(this,n);for(var l=arguments.length,i=Array(l),u=0;u<l;u++)i[u]=arguments[u];return o=r=E(this,(t=n.__proto__||(0,a.default)(n)).call.apply(t,[this].concat(i))),r.toTopClick=function(){var t=e(window),n=t.scrollTop(),a=r;r.time=setInterval(function(){n-=10,t.scrollTop(n),n<=0&&clearInterval(a.time)},1)},E(r,o)}return b(n,h.Component),m(n,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.top"),clearInterval(this.timer)}},{key:"componentDidMount",value:function(){clearInterval(this.timer);var t=e(".toTop");e(window).bind("scroll.top",function(){e(this).scrollTop()>35?t.show():t.hide()})}},{key:"render",value:function(){var e=this.props.countCart;return g.default.createElement("div",{className:"cart-toTop"},g.default.createElement(v.Link,{to:"/shopCart"},g.default.createElement("div",{className:"cart fix-window"},!!e&&g.default.createElement("span",{className:"cart-count"},e))),g.default.createElement("div",{className:"toTop fix-window",onClick:this.toTopClick}))}}]),n}()}).call(this,n("OOjC"))},d0sy:function(e,t,n){},gZqK:function(e,t,n){"use strict";(function(e){var a=c(n("Zx67")),o=c(n("kiBT")),r=c(n("OvRC")),l=c(n("pFYg")),i=c(n("C4MV")),u=c(n("woOf"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s,d,p=u.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.topicState=M,t.topicDispatch=L;var m=n("U7vG"),h=C(m),g=n("4n+p"),v=n("Zfgq"),_=n("f2Hk"),y=C(n("qAHI")),w=n("5qLU"),E=n("6YY5"),b=n("6quk");function C(e){return e&&e.__esModule?e:{default:e}}(0,_.actionAxios)("channel");var k=(0,_.concatPageAndType)("channel"),T={topicChannel:{url:w.WXAPI+"/getChannel",method:"get"},getCartCount:{url:w.WXAPI+"/cart/count",method:"get"}},N=(d=s=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,l.default)(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||(0,a.default)(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}(n,m.Component),f(n,[{key:"componentDidMount",value:function(){e(window).scrollTop(this.props.disTop)}},{key:"componentWillReceiveProps",value:function(e){this.props.isLogin!==e.isLogin&&this.props.getCartCount()}},{key:"render",value:function(){return h.default.createElement(E.Channels,this.props)}}]),n}(),s.contextTypes={router:h.default.PropTypes.object},d);function M(e,t){return p({},e.channel,e.global)}function L(t,n){var a=n.location.query.topicId;return{saveDistanceTop:function(){t(k("saveTop",{value:e(window).scrollTop()}))},changeReturn:function(e){t(k("changeReturn",{value:e}))},changeGettingList:function(e){t(k("changeGettingList",{value:e}))},getDefaultId:function(e){t(k("getDefaultId",{value:e}))},getDataList:function(){y.default.request(p({},T.topicChannel,{params:{nav_id:a,page:1,is_topic:!0}})).then(function(e){t(k("getEachListSuccess",{result:e.data})),document.title=e.data.data.data.list.nav_name}).catch(function(e){console.error(e),v.browserHistory.replace("/")})},getCartCount:function(){y.default.request(T.getCartCount).then(function(e){t(k("getCartCountSuccess",{result:e.data}))}).catch(function(e){console.log(e),b.tip.show({msg:e.response.data.message||"服务器繁忙"})})},addEachList:function(e){t(k("changeGettingMore",{value:!0})),y.default.request(p({},T.topicChannel,{params:{nav_id:a,page:e,is_topic:!0}})).then(function(e){t(k("addEachListSuccess",{result:e.data}))}).catch(function(e){t(k("changeGettingMore",{value:!1}))})}}}t.default=(0,g.connect)(M,L)(N)}).call(this,n("OOjC"))}}]);
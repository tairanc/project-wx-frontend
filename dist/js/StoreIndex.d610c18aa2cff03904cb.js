(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"6JQj":function(e,t,a){},"GVI+":function(e,t,a){},"L8n+":function(e,t,a){"use strict";(function(e){var n=c(a("mvHQ")),r=c(a("Zx67")),l=c(a("kiBT")),o=c(a("OvRC")),s=c(a("pFYg")),i=c(a("C4MV")),u=c(a("woOf"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomService=t.StoreType=t.Footer=t.GoodsList=t.AdvertiseImage=t.CouponList=t.AppBanner=t.LeaderInfo=t.LeaderNav=t.StoreLeader=t.ConcernResult=t.StoreSign=t.PartingLine=t.SearchBar=t.StoreNotOpen=t.StoreIndex=void 0;var d=u.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.storeIndexState=J;var p=a("U7vG"),m=k(p),h=a("Zfgq"),v=a("4n+p"),_=a("d2xe"),g=k(a("4GUf")),E=a("f2Hk"),y=a("DOM9"),N=k(y),w=k(a("qAHI")),b=a("5qLU");function k(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,s.default)(t))&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.default?(0,l.default)(e,t):e.__proto__=t)}a("GVI+");var L=w.default.CancelToken,T=(0,E.concatPageAndType)("storeIndex"),O={data:{url:b.WXAPI+"/shop/shopIndex",method:"get"},addShop:{url:b.WXAPI+"/user/saveShopCollection",method:"post"},removeShop:{url:b.WXAPI+"/user/removeShopCollection",method:"get"},coupon:{url:b.WXAPI+"/promotion/obtainCoupon",method:"post"}},A=t.StoreIndex=function(t){function a(e){C(this,a);var t=S(this,(a.__proto__||(0,r.default)(a)).call(this,e));return t.state={},document.title="店铺首页",t}return I(a,p.Component),f(a,[{key:"componentWillMount",value:function(){this.props.initialData()}},{key:"componentWillUnmount",value:function(){e(window).scrollTop(1)}},{key:"render",value:function(){var t=this.props,a=t.update,n=t.open_status,r=t.sign,l=t.subscribeAllow;return a?1===n||"1"===n?m.default.createElement("div",{"data-page":"store-index",style:{minHeight:e(window).height()}},m.default.createElement(x,d({query:this.props.location.query},r)),m.default.createElement(H,null),m.default.createElement(X,{query:this.props.location.query,subscribeAllow:l}),m.default.createElement(M,this.props),m.default.createElement(W,this.props)):m.default.createElement("div",{"data-page":"store-index",style:{minHeight:e(window).height()}},m.default.createElement(q,r)):m.default.createElement(_.LoadingRound,null)}}]),a}(),q=t.StoreNotOpen=function(e){function t(){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.shop_alias_name,a=e.shop_name;return m.default.createElement("div",{className:"storeNotOpen"},m.default.createElement("img",{src:"../src/img/store/store-close-icon.png"}),m.default.createElement("div",{className:"notOpenDesc"},m.default.createElement("p",null,"抱歉，您访问的店铺：",t||a,"，"),m.default.createElement("p",null,"暂未开放，敬请谅解")),m.default.createElement("div",{className:"returnIndexButton"},m.default.createElement(h.Link,{to:"/homeIndex"},"返回商城首页")))}}]),t}(),x=t.SearchBar=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.changeHandle=function(e){a.value=e.target.value},a.clearHandle=function(){a.value?a.value="":a.setState({innerValue:""})},a.searchJump=function(){h.browserHistory.push("/searchResult?storeHome=true&key="+(a.value||"")+"&shop="+a.props.query.shop+(3==a.props.shop_attr?"&type=3":""))},a.state={innerValue:e.defaultValue},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.value,t=this.state.innerValue;return m.default.createElement("form",{"data-comp":"search-bar-b",className:"g-row-flex",action:"javascript:;"},m.default.createElement("label",{className:"g-col-1 search-label",ref:"label"},m.default.createElement("input",{ref:"search",value:void 0!==e?e:t,type:"search",placeholder:"搜索店铺内商品",onChange:this.changeHandle,className:"search-input"}),""!=(void 0!==e?e:t)&&m.default.createElement("i",{ref:"clear",onTouchTap:this.clearHandle,className:"close-x-icon"}," "),m.default.createElement("i",{className:"search-icon"}," ")),m.default.createElement("button",{className:"search-btn",onClick:this.searchJump},"搜索"))}}]),t}(),H=t.PartingLine=function(e){function t(){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return I(t,p.Component),f(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"partingLine"},m.default.createElement("img",{src:"../src/img/store/bar-parting-line.png"}))}}]),t}(),R=t.StoreSign=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.concernClick=function(e){a.props.subscribeAllow&&a.props.subscribeStore(e)},a.concernRender=function(e){return e?m.default.createElement("div",{className:"concerned"},m.default.createElement("span",null,"已关注")):m.default.createElement("div",{className:"noConcerned"},m.default.createElement("img",{src:"../src/img/store/follow-icon.png"}),m.default.createElement("span",null,"关注"))},a.jumpDetail=function(e,t,a){"self"!=t.shop_type&&a&&a.license_img&&h.browserHistory.push("/store/detail?shop="+e)},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.is_subscribe,a=e.sign,n=e.resultShow,r=e.shop_decoration_data,l=e.shop_extend_info,o=e.query,s=e.image_domain;o.shop;return m.default.createElement("div",{className:"storeSign container"},m.default.createElement("div",{className:"storeSignImage",onClick:this.jumpDetail.bind(this,r.shop_id,a,l)},m.default.createElement("img",{src:a.shop_logo?s+"/"+a.shop_logo:"../src/img/temporary/store_logo.png"})),m.default.createElement("div",{className:"storeSignInfo",onClick:this.jumpDetail.bind(this,r.shop_id,a,l)},m.default.createElement("p",{className:"storeSignInfoName"},a.shop_alias_name||a.shop_name),m.default.createElement("p",{className:"storeSignInfoDesc"},"泰然城精选商家 服务保障")),m.default.createElement("div",{className:"storeSignFollowButton",onClick:this.concernClick.bind(this,t)},this.concernRender(t),m.default.createElement(j,{state:t,resultShow:n})))}}]),t}(),j=t.ConcernResult=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.chooseResult=function(e){return e?m.default.createElement("div",{className:"concernSuccess"},m.default.createElement("img",{src:"../src/img/store/concern-result-icon.png"}),m.default.createElement("br",null),m.default.createElement("span",null,"关注成功"),m.default.createElement("p",null,"可到我的收藏内查看最新关注")):m.default.createElement("div",{className:"concernFailed"},m.default.createElement("img",{src:"../src/img/store/concern-result-icon.png"}),m.default.createElement("br",null),m.default.createElement("span",null,"取消关注"))},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.state;return m.default.createElement("div",{className:"concernResult "+(this.props.resultShow?"":"hide")},this.chooseResult(e))}}]),t}(),M=t.StoreLeader=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.setNav=function(e){a.setState({nav:e})},a.state={nav:1},a}return I(t,p.Component),f(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"storeLeader","data-plugin":"swiper"},m.default.createElement(D,{state:this.state,setNav:this.setNav}),m.default.createElement(P,d({state:this.state},this.props)))}}]),t}(),D=t.LeaderNav=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleClick=function(e){a.props.setNav(e)},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.state.nav;return m.default.createElement("ul",{className:"leaderNav"},m.default.createElement("li",{className:1==e?"activeNav":"",onClick:this.handleClick.bind(this,1)},m.default.createElement("span",null,"店铺首页")),m.default.createElement("li",{className:2==e?"activeNav":"",onClick:this.handleClick.bind(this,2)},m.default.createElement("span",null,"全部商品")))}}]),t}(),P=t.LeaderInfo=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.factoryComponent=function(e,t,n,r){var l=a.props.image_domain;switch(e){case"slide":return m.default.createElement(B,{key:r,value:t,image:l});case"coupon":return n?m.default.createElement(G,{key:r,value:t}):"";case"floor_single":return m.default.createElement(V,{key:r,value:t,img:l});case"floor":return m.default.createElement(U,{key:r,value:t,img:l})}},a.factoryArray=function(e,t,n){if(e.length==t.length){for(var r=[],l=0;l<e.length;l++)r.push(a.factoryComponent(e[l],t[l],n,l));return r}},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.state.nav,t=this.props,a=t.update,n=t.shop_decoration_data,r=n.modules,l=n.is_show_coupon,o=this.props.sign.shop_attr,s=r&&r.map(function(e){return e.module_type});return m.default.createElement("div",{className:"leaderInfo"},1==e?a?r&&r.length?m.default.createElement("div",{className:"storeIndexItem"},s&&this.factoryArray(s,r,l)):m.default.createElement("div",{className:"allGoodsItem"},m.default.createElement(N.default,d({},this.props,{storeHomeRequest:"true",shop_attr:o}))):m.default.createElement(_.LoadingRound,null):"",2==e?m.default.createElement("div",{className:"allGoodsItem"},m.default.createElement(N.default,d({},this.props,{storeHomeRequest:"true",shop_attr:o}))):"")}}]),t}(),B=t.AppBanner=function(e){function t(e){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return I(t,p.Component),f(t,[{key:"componentDidMount",value:function(){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationType:"fraction",loop:!0,autoplay:2e3,lazyLoading:!0})}},{key:"render",value:function(){var e=this.props.value.module_data,t=this.props.image;return m.default.createElement("div",{className:"appBanner swiper-container"},m.default.createElement("ul",{className:"swiper-wrapper"},e.map(function(e,a){return m.default.createElement("li",{className:"swiper-slide",key:a},m.default.createElement("a",{href:e.link},m.default.createElement("img",{src:t+"/"+e.image})))})),m.default.createElement("div",{className:"swiper-pagination custom-pagination"}))}}]),t}(),G=t.CouponList=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.clickHandle=function(e){w.default.request(d({},O.coupon,{data:{coupon_id:e,source:"activity",description:""}})).then(function(e){0===e.data.code?g.default.MsgTip({msg:"领取成功"}):(401==e.data.code&&(window.location.href="/login"),g.default.MsgTip({msg:e.data.msg}))}).catch(function(e){g.default.MsgTip({msg:e.response.data.message})})},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this,t=this.props.value.module_data.map(function(t,a){return m.default.createElement("li",{className:"coupon",key:a},m.default.createElement("div",{className:"couponLeft"},m.default.createElement("p",{className:"couponNum"},"￥",m.default.createElement("span",null,t.deduct_money)),m.default.createElement("p",{className:"couponLimit"},"满",m.default.createElement("span",null,t.limit_money),"使用")),m.default.createElement("div",{className:"couponRight"},m.default.createElement("p",{className:"couponText"},"优惠券"),m.default.createElement("span",{className:"couponButton",onClick:e.clickHandle.bind(e,t.id)},"点击领取")))});return m.default.createElement("ul",{className:"couponList"},t)}}]),t}(),V=t.AdvertiseImage=function(e){function t(e){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.value.module_data,t=this.props.img;return m.default.createElement("div",{className:"advertiseImage"},e.map(function(e,a){return m.default.createElement("a",{key:a,href:e.link},m.default.createElement("img",{src:t+"/"+e.image}))}))}}]),t}(),U=t.GoodsList=function(t){function a(e){C(this,a);var t=S(this,(a.__proto__||(0,r.default)(a)).call(this,e));return t.tradeTypeObj={10:"国内贸易",20:"海淘",30:"跨境保税",40:"海外直邮"},t.tagStyleObj={10:"hide",20:"tag_yellow",30:"tag_blue",40:"tag_yellow"},t}return I(a,p.Component),f(a,[{key:"componentDidMount",value:function(){e(window).scrollTop(1)}},{key:"render",value:function(){var e=this.tradeTypeObj,t=this.tagStyleObj,a=this.props.value.module_name,n=this.props.value.module_data,r=this.props.img,l=n.map(function(a,n){var l=a.primary_image,o=a.id,s=a.current_store,i=a.promotion_tag,u=a.market_price,c=a.title,d=s<=0;return m.default.createElement("li",{className:"goods",key:n},m.default.createElement(h.Link,{to:"/item?item_id="+o},m.default.createElement("div",{className:"goodsImage"},m.default.createElement("img",{src:r+"/"+l}),d?m.default.createElement("div",{className:"float-label"},m.default.createElement("img",{src:"/src/img/search/sale-out-big.png"})):""),m.default.createElement("p",{className:"goodsDesc"},c),m.default.createElement("p",{className:"goodsPrice"},m.default.createElement("span",{className:"nowPrice"},"￥",a.activity_price||a.sell_price),m.default.createElement("span",{className:"oldPrice"},"￥",u)),m.default.createElement("ul",{className:"goodsTag"},m.default.createElement("li",{className:t[a.trade_type],key:"tagType1"},m.default.createElement("span",null,e[a.trade_type])),(i||[]).map(function(e,t){return m.default.createElement("li",{className:"tag_red",key:t},m.default.createElement("span",null,e))}))))});return m.default.createElement("div",{className:"goodsList"},m.default.createElement("div",{className:"title"},a||"今日特卖"),m.default.createElement("ul",{className:"content container"},l))}}]),a}(),W=t.Footer=function(e){function t(e){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return I(t,p.Component),f(t,[{key:"render",value:function(){return m.default.createElement("ul",{className:"footer"},m.default.createElement(F,this.props))}}]),t}(),F=(t.StoreType=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.clickHandle=function(){a.setState({hide:!a.state.hide})},a.state={hide:!0},a}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.shop_cat_list,a=e.shop_decoration_data,n=this.state.hide;return m.default.createElement("li",{className:"storeType",onClick:this.clickHandle},m.default.createElement("img",{src:"../src/img/store/store-type-icon.png"}),m.default.createElement("span",null,"商品分类"),m.default.createElement("div",{className:"storeList "+(n?"hide":"")},m.default.createElement("ul",{className:"storeListBody"},t.map(function(e,t){return m.default.createElement("li",{key:t},m.default.createElement(h.Link,{className:"storeListLink",to:"/searchResult?shop="+a.shop_id+"&category="+e.cat_id},e.cat_name))})),m.default.createElement("div",{className:"storeListIcon"})))}}]),t}(),t.CustomService=function(e){function t(e){return C(this,t),S(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return I(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props.sign.shop_attr;return m.default.createElement("li",{className:"customService"},m.default.createElement(_.CustomerService,{className:"save",shopAttr:e},m.default.createElement("img",{src:"../src/img/store/custom-service-icon.png"}),m.default.createElement("span",null,"联系客服")))}}]),t}());function J(e){return d({},e.searchResult3,e.storeIndex)}var X=(0,v.connect)(J,function(e,t){return{subscribeStore:function(a){e(T("subscribeAllow",{state:!1}));var r=void 0;r=a?d({},O.removeShop,{params:{shop_id:(0,n.default)([t.query.shop])}}):d({},O.addShop,{data:{shop_id:t.query.shop}}),w.default.request(d({},r,{cancelToken:new L(function(e){e})})).then(function(t){e(T("subscribeAllow",{state:!0})),0!==t.data.code?(401==t.data.code&&(window.location.href="/login"),g.default.MsgTip({msg:t.data.msg})):(e(T("subscribeStore",{state:!a})),e(T("resultShow",{resultShow:!0})),setTimeout(function(){e(T("resultShow",{resultShow:!1}))},3e3))}).catch(function(t){e(T("subscribeAllow",{state:!0})),console.log(t)})}}})(R);t.default=(0,v.connect)(J,function(e,t){return d({},(0,y.searchResultDispatch)(e,t),{initialData:function(){var a=t.location.query.shop;e(T("dataUpdate",{update:!1})),w.default.request(d({},O.data,{params:{shop_id:a},cancelToken:new L(function(e){e})})).then(function(t){0===t.data.code&&(e(T("initialData",{value:t.data.data})),e(T("dataUpdate",{update:!0})))}).catch(function(e){console.log(e)})}})})(A)}).call(this,a("OOjC"))},V1dG:function(e,t,a){"use strict";(function(e){var n=u(a("Zx67")),r=u(a("kiBT")),l=u(a("OvRC")),o=u(a("pFYg")),s=u(a("C4MV")),i=u(a("woOf"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=i.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a("U7vG"),p=v(f),m=v(a("qAHI")),h=a("5qLU");function v(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}a("6JQj");var y=m.default.CancelToken,N={data:{url:h.WXAPI+"/shop/shopLicense",method:"get"}},w=function(t){function a(e,t){_(this,a);var r=g(this,(a.__proto__||(0,n.default)(a)).call(this,e));return r.state={image:""},document.title="店铺营业执照",t.isApp&&(window.location.href="jsbridge://set_title?title=店铺营业执照"),r}return E(a,f.Component),d(a,[{key:"componentDidMount",value:function(){var e=this;m.default.request(c({},N.data,{params:{shop_id:this.props.location.query.shop},cancelToken:new y(function(e){e})})).then(function(t){0===t.data.code&&e.setState({image:t.data.data.license})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var t=this.state.image;return p.default.createElement("div",{"data-page":"store-detail",style:{minHeight:e(window).height()}},p.default.createElement("div",{className:"licenseTitle"},"店铺营业执照"),p.default.createElement("div",{className:"licenseDesc"},p.default.createElement("h1",null,"泰然城网店经营者营业执照信息"),p.default.createElement("p",null," 根据国家工商总局《网络交易管理办法》要求对网店营业执照信息公示如下：")),p.default.createElement(b,{image:t}),p.default.createElement("p",{className:"licenseImageDesc"},"（经营者信息以营业执照为准）"))}}]),a}();t.default=w;var b=function(e){function t(){return _(this,t),g(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return E(t,f.Component),d(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"licenseImage"},p.default.createElement("img",{src:this.props.image}))}}]),t}()}).call(this,a("OOjC"))}}]);
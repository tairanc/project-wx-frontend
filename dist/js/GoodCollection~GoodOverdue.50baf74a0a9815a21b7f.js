(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"JO/b":function(e,t,a){"use strict";(function(e){var n=u(a("mvHQ")),o=u(a("Zx67")),l=u(a("kiBT")),s=u(a("OvRC")),i=u(a("pFYg")),r=u(a("C4MV")),c=u(a("woOf"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CoverDel=t.EachShop=t.ShopList=t.ShopCollection=t.TotopAndCart=t.default=void 0;var d=c.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=a("U7vG"),h=C(p),g=a("Zfgq"),m=a("d2xe"),v=C(a("4GUf")),y=C(a("qAHI"));a("TLE5");a("OMJi");function C(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.default?(0,l.default)(e,t):e.__proto__=t)}var S={shopCollectionRemove:{url:"/wxapi/user/removeShopCollection"}},w=function(t){function a(){var t,n,l;E(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return n=l=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),l.getData=function(t){var a=l;l.setState({update:!1,page:2}),e.ajax({url:"/wxapi/collection.api",type:"GET",data:{pages:1,is_used:t},success:function(e){401!==e.biz_code?200===e.code&&!0===e.status?a.setState({dataList:e.data.item_list,update:!0,hasMore:e.data.item_list.length>=18}):v.default.MsgTip({msg:e.msg}):g.browserHistory.replace("/login?redirect_uri=%2FmyCollectlion")},error:function(e){v.default.MsgTip({msg:"服务器繁忙"})}})},l.addData=function(t){var a=l;l.setState({sending:!0}),e.ajax({url:"/wxapi/collection.api",type:"GET",data:{pages:l.state.page,is_used:t},success:function(e){200===e.code&&!0===e.status?e.data?a.setState({dataList:a.state.dataList.concat(e.data.item_list),page:a.state.page+1,hasMore:e.data.item_list.length>=18,sending:!1}):a.setState({hasMore:!1,sending:!1}):(v.default.MsgTip({msg:e.msg}),a.setState({sending:!1}))},error:function(e){v.default.MsgTip({msg:"服务器繁忙"}),a.setState({sending:!1})}})},l.changeCover1=function(){l.setState({cover1:!l.state.cover1})},l.changeCover2=function(){l.setState({cover2:!1})},l.changeType=function(e){l.setState({isUsed:e}),l.getData(e)},l.changeEdit=function(){l.setState({edit:!l.state.edit,cover1:!1,isChooseAll:!1})},l.del=function(){var t=e(".del-choose");t.length?l.setState({cover2:!0,delCount:t.length}):v.default.MsgTip({msg:"请选择要移除的商品"})},l.changeChooseAll=function(){l.setState({isChooseAll:!l.state.isChooseAll}),l.state.isChooseAll?e(".del").removeClass("del-choose"):e(".del").addClass("del-choose")},l.chooseAllFalse=function(){l.setState({isChooseAll:!1})},l.changeChooseAll2=function(e){l.setState({isChooseAll:e})},l.commodityHandle=function(){l.setState({selectGoods:!0})},l.shopHandle=function(){l.setState({selectGoods:!1})},_(l,n)}return k(a,p.Component),f(a,[{key:"componentWillMount",value:function(){this.setState({cover1:!1,cover2:!1,edit:!1,dataList:[],update:!1,page:2,hasMore:!0,sending:!1,delCount:1,isUsed:"all",isChooseAll:!1,selectGoods:!0}),document.title="我的收藏"}},{key:"componentDidMount",value:function(){e(this.refs.collection).css({minHeight:e(window).height(),background:"#f4f4f4"}),this.getData("all")}},{key:"render",value:function(){var e=this.state,t=e.isUsed,a=e.edit,n=e.dataList,o=e.hasMore,l=e.sending,s=e.delCount,i=e.isChooseAll,r=e.cover1,c=e.cover2,u=e.update,d=e.selectGoods;return h.default.createElement("div",{"data-page":"my-collection"},h.default.createElement("section",{id:"my-collection",ref:"collection"},h.default.createElement("div",{className:"nav"},h.default.createElement("div",{className:"collect-type",onClick:this.commodityHandle},h.default.createElement("span",{className:d?"selected":""},"商品收藏")),h.default.createElement("div",{className:"split-line"}),h.default.createElement("div",{className:"collect-type",onClick:this.shopHandle},h.default.createElement("span",{className:d?"":"selected"},"店铺关注"))),d?u?h.default.createElement("div",null,h.default.createElement("div",{className:"edit c-fs14"},h.default.createElement("div",{className:"choose c-pr",onClick:a?"":this.changeCover1},a?h.default.createElement("img",{onClick:this.changeChooseAll,className:"chooseAll",src:"src/img/addressAndIdentityInfo/"+(i?"trChoose":"trUnChoose")+".png"}):"",a?"批量删除宝贝":"all"===t?"全部宝贝":"失效宝贝",a?"":h.default.createElement("span",{className:"open"})),h.default.createElement("div",{className:"edit-btn "+(a||n.length?"":"c-cc9"),onClick:a||n.length?this.changeEdit:""},a?"完成":"编辑")),n.length?h.default.createElement(A,{changeChooseAll2:this.changeChooseAll2,edit:a,isUsed:t,hasMore:o,sending:l,data:n,addData:this.addData}):h.default.createElement(b,{isUsed:t}),a&&n.length?h.default.createElement("div",{onClick:this.del,className:"del-btn c-fs16"},"移除收藏夹"):"",r?h.default.createElement(N,{isUsed:t,fn1:this.changeCover1,fnT:this.changeType}):"",c?h.default.createElement(D,{chooseAllFalse:this.chooseAllFalse,fn2:this.changeCover2,getData:this.getData,delCount:s}):"",h.default.createElement(L,null)):h.default.createElement(m.LoadingRound,null):h.default.createElement(T,null)))}}]),a}();t.default=w;var b=function(t){function a(){return E(this,a),_(this,(a.__proto__||(0,o.default)(a)).apply(this,arguments))}return k(a,p.Component),f(a,[{key:"componentDidMount",value:function(){e(this.refs.empty).css({minHeight:e(window).height()})}},{key:"render",value:function(){var e=this.props.isUsed;return h.default.createElement("div",{className:"empty",ref:"empty"},h.default.createElement("img",{src:"all"===e?"src/img/logistics/empty.png":"src/img/logistics/empty2.png"}),h.default.createElement(g.Link,{to:"/"},"去逛逛"))}}]),a}(),N=function(t){function a(){var t,n,l;E(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return n=l=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),l.changeList=function(t){var a=l.props,n=a.fn1,o=a.fnT,s=t.target;e(s).children().length||o(e(s).attr("id"));n()},_(l,n)}return k(a,p.Component),f(a,[{key:"render",value:function(){var e=this.props.isUsed;return h.default.createElement("div",{className:"cover1",onClick:this.changeList},h.default.createElement("ul",{className:"choose-type c-fs14"},h.default.createElement("li",{id:"all",className:"all"===e?"chose":""},"全部宝贝"),h.default.createElement("li",{id:"invalid",className:"all"===e?"":"chose"},"失效宝贝")))}}]),a}(),D=function(t){function a(){var t,n,l;E(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return n=l=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),l.changeList=function(t){var a=l.props,n=a.fn2,o=a.getData,s=a.chooseAllFalse,i=t.target;if(!e(i).children().length&&"del"===e(i).attr("id")){for(var r=[],c=e(".del-choose"),u=c.length,d=0;d<u;d++)r.push(c.eq(d).attr("id"));e.ajax({url:"/wxapi/collection-remove.api",data:{item_id:r},type:"GET",success:function(t){v.default.MsgTip({msg:t.msg}),e(".del-choose").removeClass("del-choose");var a=e(".list").attr("id");s(),o(a)},error:function(e){v.default.MsgTip({msg:"服务器繁忙"})}})}n()},_(l,n)}return k(a,p.Component),f(a,[{key:"render",value:function(){return h.default.createElement("div",{className:"cover2",onClick:this.changeList},h.default.createElement("ul",{className:"choose-todo c-fs16"},h.default.createElement("li",{id:"del",className:"chose"},"确定移除",this.props.delCount,"个宝贝"),h.default.createElement("li",{id:"cancel"},"取消")))}}]),a}(),A=function(t){function a(){return E(this,a),_(this,(a.__proto__||(0,o.default)(a)).apply(this,arguments))}return k(a,p.Component),f(a,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.get")}},{key:"componentDidMount",value:function(){var t=this.props.addData;e(window).bind("scroll.get",function(){if(e(this).scrollTop()>=e(".list").height()-e(window).height()&&"下拉加载更多"===e(".more").html()){var a=e(".list").attr("id");t(a)}})}},{key:"render",value:function(){var e=this.props,t=e.edit,a=e.data,n=e.hasMore,o=e.sending,l=e.changeChooseAll2,s=a.map(function(e,a){return h.default.createElement(M,{key:a,data:e,edit:t,changeChooseAll2:l})});return h.default.createElement("div",{className:"list",id:this.props.isUsed},s,h.default.createElement("div",{className:"more"},n?o?"加载中...":"下拉加载更多":"别拉了，我是有底线的~"))}}]),a}(),M=function(t){function a(){var t,n,l;E(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return n=l=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),l.changeChoose=function(t){var a=l.props.changeChooseAll2,n=e(t.target);n.hasClass("del-choose")?n.removeClass("del-choose"):n.addClass("del-choose"),a(e(".del").length===e(".del-choose").length)},_(l,n)}return k(a,p.Component),f(a,[{key:"render",value:function(){var e=this.props,t=e.edit,a=e.data,n={Bonded:"跨境保税",Direct:"海外直邮"};return h.default.createElement("div",{className:"goods"},t?h.default.createElement("div",{id:a.item_id,onClick:this.changeChoose,className:"del c-fl"}):"",h.default.createElement(g.Link,{to:"/item?item_id="+a.item_id},h.default.createElement("div",{className:"goods-img c-pr"},h.default.createElement("img",{src:a.image_default_id?a.image_default_id:"src/img/evaluate/goodsbg.png"}),a.is_used?"":h.default.createElement("div",{className:"Invalid c-fs12 c-lh20 c-cfff c-tc"},"失效"))),h.default.createElement("div",{className:"goods-msg c-fl "+(t?"goods-msg2":"")},h.default.createElement("div",{className:"title"},h.default.createElement("ul",{className:"label c-clrfix"},a.is_company?h.default.createElement("li",null,"企业购"):"",n[a.trade_type]?h.default.createElement("li",{style:{background:{Bonded:"#27a1e5",Direct:"#fbb80f"}[a.trade_type]}},n[a.trade_type]):""),h.default.createElement(g.Link,{to:"/item?item_id="+a.item_id},h.default.createElement("div",{className:"goods-title c-fs14"},a.goods_name))),h.default.createElement("p",{className:"price c-cdred c-fs12"},"¥",h.default.createElement("span",{className:"c-fs15 c-fb"},a.goods_price))))}}]),a}(),L=t.TotopAndCart=function(t){function a(){return E(this,a),_(this,(a.__proto__||(0,o.default)(a)).apply(this,arguments))}return k(a,p.Component),f(a,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.top")}},{key:"componentWillMount",value:function(){this.setState({count:0})}},{key:"componentDidMount",value:function(){var t=e(window),a=(t.height(),e(".toTop")),n=void 0;a.on("click",function(){clearInterval(n);var e=t.scrollTop();n=setInterval(function(){e-=20,t.scrollTop(e),e<=0&&clearInterval(n)},1)}),e(window).bind("scroll.top",function(){e(this).scrollTop()>35?a.show():a.hide()});var o=this;e.ajax({url:"/wxapi/getCartCount.api",type:"GET",success:function(e){200===e.code&&!0===e.status?o.setState({count:e.data.cart_num}):v.default.MsgTip({msg:e.msg})}})}},{key:"render",value:function(){var e=this.state.count;return h.default.createElement("div",{className:"cart-toTop"},h.default.createElement("ul",null,h.default.createElement(g.Link,{to:"/shopCart"},h.default.createElement("li",{className:"cart"},e?h.default.createElement("span",{className:"cart-count"},e):"")),h.default.createElement("li",{className:"toTop"})))}}]),a}(),T=t.ShopCollection=function(t){function a(t){E(this,a);var n=_(this,(a.__proto__||(0,o.default)(a)).call(this,t));return n.getShopData=function(){var e=n;y.default.request("/wxapi/user/getShopCollectionList?page=1").then(function(t){var a=t.data;0===a.code&&e.setState({update:!0,count:a.data.count,shopList:a.data.data})}).catch(function(e){console.log(e)})},n.addShopData=function(){n.setState({sending:!0});var e=n.state,t=e.page,a=e.shopList,o=n;y.default.request("/wxapi/user/getShopCollectionList?page="+t++).then(function(e){var n=e.data;0===n.code?n.data.data.length?o.setState({shopList:a.concat(n.data.data),page:t,hasMore:n.data.page.current_page<n.data.page.total_page,sending:!1}):o.setState({hasMore:!1,sending:!1}):(v.default.MsgTip({msg:n.msg}),o.setState({sending:!1}))}).catch(function(e){console.log(e),v.default.MsgTip({msg:"服务器繁忙"}),o.setState({sending:!1})})},n.changeChooseAll=function(){n.setState({isChooseAll:!n.state.isChooseAll}),n.state.isChooseAll?e(".del").removeClass("del-choose"):e(".del").addClass("del-choose")},n.chooseAllFalse=function(){n.setState({isChooseAll:!1})},n.changeChooseAll2=function(e){n.setState({isChooseAll:e})},n.changeShopEdit=function(){n.setState({shopEdit:!n.state.shopEdit,isChooseAll:!1})},n.changeCover2=function(){n.setState({coverDel:!1})},n.del=function(){e(".del-choose").length?n.setState({coverDel:!0}):v.default.MsgTip({msg:"请选择要取消的店铺"})},n.state={update:!1,count:0,shopEdit:!1,isChooseAll:!1,shopList:[],coverDel:!1,page:2,hasMore:!0,sending:!1},n}return k(a,p.Component),f(a,[{key:"componentWillMount",value:function(){this.getShopData()}},{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.get")}},{key:"componentDidMount",value:function(){var t=this;e(window).bind("scroll.get",function(){e(this).scrollTop()>=e(".list").height()-e(window).height()&&"下拉加载更多"===e(".no-more-shop").html()&&t.addShopData()})}},{key:"render",value:function(){var e=this.state,t=e.update,a=e.count,n=e.shopList,o=e.shopEdit,l=e.coverDel,s=e.isChooseAll,i=e.hasMore,r=e.sending;return t?h.default.createElement("div",null,h.default.createElement("div",{className:"edit c-fs14 "+(a?"":"c-dpno")},h.default.createElement("div",{className:"choose c-pr",onClick:o?"":this.changeCover1},o?h.default.createElement("img",{onClick:this.changeChooseAll,className:"chooseAll",src:"src/img/addressAndIdentityInfo/"+(s?"trChoose":"trUnChoose")+".png"}):"",o?"批量取消关注":"全部店铺("+a+")"),h.default.createElement("div",{className:"edit-btn",onClick:this.changeShopEdit},o?"完成":"编辑")),n.length>0?h.default.createElement(O,{shopList:n,shopEdit:o,changeChooseAll2:this.changeChooseAll2}):h.default.createElement(m.EmptyPage,{config:{msg:"您还没有关注任何店铺~",btnText:"去商城逛逛",link:"/homeIndex",bgImgUrl:"/src/img/collect/no-shop.png"}}),n.length<7?"":h.default.createElement("div",{className:"no-more-shop"},i?r?"加载中...":"下拉加载更多":"别拉了，我是有底线的~"),o&&a?h.default.createElement("div",{className:"del-btn c-fs16",onClick:this.del},"取消关注"):"",l?h.default.createElement(j,{chooseAllFalse:this.chooseAllFalse,fn2:this.changeCover2,getShopData:this.getShopData}):""):h.default.createElement(m.LoadingRound,null)}}]),a}(),O=t.ShopList=function(e){function t(){return E(this,t),_(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return k(t,p.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.shopList,a=e.shopEdit,n=e.changeChooseAll2;return h.default.createElement("div",{className:"shop-list"},t.map(function(e,t){return h.default.createElement(U,{key:t,item:e,shopEdit:a,changeChooseAll2:n})}))}}]),t}(),U=t.EachShop=function(t){function a(){var t,n,l;E(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return n=l=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),l.changeChoose=function(t){var a=l.props.changeChooseAll2,n=e(t.target);n.hasClass("del-choose")?n.removeClass("del-choose"):n.addClass("del-choose"),a(e(".del").length===e(".del-choose").length)},l.linkTo=function(){var e=l.props.item;if(1!==e.open_state)return!1;g.browserHistory.push("/store/home?shop="+e.shop_id)},_(l,n)}return k(a,p.Component),f(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.shopEdit;return h.default.createElement("div",{className:"shop-info"},a&&h.default.createElement("div",{id:t.shop_id,onClick:this.changeChoose,className:"del c-fl"}),h.default.createElement(g.Link,{onClick:this.linkTo},h.default.createElement("div",{className:"shop-detail "+(a?"shop-detail2":"")},h.default.createElement("div",{className:"shop-logo"},h.default.createElement("img",{src:t.shop_logo?t.shop_logo:"src/img/evaluate/goodsbg.png"})),h.default.createElement("div",{className:"text-wrap"},h.default.createElement("p",{className:"title"},t.shop_alias?t.shop_alias:t.shop_name),h.default.createElement("p",{className:"sub-title"},"泰然城精选商家 服务保障"))),h.default.createElement("img",{className:"arrow-right",src:"src/img/collect/arrow-right.png"})))}}]),a}(),j=t.CoverDel=function(t){function a(){var t,l,s;E(this,a);for(var i=arguments.length,r=Array(i),c=0;c<i;c++)r[c]=arguments[c];return l=s=_(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(r))),s.changeList=function(t){var a=s.props,o=a.fn2,l=a.getShopData,i=a.chooseAllFalse,r=t.target;if(!e(r).children().length&&"del"===e(r).attr("id")){for(var c=[],u=e(".del-choose"),f=u.length,p=0;p<f;p++)c.push(u.eq(p).attr("id"));y.default.request(d({},S.shopCollectionRemove,{params:{shop_id:(0,n.default)(c)}})).then(function(t){t.data;v.default.MsgTip({msg:"取消成功"}),e(".del-choose").removeClass("del-choose");e(".list").attr("id");i(),l()}).catch(function(e){v.default.MsgTip({msg:"服务器繁忙"})})}o()},_(s,l)}return k(a,p.Component),f(a,[{key:"render",value:function(){return h.default.createElement("div",{className:"cover2",onClick:this.changeList},h.default.createElement("ul",{className:"choose-todo c-fs16"},h.default.createElement("li",{id:"del",className:"chose"},"取消关注"),h.default.createElement("li",{id:"cancel"},"取消")))}}]),a}()}).call(this,a("OOjC"))},LC74:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},OMJi:function(e,t,a){(function(e,n){var o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(i(arguments[a]));return t.join(" ")}a=1;for(var n=arguments,l=n.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(a>=l)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(e){return"[Circular]"}default:return e}}),r=n[a];a<l;r=n[++a])g(r)||!E(r)?s+=" "+r:s+=" "+i(r);return s},t.deprecate=function(a,o){if(y(e.process))return function(){return t.deprecate(a,o).apply(this,arguments)};if(!0===n.noDeprecation)return a;var l=!1;return function(){if(!l){if(n.throwDeprecation)throw new Error(o);n.traceDeprecation?console.trace(o):console.error(o),l=!0}return a.apply(this,arguments)}};var l,s={};function i(e,a){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(a)?n.showHidden=a:a&&t._extend(n,a),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),u(n,e,n.depth)}function r(e,t){var a=i.styles[t];return a?"["+i.colors[a][0]+"m"+e+"["+i.colors[a][1]+"m":e}function c(e,t){return e}function u(e,a,n){if(e.customInspect&&a&&S(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var o=a.inspect(n,e);return v(o)||(o=u(e,o,n)),o}var l=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,a);if(l)return l;var s=Object.keys(a),i=function(e){var t={};return e.forEach(function(e,a){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(a)),k(a)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(a);if(0===s.length){if(S(a)){var r=a.name?": "+a.name:"";return e.stylize("[Function"+r+"]","special")}if(C(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(_(a))return e.stylize(Date.prototype.toString.call(a),"date");if(k(a))return d(a)}var c,E="",w=!1,b=["{","}"];(p(a)&&(w=!0,b=["[","]"]),S(a))&&(E=" [Function"+(a.name?": "+a.name:"")+"]");return C(a)&&(E=" "+RegExp.prototype.toString.call(a)),_(a)&&(E=" "+Date.prototype.toUTCString.call(a)),k(a)&&(E=" "+d(a)),0!==s.length||w&&0!=a.length?n<0?C(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),c=w?function(e,t,a,n,o){for(var l=[],s=0,i=t.length;s<i;++s)D(t,String(s))?l.push(f(e,t,a,n,String(s),!0)):l.push("");return o.forEach(function(o){o.match(/^\d+$/)||l.push(f(e,t,a,n,o,!0))}),l}(e,a,n,i,s):s.map(function(t){return f(e,a,n,i,t,w)}),e.seen.pop(),function(e,t,a){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1];return a[0]+t+" "+e.join(", ")+" "+a[1]}(c,E,b)):b[0]+E+b[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,a,n,o,l){var s,i,r;if((r=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?i=r.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):r.set&&(i=e.stylize("[Setter]","special")),D(n,o)||(s="["+o+"]"),i||(e.seen.indexOf(r.value)<0?(i=g(a)?u(e,r.value,null):u(e,r.value,a-1)).indexOf("\n")>-1&&(i=l?i.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+i.split("\n").map(function(e){return"   "+e}).join("\n")):i=e.stylize("[Circular]","special")),y(s)){if(l&&o.match(/^\d+$/))return i;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+i}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function C(e){return E(e)&&"[object RegExp]"===w(e)}function E(e){return"object"==typeof e&&null!==e}function _(e){return E(e)&&"[object Date]"===w(e)}function k(e){return E(e)&&("[object Error]"===w(e)||e instanceof Error)}function S(e){return"function"==typeof e}function w(e){return Object.prototype.toString.call(e)}function b(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(l)&&(l=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(l)){var a=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,a,n)}}else s[e]=function(){};return s[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=C,t.isObject=E,t.isDate=_,t.isError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=a("fC4T");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,a;console.log("%s - %s",(e=new Date,a=[b(e.getHours()),b(e.getMinutes()),b(e.getSeconds())].join(":"),[e.getDate(),N[e.getMonth()],a].join(" ")),t.format.apply(t,arguments))},t.inherits=a("LC74"),t._extend=function(e,t){if(!t||!E(t))return e;for(var a=Object.keys(t),n=a.length;n--;)e[a[n]]=t[a[n]];return e}}).call(this,a("DuR2"),a("W2nU"))},TLE5:function(e,t,a){},fC4T:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},tnFR:function(e,t,a){"use strict";(function(e){var n=d(a("Zx67")),o=d(a("kiBT")),l=d(a("OvRC")),s=d(a("C4MV")),i=d(a("Zzip")),r=d(a("pFYg")),c=d(a("5QVw")),u=d(a("woOf"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ManageGoods=void 0;var f,p=u.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h="function"==typeof c.default&&"symbol"===(0,r.default)(i.default)?function(e){return void 0===e?"undefined":(0,r.default)(e)}:function(e){return e&&"function"==typeof c.default&&e.constructor===c.default&&e!==c.default.prototype?"symbol":void 0===e?"undefined":(0,r.default)(e)},g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.goodCollectionState=K,t.goodCollectionDispatch=$;var m=a("U7vG"),v=O(m),y=(O(a("O27J")),a("4n+p")),C=a("Zfgq"),E=T(a("P9l9")),_=(T(a("8obM")),a("d2xe")),k=a("f2Hk"),S=a("zpSi"),w=a("fw66"),b=O(a("BYKG"));a("HRAo");var N=O(a("6YRh")),D=a("f2t5"),A=a("qeJi"),M=O(a("4GUf")),L=a("JO/b");function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,r.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}var F=(0,k.concatPageAndType)("goodCollection"),H=E,G={searchKey:"key",category_id:"category_id",page:"page",condition:"condition"},I=function(t){function a(e,t){U(this,a);var o=j(this,(a.__proto__||(0,n.default)(a)).call(this,e));return document.title="我的收藏",o.state={topButtonState:!1},o}return x(a,m.Component),g(a,[{key:"componentWillMount",value:function(){if(this.props.setFilterUpdate(!1),"item"!=this.props.from){var e=this.props.location.query,t=e.key,a=e.category_id,n={searchKey:t=void 0!==t?decodeURIComponent(t):"",category_id:void 0!==a?Number(a):"",condition:"",page:1};this.props.dispatch(F("setSearch",{searchData:n}))}else this.props.setFrom("")}},{key:"componentWillReceiveProps",value:function(e){if(e.goodListUpdate||this.props.searchData!==e.searchData){var t=(0,u.default)({},e.searchData,{searchKey:e.searchData.searchKey}),a=e.init;this.props.filterUpdate;this.changeUrl(e.searchData),this.props.setData(t,a,!0),this.props.setGoodListUpdate(!1),this.props.dispatch(F("noSave",{noSave:!1})),this.props.dispatch(F("defaultNoSave",{defaultNoSave:!1}))}}},{key:"componentDidMount",value:function(){var t=this,a=Math.max(this.props.windowHeight,e(window).height());e(window).scroll(function(){var n=e(window).scrollTop();t.state.topButtonState!==n>a&&t.setState({topButtonState:n>a})}),this.props.windowHeight<e(window).height()&&this.props.setWindowHeight(e(window).height())}},{key:"componentDidUpdate",value:function(){N.default.init({offset:e(window).height(),throttle:1e3})}},{key:"componentWillUnmount",value:function(){this.props.setFilterUpdate(!0),e("body").css({overflowY:"",position:"static"}),e(window).unbind("scroll")}},{key:"changeUrl",value:function(e){var t="",a=location.href.split("?")[0];for(var n in e)e.hasOwnProperty(n)&&e[n]&&(t+="&"+G[n]+"="+("service"==n?this.formatSearchData(e[n]):e[n]));history.replaceState({},null,a+"?"+t.substr(1))}},{key:"formatSearchData",value:function(e){var t="",a={};if("object"==(void 0===e?"undefined":h(e))){for(var n in e)e.hasOwnProperty(n)&&(t+=e[n]?n+",":"");return t.substr(0,t.length-1)}if("string"==typeof e){for(var o=e.split(","),l=0;l<o.length;l++)a[o[l]]=1;return a}}},{key:"dropDown",value:function(e){var t=this.props,a=t.searchData,n=t.dispatch,o=t.currentPage,l=t.totalPage,s=t.load,i=t.goodsList;if(!s||!i||o>=l)return e.lock(),e.noData(),void e.resetload();(a=b.default.fromJS(a).toJS()).page=o+1,H.collection(a).then(function(t){if(0!=t.data.code)return e.lock(),e.noData(),void e.resetload();n(F("concatData",{result:t.data})),n(F("setCurrentPage",{current:o+1})),e.resetload();var a=t.data.data.page;a.current_page>=a.total_page&&(e.lock(),e.noData(),e.resetload())}).catch(function(t){console.error(t),e.resetload()})}},{key:"render",value:function(){var e=this.props,t=e.errorState,a=e.load,n=e.init,o=e.defaultNoSave,l=e.noSave,s=(e.categoriesList,e.goodsList),i=e.setFrom,r=e.setNav,c=e.nav,u=e.manage,d=e.DisGoods,f=e.toggleManage,p=e.changeChooseAll,h=e.ifChooseAll,g=e.delCount,m=e.toggleshady,y=e.shady,C=e.toggledelCount,E=(e.searchData,e.setGoodListUpdate);return n?"collection"==c?v.default.createElement("div",{id:"goodCollection","data-page":"good-collection-page",style:{minHeight:this.props.windowHeight}},v.default.createElement(P,{setNav:r,nav:c}),v.default.createElement(z,this.props),t?v.default.createElement(_.NetError,null):a?l?v.default.createElement("div",null,o?v.default.createElement(_.EmptyPage,{config:{msg:"暂无收藏任何商品~",btnText:"去商城逛逛",link:"/homeIndex",bgImgUrl:"/src/img/collect/trcNOcollection.png"}}):v.default.createElement(_.FilterNone,null)):v.default.createElement("div",{className:"goodWrap"},v.default.createElement(Q,{goodsList:s,setFrom:i,scrollArea:window,dropDown:this.dropDown.bind(this),manage:u,changeChooseAll:p,ifChooseAll:h}),v.default.createElement(Y,{manage:u,toggleManage:f,DisGoods:d,ifChooseAll:h,changeChooseAll:p,delCount:g,shady:y,toggleshady:m,toggledelCount:C,setGoodListUpdate:E})):v.default.createElement(_.LoadingRound,null),v.default.createElement(q,{topButtonState:this.state.topButtonState})):v.default.createElement("div",null,v.default.createElement("div",{id:"goodCollection","data-page":"good-collection-page",style:{minHeight:this.props.windowHeight}},v.default.createElement(P,{setNav:r,nav:c}),v.default.createElement(L.ShopCollection,null))):v.default.createElement(_.LoadingRound,null)}}]),a}(),P=function(e){function t(){return U(this,t),j(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return x(t,m.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.setNav,a=e.nav;return v.default.createElement("div",{className:"leaderNav"},v.default.createElement("ul",null,v.default.createElement("li",{className:"collection"==a?"activeNav":"",onClick:t.bind(this,"collection")},v.default.createElement("span",null,"商品收藏")),v.default.createElement("li",{className:"store"==a?"activeNav":"",onClick:t.bind(this,"store")},v.default.createElement("span",null,"店铺关注"))))}}]),t}(),z=function(e){function t(){return U(this,t),j(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return x(t,m.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.setSearch,a=e.setData,n=e.toggleQuickSelect,o=e.searchData,l=e.categoriesList,s=e.errorState,i=e.isQuickSelect,r=e.toggleManage,c=e.changeChooseAll,u=e.defaultNoSave,d=!s&&l&&l.length&&!u;return v.default.createElement("div",{className:"filter-condition",ref:"filterCondition"},d?v.default.createElement(R,{setSearch:t,setData:a,toggleQuickSelect:n,searchData:o,categoriesList:l,isQuickSelect:i,toggleManage:r,changeChooseAll:c}):"")}}]),t}(),R=function(t){function a(e){U(this,a);var t=j(this,(a.__proto__||(0,n.default)(a)).call(this,e));return t.state={},t.quickFilter=[{name:"默认",type:"",style:"click"},{name:"促销",type:"promotion",style:"click"},{name:"有货",type:"available",style:"click"},{name:"分类",type:"category_id",style:"select"}],t}return x(a,m.Component),g(a,[{key:"stopSelect",value:function(){this.props.toggleQuickSelect(!1)}},{key:"filterClick",value:function(e,t){if("click"==t)this.props.toggleQuickSelect(!1),this.props.setSearch({condition:e});else if("select"==t){var a=this.props.isQuickSelect;this.state.type==e?this.props.toggleQuickSelect(!a):(this.setState({type:e}),this.props.toggleQuickSelect(!0))}}},{key:"isActive",value:function(e,t){var a=!1;return"click"==t?a=this.props.searchData.condition==e:"select"==t&&(a=this.props.searchData[e]),!!a}},{key:"isSelect",value:function(e,t){var a=!1;return"select"==t&&e==this.state.type&&this.props.isQuickSelect&&(a=!0),a}},{key:"showChooseItem",value:function(e){var t=this.props,a=t.searchData,n=t.categoriesList,o=a[e].toString().split(","),l=[];if("category_id"!=e)return console.log("error"),0;for(var s=0;s<n.length;s++){var i=this.getNameById(n[s],o,e);i&&l.push(i)}return l.join(",")}},{key:"getNameById",value:function(e,t,a){for(var n=0;n<t.length;n++){if("category_id"!=a)return console.log("error"),"";if(t[n]==e.category_id)return e.category_name}}},{key:"getQuickFilter",value:function(){var e=this;return this.quickFilter.map(function(t,a){var n=e.isActive(t.type,t.style),o=e.isSelect(t.type,t.style);return v.default.createElement("li",{key:a,className:o?"select":n?"click"==t.style?"active":"select-active":"",onClick:function(a){e.filterClick(t.type,t.style),e.props.changeChooseAll(!1),e.props.toggleManage(!1)}},v.default.createElement("div",null,v.default.createElement("span",null,"select"==t.style&&!o&&n?e.showChooseItem(t.type):t.name),"select"!=t.style||!o&&(o||n)?"":v.default.createElement("i",{className:o?"arrow-top-black-icon":"arrow-btm-black-icon"})))})}},{key:"preventScroll",value:function(t){t?e("body").css({overflowY:"hidden",position:"fixed"}):e("body").css({overflowY:"",position:"static"})}},{key:"render",value:function(){var e=this.props.isQuickSelect,t=this.props,a=t.categoriesList,n=t.searchData,o=t.setSearch,l=t.toggleQuickSelect;return this.preventScroll(e),v.default.createElement("div",{className:"quick-filter"},v.default.createElement("ul",{className:"filter-list"},this.getQuickFilter()),e?v.default.createElement(B,{setSearch:o,categoriesList:a,type:this.state.type,searchData:n,stopSelect:this.stopSelect.bind(this)}):"",e?v.default.createElement(_.Shady,{options:{zIndex:-1},clickHandle:function(){l(!1)}}):"")}}]),a}(),B=function(e){function t(e){U(this,t);var a=j(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={list:{}},a}return x(t,m.Component),g(t,[{key:"componentWillMount",value:function(){this.initSelect(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){this.props.type!=e.type&&this.initSelect(e.type)}},{key:"componentWillUnmount",value:function(){this.props.stopSelect()}},{key:"selectFilter",value:function(e){var t=this.state.list;(t=t[e]?t:{})[e]=!t[e],this.setState({list:t},function(){this.ensureSelect()})}},{key:"initSelect",value:function(e){var t={},a=[];for(var n in"category_id"==e&&this.props.searchData.category_id&&(a=this.props.searchData.category_id.toString().split(",")),a)a.hasOwnProperty(n)&&(t[a[n]]=!0);this.setState({list:t})}},{key:"resetSelect",value:function(){this.setState({list:{}})}},{key:"ensureSelect",value:function(){var e,t,a,n,o=this.state.list,l=this.props,i=l.setSearch,r=l.type,c=[];for(var u in o)o.hasOwnProperty(u)&&o[u]&&c.push(u);e=c.join(","),i((n=e,(a=r)in(t={})?(0,s.default)(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t)),this.props.stopSelect()}},{key:"getFilterList",value:function(){var e=this.props,t=e.categoriesList,a=this,n="";return"category_id"==e.type&&(n=t.map(function(e,t){return v.default.createElement("li",{key:t,onClick:a.selectFilter.bind(a,e.category_id,e.category_name)},v.default.createElement("div",{className:a.state.list[e.category_id]?"choose":""},e.category_name))})),n}},{key:"render",value:function(){return v.default.createElement("div",{className:"quick-filter-select"},v.default.createElement("ul",{className:"select-list"},this.getFilterList()))}}]),t}(),Q=(0,S.DropDownLoad)(f=function(t){function a(){return U(this,a),j(this,(a.__proto__||(0,n.default)(a)).apply(this,arguments))}return x(a,m.Component),g(a,[{key:"setMinListHeight",value:function(){document.getElementsByClassName("goods-list")[0].style.minHeight=e(window).height()-85+"px",document.getElementsByClassName("goods-list")[0].minHeight=e(window).height()-85+"px"}},{key:"componentDidMount",value:function(){this.setMinListHeight()}},{key:"render",value:function(){var e=this.props,t=e.goodsList,a=e.setFrom,n=e.manage,o=e.changeChooseAll,l=e.ifChooseAll;return v.default.createElement("div",{className:"goods-list style2"},t.map(function(e,t){return v.default.createElement(W,{key:t,data:e,index:t,setFrom:a,manage:n,changeChooseAll:o,ifChooseAll:l})}))}}]),a}())||f,W=function(t){function a(t){U(this,a);var o=j(this,(a.__proto__||(0,n.default)(a)).call(this,t));return o.changeChoose=function(t){var a=o.props.changeChooseAll,n=e(t.target),l=n.siblings(".shadyUnselect");l.hasClass("del-choose")?(l.removeClass("del-choose"),n.removeClass("del-shady")):(l.addClass("del-choose"),n.addClass("del-shady")),a(e(".good-item").length===e(".del-choose").length)},o.tradeTypeObj={Domestic:{name:"国内贸易",style:"hide-tag"},Overseas:{name:"海外直邮",style:"yellow-tag"},Bonded:{name:"跨境保税",style:"blue-tag"},Direct:{name:"海外直邮",style:"yellow-tag"}},o}return x(a,m.Component),g(a,[{key:"componentDidMount",value:function(){var t=this.props,a=t.manage,n=t.ifChooseAll;a&&n?(e(".shadyUnselect").addClass("del-choose"),e(".manageShady").addClass("del-shady")):(e(".shadyUnselect").removeClass("del-choose"),e(".manageShady").removeClass("del-shady"))}},{key:"showPromotionDetail",value:function(e){return e.map(function(e,t){return v.default.createElement("span",{className:"promotion-tag",key:t},e)})}},{key:"showCountDetail",value:function(e){return v.default.createElement("span",{className:"tips"},"仅剩",e,"件")}},{key:"showPriceDetail",value:function(e){return v.default.createElement("span",{className:"tips"},"比收藏时降价￥",(0,A.trimZero)(e))}},{key:"showTopTagsByLevel",value:function(e){var t="";return(t=e?e.is_new_group?"新人团":e.is_hot?"热销":e.is_new?"新品":"":"")?v.default.createElement("span",{className:"new-hot-tag"},t):""}},{key:"render",value:function(){var e=this.props.data,t=e.item_id,a=e.primary_image,n=e.title,o=e.sell_price,l=(e.old_price,e.item_tag),s=e.trade_type,i=e.promotion_detail,r=e.status,c=e.store,u=e.price_diff,d=e.deleted_at,f=30===r&&c.real>0,p=c.real,h=10==s?"Domestic":20==s?"Overseas":30==s?"Bonded":40==s?"Direct":"",g=i.promotion_tags?i.promotion_tags:"",m=i.promotion_price?i.promotion_price:o,y=this.props.manage;return v.default.createElement("div",{className:"good-item",onClick:this.props.setFrom.bind(this,"item"),id:t},v.default.createElement(C.Link,{to:"/item?item_id="+t},v.default.createElement("div",{className:"good-image"},v.default.createElement("img",{className:"primary-image","data-echo":a?a+"_m.jpg":"/src/img/search/no-goods-image.png",src:"/src/img/icon/loading/default-watermark.png"}),f&&!d?"":v.default.createElement("img",{className:"no-goods-count-image",src:"/src/img/search/no-goods-count.png"}),f&&!d&&u>0?u>0?this.showPriceDetail(u):"":f&&!d&&p<=5?this.showCountDetail(p):""),v.default.createElement("div",{className:"good-content"},v.default.createElement("div",{className:"good-title"},n),v.default.createElement("div",{className:"good-price"},v.default.createElement("span",{className:"sell-price"},v.default.createElement("span",{className:"money-icon"},"￥"),(0,A.trimZero)(m))),v.default.createElement("div",{className:"good-bottom-tag"},h?v.default.createElement("span",{className:"trade-tag "+this.tradeTypeObj[h].style},this.tradeTypeObj[h].name):"",f&&!d&&g&&g.length?this.showPromotionDetail(g):"")),l&&v.default.createElement("div",{className:"good-top-tag"},v.default.createElement("img",{src:l.images.mb_square_img}))),y&&v.default.createElement("div",{className:"shadyUnselect"}),y&&v.default.createElement("div",{className:"manageShady",onClick:this.changeChoose}))}}]),a}(),q=function(e){function t(){return U(this,t),j(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return x(t,m.Component),g(t,[{key:"render",value:function(){return v.default.createElement("div",{className:"control-button"},v.default.createElement(J,null),this.props.topButtonState?v.default.createElement(Z,null):"")}}]),t}(),J=function(e){function t(){return U(this,t),j(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return x(t,m.Component),g(t,[{key:"render",value:function(){return v.default.createElement("div",{className:"jump-search-button"},v.default.createElement("a",{href:"/goodCollectionSearch"},v.default.createElement("i",{className:"jump-search-icon"})))}}]),t}(),Z=function(e){function t(){return U(this,t),j(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return x(t,m.Component),g(t,[{key:"jumpToTop",value:function(){(0,D.scrollTo)(0,50)}},{key:"render",value:function(){return v.default.createElement("div",{className:"jump-top-button",onClick:this.jumpToTop.bind(this)},v.default.createElement("i",{className:"jump-top-icon"}))}}]),t}(),Y=t.ManageGoods=function(t){function a(){var t,o,l;U(this,a);for(var s=arguments.length,i=Array(s),r=0;r<s;r++)i[r]=arguments[r];return o=l=j(this,(t=a.__proto__||(0,n.default)(a)).call.apply(t,[this].concat(i))),l.selectAll=function(){var t=l.props,a=t.manage,n=t.changeChooseAll,o=!t.ifChooseAll;n(o),e(".shadyUnselect").addClass("del-choose"),a&&o?(e(".shadyUnselect").addClass("del-choose"),e(".manageShady").addClass("del-shady")):(e(".shadyUnselect").removeClass("del-choose"),e(".manageShady").removeClass("del-shady"))},l.del=function(){var t=l.props,a=(t.delCount,t.toggleManage,t.toggleshady),n=t.toggledelCount,o=e(".del-choose");o.length?(a(!0),n(o.length)):M.default.MsgTip({msg:"请先选择商品"})},l.changeList=function(){var t=l.props,a=t.toggleshady,n=t.toggleManage,o=t.setGoodListUpdate,s=e(".good-item");if(e(s).length){for(var i=[],r=e(".del-choose").parents(".good-item"),c=r.length,u=0;u<c;u++)i.push(r.eq(u).attr("id"));var d={};d.item_id=i.join(","),H.del(d).then(function(t){t.data;e(".del-choose").removeClass("del-choose"),a(!1),n(!1),o(!0)})}},j(l,o)}return x(a,m.Component),g(a,[{key:"render",value:function(){var t=this.props,a=t.manage,n=t.DisGoods,o=t.toggleManage,l=t.changeChooseAll,s=t.ifChooseAll,i=t.delCount,r=t.shady,c=t.toggleshady,u=this;return v.default.createElement("div",{className:"manageGoods"},a?v.default.createElement("div",{className:"endManage"},s?v.default.createElement("img",{src:"src/img/collect/trcChoose.png",className:"unselect"}):v.default.createElement("img",{src:"src/img/collect/trcNOchoose.png",className:"unselect"}),v.default.createElement("span",{className:"selectAll",onClick:this.selectAll},"全选"),n&&v.default.createElement(C.Link,{className:"checkDisabled",to:"/goodOverdue"},"查看失效商品"),v.default.createElement("span",{className:"cancel",onClick:this.del},"取消收藏"),v.default.createElement("span",{className:"done",onClick:function(e){o(!1),l(!1)}},"完成")):v.default.createElement("div",{className:"startManage",onClick:o.bind(this,!0)},"管理"),v.default.createElement(w.ModalBComp,{active:r,title:"",msg:"确定取消 "+i+" 个收藏商品吗？",btns:[{text:"取消",cb:function(){c(!1),e(".goodWrap").css({overflow:"",position:"static"})}},{text:"确定",cb:function(){u.changeList(),e(".goodWrap").css({overflow:"",position:"static"})}}]}))}}]),a}();function K(e){return p({},e.goodCollection)}function $(e){return{dispatch:e,setFrom:function(t){e(F("setFrom",{from:t}))},setNav:function(t){e(F("setNav",{nav:t}))},setFilterUpdate:function(t){e(F("setFilterUpdate",{filterUpdate:t}))},setGoodListUpdate:function(t){e(F("setGoodListUpdate",{goodListUpdate:t}))},setWindowHeight:function(t){e(F("windowHeight",{windowHeight:t}))},setSearch:function(t){e(F("setSearch",{searchData:t}))},setData:function(t,a,n){e(F("isLoad",{load:!1})),H.collection(t).then(function(o){if(0!==o.data.code)return e(F("setInit",{init:!0})),void e(F("isError",{errorState:!0}));e(F("isError",{errorState:!1})),a||(e(F("setInitItem",{result:o.data})),e(F("setInit",{init:!0}))),""==t.condition&&""==t.category_id&&0==o.data.data.item_list.length&&e(F("defaultNoSave",{defaultNoSave:!0})),""!=t.category_id&&0==o.data.data.item_list.length&&(e(F("noSave",{noSave:!0})),e(F("setData",{result:o.data,filterUpdate:!1}))),0!=o.data.data.item_list.length?(e(F("setCurrentPage",{current:o.data.data.page?o.data.data.page.current_page:1})),e(F("setTotalPage",{total:o.data.data.page?o.data.data.page.total_page:1})),e(F("setData",{result:o.data,filterUpdate:n}))):e(F("noSave",{noSave:!0})),e(F("isLoad",{load:!0}))}).catch(function(t){e(F("setInit",{init:!0})),e(F("isError",{errorState:!0})),M.default.MsgTip({msg:t.message||t.response.data.message||"服务器繁忙"})})},toggleQuickSelect:function(t){e(F("toggleQuickSelect",{isQuickSelect:t}))},toggleManage:function(t){e(F("toggleManage",{manage:t}))},changeChooseAll:function(t){e(F("changeChooseAll",{ifchooseAll:t}))},toggledelCount:function(t){e(F("delCount",{delCount:t}))},toggleshady:function(t){e(F("shady",{shady:t}))}}}t.default=(0,y.connect)(K,$)(I)}).call(this,a("OOjC"))}}]);
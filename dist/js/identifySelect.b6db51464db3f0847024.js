(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{EJOM:function(t,e,n){"use strict";(function(t){var a=u(n("Zx67")),r=u(n("kiBT")),o=u(n("OvRC")),i=u(n("pFYg")),s=u(n("C4MV")),l=u(n("woOf"));function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var c=l.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,s.default)(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),p=n("U7vG"),d=_(p),m=n("Zfgq"),h=n("4n+p"),g=n("d2xe"),y=n("fw66"),v=n("f2Hk"),w=_(n("mtWM"));function _(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,i.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}n("a6qr");var k=(0,v.concatPageAndType)("identifySelect"),P=(0,v.actionAxios)("identifySelect"),N=(0,v.concatPageAndType)("orderConfirm"),D=(0,v.concatPageAndType)("popup"),M={init:{url:"/wxapi/IDCardList.api",method:"get"},goCertify:{url:"/wxapi/certify.api",method:"get"}},O=function(e){function n(){return E(this,n),C(this,(n.__proto__||(0,a.default)(n)).apply(this,arguments))}return b(n,p.Component),f(n,[{key:"componentWillMount",value:function(){this.props.initialPage()}},{key:"componentDidMount",value:function(){this.props.getData()}},{key:"render",value:function(){return this.props.load?d.default.createElement(g.LoadingRound,null):d.default.createElement("div",{"data-page":"identify-select",style:{minHeight:t(window).height()}},d.default.createElement("div",{className:"colour-strip"}),d.default.createElement(S,{data:this.props.data,status:this.props.selectStatus,getData:this.props.getData,goCertify:this.props.goCertify}),d.default.createElement(m.Link,{className:"manage-btn",to:"/goodsReceiveInfo/identityManage"},"管理身份证"),d.default.createElement(y.PopupTip,{active:this.props.prompt.show,msg:this.props.prompt.msg,onClose:this.props.promptClose}))}}]),n}(),S=function(t){function e(){return E(this,e),C(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return b(e,p.Component),f(e,[{key:"getHtml",value:function(){var t=this;return this.props.data.map(function(e,n){return d.default.createElement("div",{className:"one-list-grid",key:n},d.default.createElement(x,{data:e,status:t.props.status,getData:t.props.getData,goCertify:t.props.goCertify}))})}},{key:"render",value:function(){return d.default.createElement("div",{className:"identify-list"},this.getHtml())}}]),e}(),T=function(t){function e(){return E(this,e),C(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return b(e,p.Component),f(e,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.status,a=this;return d.default.createElement("div",{className:"one-list"},d.default.createElement("div",{className:"list-info"},d.default.createElement("div",{className:"text",onClick:this.props.listSelect},d.default.createElement("div",{className:"top"},e.name,e.is_certify?d.default.createElement("img",{src:"/src/img/addressAndIdentityInfo/is_certify.png",className:"is-certify"}):d.default.createElement("span",{className:"no-certify",onClick:function(t){t.stopPropagation(),a.props.goCertify(e.card_id,a.props)}},"去认证")),d.default.createElement("div",{className:"main"},d.default.createElement("span",null,"身份证号"),e.idnumber)),d.default.createElement(m.Link,{className:"edit",to:"/goodsReceiveInfo/identityManage?id="+e.card_id+"&is_certify="+e.is_certify},d.default.createElement("i",{className:"edit-icon"}," "))),d.default.createElement("div",{className:"list-status "+(e.hasPhoto?"success":n?"error":"warn")},d.default.createElement("i",null," "),e.hasPhoto?"已上传身份证照片":n?"您购买的是海淘商品，请上传身份证照片":"未上传身份证照片"))}}]),e}();var x=(0,h.connect)(null,function(t,e){return{listSelect:function(){e.data.is_certify?!e.status||e.data.hasPhoto?(t(N("selectIdentify",{data:e.data})),setTimeout(function(){m.browserHistory.goBack()},500)):t(D("ctrlPrompt",{prompt:{show:!0,msg:"您购买的是海淘商品，请上传身份证照片"}})):t(D("ctrlPrompt",{prompt:{show:!0,msg:"身份信息未认证，请修改后选择"}}))}}})(T);e.default=(0,h.connect)(function(t,e){return c({},t.popup,t.identifySelect,{confirmLoad:t.orderConfirm.load})},function(t,e){var n=Number(e.location.query.status);return{dispatch:t,getData:function(e){e||t(k("resetState")),t(P("initialData",M.init,{status:n}))},promptClose:function(){t(D("ctrlPrompt",{prompt:{show:!1,msg:""}}))},goCertify:function(e,n){w.default.request(c({},M.goCertify,{params:{card_id:e}})).then(function(e){t(D("ctrlPrompt",{prompt:{show:!0,msg:e.data.msg}})),e.data.status&&n.getData(!0)}).catch(function(e){t(D("ctrlPrompt",{prompt:{show:!0,msg:result.data.msg}}))})}}},function(t,e,n){var a=e.dispatch;return c({},t,e,n,{initialPage:function(){t.confirmLoad?m.browserHistory.goBack():a(N("setOrigin",{origin:"id"}))}})})(O)}).call(this,n("OOjC"))},a6qr:function(t,e,n){}}]);
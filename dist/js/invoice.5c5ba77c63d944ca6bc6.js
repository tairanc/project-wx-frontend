(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{FQO4:function(e,t,a){},e2ZG:function(e,t,a){"use strict";(function(e){var n=m(a("mvHQ")),r=m(a("Zx67")),i=m(a("kiBT")),o=m(a("OvRC")),l=m(a("C4MV")),c=m(a("Zzip")),u=m(a("pFYg")),s=m(a("5QVw")),d=m(a("woOf"));function m(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var p,f,v=d.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h="function"==typeof s.default&&"symbol"===(0,u.default)(c.default)?function(e){return void 0===e?"undefined":(0,u.default)(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":(0,u.default)(e)},g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,l.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=a("U7vG"),_=S(y),E=a("d2xe"),k=a("4n+p"),b=a("Zfgq"),N=a("f2Hk"),C=a("fw66"),x=S(a("lEnC")),D=S(a("qAHI")),w=a("5qLU");a("FQO4");var I=a("6quk");function S(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,u.default)(t))&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}var O=(0,N.concatPageAndType)("invoiceSelect"),P=(0,N.concatPageAndType)("orderConfirm"),A=((0,N.actionAxios)("invoiceSelect"),(0,N.actionAxiosAll)("invoiceSelect"),{common:"NORMAL",tax:"VAT",electron:"ELEC"}),H={common:1,tax:2,electron:3},V={initPage:{url:w.WXAPI+"/user/getUserInvoice",method:"get"},invoiceSave:{url:w.WXAPI+"/user/saveUserInvoice",method:"post"}},L=function(e){function t(e,a){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return F(t,y.Component),g(t,[{key:"componentWillMount",value:function(){this.props.confirmLoad?b.browserHistory.goBack():(this.props.dispatch(P("setOrigin",{origin:"invoice"})),"address"!==this.props.origin?this.props.initialPage():this.props.setOrigin(O("setOrigin",{origin:""})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.winHeight,n=t.invoiceSelData,r=t.invoiceType,i=t.commonInvoice,o=t.commonInvoice_1,l=t.commonInvoice_2,c=t.electronInvoice,u=t.electronInvoice_1,s=t.electronInvoice_2,d=t.taxInvoice,m=t.taxInvoice_1,p=t.taxInvoice_2,f=t.invoiceContent,v=t.showModal,h=t.invoiceNote,g=t.userForm,y=t.addressForinvoice,k=this.props,b=k.changeType,N=k.changeStatus,D=k.modalSelect,w=k.modalCtrl,I=k.changeForm,S=k.selectAddress,T=i.postData.action,q="";if(g&&g.length>0)switch(r){case"common":T=i.postData.action,g.some(function(e){if(1===e.type&&e.action==T)return q=e.invoice_id,!0});break;case"electron":T=c.postData.action,g.some(function(e){if(3===e.type&&e.action==T)return q=e.invoice_id,!0});break;case"tax":T=d.postData.action,g.some(function(e){if(2===e.type&&e.action==T)return q=e.invoice_id,!0});break;default:q=""}return _.default.createElement("div",{"data-page":"invoice-select",style:{background:"#f4f4f4",minHeight:a}},this.props.load?_.default.createElement(E.LoadingRound,null):_.default.createElement("form",{id:"invoiceForm"},this.props.update&&_.default.createElement(x.default,null),_.default.createElement("div",{className:"invoice-note",onClick:function(t){return e.props.popupNote(!0)}}),h&&_.default.createElement(X,{onClose:function(t){return e.props.popupNote(!1)}}),!!q&&_.default.createElement("input",{type:"hidden",name:"id",value:q}),_.default.createElement(M,{data:n,type:r,changeType:b,name:"type"}),"common"===r&&_.default.createElement(j,{data:i,commonInvoiceOne:o,commonInvoiceTwo:l,changeStatus:N.bind(null,"commonInvoice"),modalCtrl:w,modalSelect:D.bind(null,r+"Invoice"),contentList:f,showModal:v,changeForm:I.bind(null,"commonInvoice")}),"electron"===r&&_.default.createElement(U,{data:c,electronInvoiceOne:u,electronInvoiceTwo:s,changeStatus:N.bind(null,"electronInvoice"),modalCtrl:w,modalSelect:D.bind(null,r+"Invoice"),contentList:f,showModal:v,changeForm:I.bind(null,"electronInvoice")}),"tax"===r&&_.default.createElement(Z,{data:d,taxInvoiceOne:m,taxInvoiceTwo:p,changeForm:I.bind(null,"taxInvoice"),setOrigin:this.props.setOrigin,selectAddress:S,addressForinvoice:y}),_.default.createElement($,{formSubmit:this.props.formSubmit})),_.default.createElement(C.PopupTip,{active:this.props.prompt.show,msg:this.props.prompt.msg,onClose:this.props.promptClose}))}}]),t}(),M=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"getHtml",value:function(){var e=this,t=this.props,a=t.data,n=t.type;return a.map(function(t,a){return _.default.createElement("span",{onClick:t.able&&e.props.changeType.bind(e,t.type),className:"type-li "+(n===t.type?"active":"")+" "+(t.able?"":"disabled"),key:a},t.text)})}},{key:"getText",value:function(){var e=this.props,t=(e.data,e.type);return"electron"===t?_.default.createElement("div",{className:"bottom"},"电子发票与纸制发票具备同等法律效力，可支持报销入账。"):"tax"===t?_.default.createElement("div",{className:"bottom"},"※ 增值税发票在订单完成后开票。"):void 0}},{key:"render",value:function(){return _.default.createElement("div",{className:"invoice-type"},_.default.createElement("div",{className:"title"},"发票类型"),_.default.createElement("input",{type:"hidden",name:this.props.name,value:H[this.props.type]}),_.default.createElement("div",{className:"body"},this.getHtml()),this.getText())}}]),t}(),j=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.changeStatus,n=e.modalSelect,r=e.modalCtrl,i=e.contentList,o=e.showModal,l=e.changeForm,c=e.commonInvoiceOne,u=e.commonInvoiceTwo,s=1===t.postData.action?c.postData:u.postData;return _.default.createElement("div",{className:"common-invoice"},_.default.createElement(z,{serverData:s,postData:t.postData,inputHolder:"请输入发票抬头",headName:"action",contentName:"title",changeForm:l}),_.default.createElement(B,null),_.default.createElement(R,{modalSelect:n,modalCtrl:r,postData:t.postData,name:"content_option"}),_.default.createElement(Y,{modalSelect:n,list:i,selectId:t.postData.invoice_content,modalCtrl:r,show:o}),2===t.postData.action&&_.default.createElement(W,{serverData:s,data:t.postData,status:t.status,changeStatus:a,changeForm:l}))}}]),t}(),U=function(e){function t(){var e,a,n;T(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=q(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.hasProperty=function(e){var t=n.props,a=t.data,r=t.electronInvoiceOne,i=t.electronInvoiceTwo,o=(t.changeForm,a.postData),l=1===o.action?r.postData:i.postData;return o[e]?o[e]:l[e]},q(n,a)}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.changeStatus,n=e.modalSelect,r=e.modalCtrl,i=e.contentList,o=e.showModal,l=e.changeForm,c=e.electronInvoiceOne,u=e.electronInvoiceTwo,s=1===t.postData.action?c.postData:u.postData,d=this.hasProperty;return _.default.createElement("div",{className:"electron-invoice"},_.default.createElement("input",{type:"hidden",name:"user_id",value:t.postData.user_id}),_.default.createElement(z,{serverData:s,postData:t.postData,inputHolder:"请输入发票抬头",headName:"action",contentName:"title",changeForm:l}),_.default.createElement(B,null),_.default.createElement(R,{modalSelect:n,modalCtrl:r,postData:t.postData,name:"content_option"}),_.default.createElement(Y,{modalSelect:n,list:i,selectId:t.postData.invoice_content,modalCtrl:r,show:o}),_.default.createElement("div",{className:"receiver-email"},_.default.createElement(Q,{text:"*收票人邮箱",textHolder:"用于接收电子发票",name:"receiver_email",inputValue:d("receiver_email"),inputChange:l.bind(this,"receiver_email"),action:t.postData.action})),2===t.postData.action&&_.default.createElement(W,{serverData:s,data:t.postData,status:t.status,changeStatus:a,changeForm:l}))}}]),t}(),Z=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.selectAddress,n=e.setOrigin,r=e.taxInvoiceOne,i=e.taxInvoiceTwo,o=e.addressForinvoice,l=1===t.postData.action?r.postData:i.postData;return _.default.createElement("div",{className:"tax-invoice"},_.default.createElement("input",{type:"hidden",name:"user_id",value:t.postData.user_id}),_.default.createElement("input",{type:"hidden",name:"action",value:"2"}),_.default.createElement(R,{edit:!1,contentText:t.contentText,postData:t.postData,name:"content_option"}),_.default.createElement(G,{changeForm:this.props.changeForm,data:t.postData,serverData:l}),_.default.createElement(J,{data:t.postData,setOrigin:n,selectAddress:a,addressForinvoice:o}))}}]),t}(),z=function(e){function t(e){T(this,t);var a=q(this,(t.__proto__||(0,r.default)(t)).call(this,e));a.closeChange=function(e){a.setState({showClose:e})},a.inputValueChange=function(e,t,n){a.setState({inputValue:e}),t&&a.props.changeForm("title",e.trim()),n&&a.closeChange(!1)};var n=e.postData.title||(void 0===e.postData.title?e.serverData.title:e.postData.title);return a.state={inputValue:void 0!==n?n:"",showClose:!1},a}return F(t,y.Component),g(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.postData.title||(void 0===e.postData.title?e.serverData.title:e.postData.title);this.setState({inputValue:void 0!==t?t:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.changeForm,n=t.postData,r=t.headName,i=t.contentName;return _.default.createElement("div",{className:"invoice-header"},_.default.createElement("div",{className:"title"},"*发票抬头"),_.default.createElement("input",{type:"hidden",name:r,value:n.action}),_.default.createElement("div",{className:"check-grid"},_.default.createElement("div",{className:"check-box",onClick:function(e){return a("action",1)}},_.default.createElement("span",{className:"check-icon "+(1===n.action?"check":"")}," ")," 个人"),_.default.createElement("div",{className:"check-box",onClick:function(e){return a("action",2)}},_.default.createElement("span",{className:"check-icon "+(2===n.action?"check":"")}," ")," 单位")),_.default.createElement("label",{className:"input"},_.default.createElement("input",{type:"text",name:i,placeholder:this.props.inputHolder,value:this.state.inputValue,onFocus:function(t){return e.closeChange(!0)},onChange:function(t){return e.inputValueChange(t.target.value)},maxLength:"50",onBlur:function(t){return e.inputValueChange(t.target.value,!0,!0)}}),""!==this.state.inputValue&&this.state.showClose&&_.default.createElement("i",{className:"grey-close-icon",onTouchTap:function(t){return e.inputValueChange("",!0)}}," ")))}}]),t}(),B=function(){return _.default.createElement("div",{className:"divide-line"},_.default.createElement("div",{className:"line"}))},R=(f=p=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"render",value:function(){return _.default.createElement("div",{className:"invoice-content g-row-flex"},_.default.createElement("div",{className:"left"},"*发票内容"),_.default.createElement("input",{type:"hidden",name:this.props.name,value:this.props.postData.invoice_content}),_.default.createElement("div",{className:"right g-col-1"},this.props.postData.contentText))}}]),t}(),p.defaultProps={edit:!0},f),W=function(e){function t(){var e,a,n;T(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=q(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.hasProperty=function(e){var t=n.props,a=t.data,r=t.serverData;t.changeForm;return a[e]?a[e]:r[e]},q(n,a)}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.changeStatus,n=e.changeForm,r=this.hasProperty;return _.default.createElement("div",{className:"strip-array"},_.default.createElement(Q,{text:"*纳税人识别码",textHolder:"请输入纳税人识别码",inputValue:r("taxpayer_idNumber"),name:"taxpayer_idNumber",inputChange:n.bind(this,"taxpayer_idNumber")}),_.default.createElement("div",{className:"more-info-grid "+(t.infoMore?"active":"")},_.default.createElement(B,null),_.default.createElement(Q,{text:"注册地址",textHolder:"请输入注册地址",inputValue:r("reg_address"),name:"reg_address",inputChange:n.bind(this,"reg_address"),limitNum:"100"}),_.default.createElement(B,null),_.default.createElement(Q,{text:"注册电话",textHolder:"请输注册电话",inputValue:r("reg_tel"),name:"reg_tel",inputChange:n.bind(this,"reg_tel")}),_.default.createElement(B,null),_.default.createElement(Q,{text:"开户银行",textHolder:"请输入开户银行",inputValue:r("open_bank"),name:"open_bank",inputChange:n.bind(this,"open_bank")}),_.default.createElement(B,null),_.default.createElement(Q,{text:"银行账户",textHolder:"请输入银行账户",inputValue:r("bank_account"),name:"bank_account",inputChange:n.bind(this,"bank_account")})),_.default.createElement(B,null),_.default.createElement("div",{className:"more-info-click",onClick:function(e){return a("infoMore",!t.infoMore)}},"更多单位信息 ",_.default.createElement("i",{className:"arrow-btm-icon "+(t.infoMore?"active":"")}," ")))}}]),t}(),G=function(e){function t(){var e,a,n;T(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=q(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.hasProperty=function(e){var t=n.props,a=t.data,r=t.serverData;t.changeForm;return a[e]?a[e]:r[e]},q(n,a)}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.changeForm,a=(e.data,this.hasProperty);return _.default.createElement("div",{className:"strip-array"},_.default.createElement(Q,{text:"*单位名称",textHolder:"请输入单位名称",inputValue:a("unit_name"),name:"unit_name",inputChange:t.bind(this,"unit_name")}),_.default.createElement(B,null),_.default.createElement(Q,{text:"*纳税人识别码",textHolder:"请输入纳税人识别码",inputValue:a("taxpayer_idNumber"),name:"taxpayer_idNumber",inputChange:t.bind(this,"taxpayer_idNumber"),limitNum:"20"}),_.default.createElement(B,null),_.default.createElement(Q,{text:"*注册地址",textHolder:"请输入注册地址",inputValue:a("reg_address"),name:"reg_address",inputChange:t.bind(this,"reg_address"),limitNum:"100"}),_.default.createElement(B,null),_.default.createElement(Q,{text:"*注册电话",textHolder:"请输注册电话",inputValue:a("reg_tel"),name:"reg_tel",inputChange:t.bind(this,"reg_tel"),limitNum:"20"}),_.default.createElement(B,null),_.default.createElement(Q,{text:"*开户银行",textHolder:"请输入开户银行",inputValue:a("open_bank"),name:"open_bank",inputChange:t.bind(this,"open_bank")}),_.default.createElement(B,null),_.default.createElement(Q,{text:"*银行账户",textHolder:"请输入银行账户",inputValue:a("bank_account"),name:"bank_account",inputChange:t.bind(this,"bank_account")}))}}]),t}(),Q=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.limitNum,n=e.textHolder,r=e.inputChange,i=e.inputValue,o=e.name,l=e.action;return _.default.createElement("div",{className:"one-strip g-row-flex",key:o+"_"+l},_.default.createElement("div",{className:"left"},t),_.default.createElement("div",{className:"right g-col-1"},_.default.createElement("input",{type:"text",name:o,maxLength:a||50,placeholder:n||"",onBlur:function(e){return r&&r(e.target.value)},defaultValue:i})))}}]),t}(),J=function(e){function t(){var e,a,n;T(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=q(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.toSelect=function(){n.props.setOrigin("address");var e=n.props.data,t=e.receiver_address,a=e.receiver_name,r=e.receiver_region,i=e.receiver_tel,o=2;t&&a&&r&&i&&(o=1),b.browserHistory.push("/goodsReceiveInfo/addressManage?from="+o+"&name=invoice")},q(n,a)}return F(t,y.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.addressForinvoice,r=t.receiver_address&&t.receiver_region&&t.receiver_tel&&t.receiver_name,i=t.receiver_region?JSON.parse(t.receiver_region):"",o=t.receiver_address,l=t.receiver_tel,c=t.receiver_name;return a&&(o=a.address,l=a.mobile,c=a.name,i=a.area?a.area:""),_.default.createElement("div",{className:"invoice-address"},_.default.createElement("div",{className:"top"},"*收票地址"),r?_.default.createElement("div",null,_.default.createElement("input",{type:"hidden",name:"receiver_region",value:(0,n.default)(i)}),_.default.createElement("input",{type:"hidden",name:"receiver_address",value:o}),_.default.createElement("input",{type:"hidden",name:"receiver_tel",value:l}),_.default.createElement("input",{type:"hidden",name:"receiver_name",value:c})):"",_.default.createElement(B,null),_.default.createElement("div",{onClick:this.toSelect,className:"address-select g-row-flex g-col-mid g-col-ctr"},_.default.createElement("div",{className:"left-icon"},_.default.createElement("i",{className:"location-address-icon"}," ")),r?_.default.createElement("div",{className:"content-text g-col-1"},_.default.createElement("div",{className:"text-top g-row-flex"},_.default.createElement("span",{className:"g-col-1"},"收货人：",c),_.default.createElement("span",{className:"user-phone"},l)),_.default.createElement("div",{className:"text-bottom"},"收货地址：",(i.city&&i.city.text?i.city.text:"")+"  "+(i.province&&i.province.text?i.province.text:"")+"  "+o)):_.default.createElement("div",{className:"g-col-1 c-fs15"},"请填写收货地址"),_.default.createElement("div",{className:"right-icon"},_.default.createElement("i",{className:"arrow-right-icon"}," "))))}}]),t}(),Y=function(e){function t(){var e,a,n;T(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=q(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.getList=function(){return[{text:"明细",content_id:1}].map(function(e,t){return _.default.createElement("div",{className:"select-li g-row-flex",key:t,onClick:n.props.modalSelect.bind(null,e)},_.default.createElement("div",{className:"left g-col-1"},e.text),_.default.createElement("div",{className:"right"},_.default.createElement("span",{className:"check-icon "+(n.props.selectId===e.content_id?"check":"")}," ")))})},q(n,a)}return F(t,y.Component),g(t,[{key:"render",value:function(){return _.default.createElement("div",{onClick:this.props.modalCtrl.bind(null,!1)},this.props.show&&_.default.createElement(E.Shady,null),_.default.createElement("div",{className:"modal-select "+(this.props.show?"active":""),onClick:function(e){return e.stopPropagation()}},_.default.createElement("div",{className:"title"},"发票内容"),_.default.createElement("div",{className:"select-list"},this.getList()),_.default.createElement("div",{className:"coupon-btm",onClick:this.props.modalCtrl.bind(null,!1)},_.default.createElement("div",{className:"close-btn"},"关闭"))))}}]),t}(),$=function(e){function t(){return T(this,t),q(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return F(t,y.Component),g(t,[{key:"render",value:function(){return _.default.createElement("div",{className:"submit-btn"},_.default.createElement("div",{className:"red-btn",onClick:this.props.formSubmit},"确认"))}}]),t}(),X=function(t){function a(){return T(this,a),q(this,(a.__proto__||(0,r.default)(a)).apply(this,arguments))}return F(a,y.Component),g(a,[{key:"componentDidMount",value:function(){e("html,body").css({height:"100%",overflowY:"hidden"})}},{key:"componentWillUnmount",value:function(){e("html,body").css({height:"",overflowY:""})}},{key:"render",value:function(){return _.default.createElement("div",{onClick:this.props.onClose},_.default.createElement(E.Shady,{option:{zIndex:108}}),_.default.createElement("div",{className:"note-popup"},_.default.createElement("div",{className:"popup-body",onClick:function(e){e.stopPropagation()}},_.default.createElement("h3",null,_.default.createElement("p",null,"发票须知")),_.default.createElement("div",{className:"list"},_.default.createElement("p",null,"1、使用活动赠送的小泰e卡（活动卡）支付的订单不支持开具发票；"),_.default.createElement("p",null,"2、跨境保税、海外直邮商品属于跨境海外商品，不支持开具国内发票；"),_.default.createElement("p",null,"3、如选择公司抬头的发票需提供纳税人识别号；"),_.default.createElement("p",null,"4、电子普通发票的法律效力、基本用途及使用规定同纸质普通发票，可用于报销入账、售后维权等。如需纸质发票可自行下载打印；"),_.default.createElement("p",null,"5、我公司依法开具发票，如您购买的商品按税法规定属于不得从增值税销项税额中抵扣的项目（例如集体福利或个人消费等），请您选择普通发票；如使用个人账户支付订单需开具增值税专用发票请联系在线客服提供单位授权委托书。"))),_.default.createElement("div",{className:"popup-bottom"},_.default.createElement("i",{className:"close-l-x-icon"}," "))))}}]),a}(),K={checkObject:function(e,t,a){var n={status:!0,msg:""},r=a[a.invoiceType+"Invoice_"+e.action].postData;return t.every(function(t,a){if(!t.validate||(""===e[t.key]||void 0===e[t.key])&&!t.require)return n;if(void 0===e[t.key]){if(!t.validate(r[t.key],t.require))return n={status:!1,msg:t.msg},!1}else if(!t.validate(e[t.key],t.require))return n={status:!1,msg:t.msg},!1;return!0}),n},isEmpty:function(e){return void 0!==e&&""!==e.trim()},telCheck:function(e,t){return(""!==(e=void 0!==e?e.trim():"")||!t)&&!!/^[0-9\-]+$/g.test(e)},character:function(e){},characterNum:function(e,t){return(""!==(e=void 0!==e?e.trim():"")||!t)&&!!/^[\u4e00-\u9fa5|0-9]+$/g.test(e)},numberCheck:function(e,t){return(""!==(e=void 0!==e?e.trim():"")||!t)&&!!/^[0-9]+$/g.test(e)},emailCheck:function(e){return!!/^([a-zA-Z0-9_\.\-])+\@[a-zA-Z0-9\-]+\.com$/g.test(e)},isObject:function(e){return"object"===(void 0===e?"undefined":h(e))&&null!==e}},ee={common:{1:[{key:"invoice_name1",validate:K.isEmpty,require:!0,msg:"请输入发票抬头"}],2:[{key:"title",validate:K.isEmpty,require:!0,msg:"请输入发票抬头"},{key:"taxpayer_idNumber",validate:K.isEmpty,require:!0,msg:"请输入纳税人识别码"},{key:"reg_address",validate:"",require:!1,msg:"请输入正确的地址"},{key:"reg_tel",validate:K.telCheck,require:!1,msg:"请填写正确的注册电话"},{key:"open_bank",validate:K.characterNum,require:!1,msg:"请填写正确的开户银行"},{key:"bank_account",validate:K.numberCheck,require:!1,msg:"请填写正确的银行账户"}]},electron:{1:[{key:"invoice_name1",validate:K.isEmpty,require:!0,msg:"请输入发票抬头"},{key:"receiver_email",validate:K.emailCheck,require:!0,msg:"请填写正确的收票人邮箱"}],2:[{key:"title",validate:K.isEmpty,require:!0,msg:"请输入发票抬头"},{key:"receiver_email",validate:K.emailCheck,require:!0,msg:"请填写正确的收票人邮箱"},{key:"taxpayer_idNumber",validate:K.isEmpty,require:!0,msg:"请输入纳税人识别码"},{key:"reg_address",validate:"",require:!1,msg:"请输入正确的地址"},{key:"reg_tel",validate:K.telCheck,require:!1,msg:"请填写正确的注册电话"},{key:"open_bank",validate:K.characterNum,require:!1,msg:"请填写正确的开户银行"},{key:"bank_account",validate:K.numberCheck,require:!1,msg:"请填写正确的银行账户"}]},tax:[{key:"unit_name",validate:K.isEmpty,require:!0,msg:"请输入单位名称"},{key:"taxpayer_idNumber",validate:K.isEmpty,require:!0,msg:"请输入纳税人识别码"},{key:"reg_address",validate:K.isEmpty,require:!0,msg:"请输入注册地址"},{key:"reg_tel",validate:K.telCheck,require:!0,msg:"请输入正确的电话"},{key:"open_bank",validate:K.isEmpty,require:!0,msg:"请输入正确的银行名称"},{key:"bank_account",validate:K.numberCheck,require:!0,msg:"请输入正确的账户"},{key:"receiver_address",validate:K.isEmpty,require:!0,msg:"请选择收票地址"},{key:"receiver_name",validate:K.isEmpty,require:!0,msg:"请选择收票地址"},{key:"receiver_region",validate:K.isEmpty,require:!0,msg:"请选择收票地址"},{key:"receiver_tel",validate:K.isEmpty,require:!0,msg:"请选择收票地址"}]};t.default=(0,k.connect)(function(e,t){return v({},e.global,e.invoiceSelect,{confirmLoad:e.orderConfirm.load,addressForinvoice:e.orderConfirm.newAddressForinvoice})},function(e,t){var a=t.location.query,n=a.shop_ids,r=a.invoice,i=a.action;return n=n.split(","),{dispatch:e,setOrigin:function(t){e(O("setOrigin",{origin:t}))},promptClose:function(){e(O("ctrlPrompt",{prompt:{show:!1,msg:""}}))},changeType:function(t){e(O("changeType",{invoiceType:t}))},changeStatus:function(t,a,n){e(O("changeStatus",{invoiceType:t,key:a,value:n}))},modalCtrl:function(t){e(O("modalCtrl",{status:t}))},modalSelect:function(t,a){e(O("modalSelect",{selectType:t,obj:a})),e(O("modalCtrl",{status:!1}))},changeForm:function(t,a,n){e(O("changeForm",{mode:t,name:a,value:n}))},selectAddress:function(t){e(O("selectAddress",{data:t}))},popupNote:function(t){e(O("popupNote",{status:t}))},initialPage:function(){e(P("setOrigin",{origin:"invoice"})),e(O("updateState")),D.default.request(v({},V.initPage,{params:{shop_id:n}})).then(function(t){e(O("initialPage",{data:t.data,invoice:r,action:+i}))}).catch(function(e){I.tip.show({msg:e.message||e.response.data.message||"小泰发生错误，请稍后再试~"}),console.error(e)})}}},function(t,a,n){var r=!1,i=a.dispatch;return v({},t,a,n,{formSubmit:function(){if(!r){r=!0;var a=t[t.invoiceType+"Invoice"].postData,n={status:!0,msg:""};if(!(n="tax"===t.invoiceType?K.checkObject(a,ee[t.invoiceType],t):K.checkObject(a,ee[t.invoiceType][a.action],t)).status)return i(O("ctrlPrompt",{prompt:{show:!0,msg:n.msg}})),void(r=!1);D.default.request(v({},V.invoiceSave,{data:e("#invoiceForm").serialize()})).then(function(e){r=!1;var n=e.data;if(0===n.code){var o=t[t.invoiceType+"Invoice"].postData,l=t.invoiceType,c=t[l+"Invoice_"+a.action].postData;i(P("selectInvoice",{invoice:A[t.invoiceType],action:o.action,unitName:void 0===o.unit_name?c.unit_name:o.unit_name,invoiceName:void 0===o.title?c.title:o.title,id:n.data.invoice.result})),b.browserHistory.goBack()}else i(O("ctrlPrompt",{prompt:{show:!0,msg:n.message}}))}).catch(function(e){I.tip.show({msg:e.response.data.message||e.message||"小泰发生错误，请稍后再试~"})})}}})})(L)}).call(this,a("OOjC"))},j8tI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shady=void 0;var n=i(a("U7vG")),r=i(a("kqn0"));function i(e){return e&&e.__esModule?e:{default:e}}t.Shady=function(e){return n.default.createElement("div",{style:e.styles||{},className:r.default.shady,onTouchMove:function(e){return e.preventDefault()}})}},kqn0:function(e,t,a){e.exports={shady:"_1ZK1o7U5FLZCFfrBclyf1o"}},lEnC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a("U7vG")),r=o(a("nrOz")),i=a("j8tI");function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return n.default.createElement("div",null,n.default.createElement(i.Shady,{styles:{background:"transparent"}}),n.default.createElement("div",{className:r.default.popupLoad},n.default.createElement("div",{className:r.default.popupLoadBox},n.default.createElement("div",{className:r.default.popupLoadImg}," ")),n.default.createElement("div",{className:r.default.popupLoadText},"Loading ...")))}},nrOz:function(e,t,a){e.exports={popupLoad:"_2Y2nkSMWhJbICN8WiCugAn",popupLoadImg:"_3ievdQpPwGaU1q7Am3FZ13",popupLoadText:"_3oL8oyMao17-NapT1Rp54y"}}}]);
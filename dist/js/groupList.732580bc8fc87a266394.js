(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Oeqx:function(e,t,a){"use strict";(function(e){var r=u(a("Zx67")),n=u(a("kiBT")),i=u(a("OvRC")),o=u(a("pFYg")),s=u(a("C4MV")),l=u(a("woOf"));function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a("U7vG"),f=N(d),m=a("Zfgq"),h=a("4n+p"),v=a("d2xe"),g=a("zpSi"),_=a("fw66"),w=a("f2Hk"),y=a("NUeF"),E=N(a("qAHI")),k=a("5qLU");function N(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}a("RYNs");var L={init:{url:k.WXAPI+"/promotion/myGroupBuy",method:"get"}},D=(0,w.concatPageAndType)("groupList"),x=(0,w.actionAxios)("groupList"),H=[4,1,2,0],T=function(t){function a(){var e,t,n;b(this,a);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=n=C(this,(e=a.__proto__||(0,r.default)(a)).call.apply(e,[this].concat(o))),n.navClickHandle=function(e){n.listSwiper.slideTo(e,300,!0)},n.promptClose=function(){n.props.dispatch(D("ctrlPrompt",{prompt:{show:!1,msg:""}}))},C(n,t)}return S(a,d.Component),p(a,[{key:"componentWillMount",value:function(){this.props.resetData()}},{key:"componentDidMount",value:function(){this.addSlide(this.refs.list)}},{key:"addSlide",value:function(e){var t=this,a=this.props,r=a.dispatch,n=a.status;a.location;this.listSwiper=new Swiper(e,{initialSlide:n,onSlideChangeStart:function(e){m.browserHistory.replace(t.props.navList[e.activeIndex].url),r(x("getData",c({},L.init,{params:{page:1,group_status:H[e.activeIndex],page_size:10}}),{type:H[e.activeIndex],pages:1,url:t.props.navList[e.activeIndex].url}))},onTouchStart:function(e){0===e.activeIndex?e.lockSwipeToPrev():e.unlockSwipeToPrev(),e.activeIndex===e.slides.length-1?e.lockSwipeToNext():e.unlockSwipeToNext()}}),0===Number(this.listSwiper.activeIndex)&&(m.browserHistory.replace(this.props.navList[0].url),r(x("getData",c({},L.init,{params:{page:1,group_status:4,page_size:10}}),{type:4,pages:1,url:this.props.navList[0].url})))}},{key:"render",value:function(){return f.default.createElement("div",{"data-plugin":"swiper","data-page":"trade-list",style:{height:e(window).height(),overflow:"hidden"}},f.default.createElement("section",{ref:"list",className:"swiper-container trade-list"},f.default.createElement(I,{data:this.props.navList,status:this.props.status,clickHandle:this.navClickHandle}),f.default.createElement(O,c({listLength:"4",swiper:this.listSwiper},this.props))),f.default.createElement(_.PopupTip,{active:this.props.prompt.show,msg:this.props.prompt.msg,onClose:this.promptClose}))}}]),a}(),I=function(e){function t(){var e,a,n;b(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return a=n=C(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.clickHandle=function(e,t,a){a.preventDefault(),m.browserHistory.replace(e),n.props.clickHandle(t)},C(n,a)}return S(t,d.Component),p(t,[{key:"render",value:function(){var e=this;return f.default.createElement("nav",{className:"trade-list-nav"},this.props.data.map(function(t,a){return f.default.createElement(m.Link,{to:t.url,className:"nav-list",key:a,activeClassName:"active",onClick:e.clickHandle.bind(e,t.url,a)},f.default.createElement("span",null,t.text))}))}}]),t}(),O=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return S(t,d.Component),p(t,[{key:"getHtml",value:function(){for(var e=this.props,t=(e.list,e.dispatch,e.status,this.props.listLength),a=[],r=0;t>r;)a.push(f.default.createElement(P,{status:r,swiper:this.props.swiper,key:r})),r++;return a}},{key:"render",value:function(){return f.default.createElement("div",{className:"swiper-wrapper list-main"},this.getHtml())}}]),t}(),A=function(t){function a(){var e,t,n;b(this,a);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=n=C(this,(e=a.__proto__||(0,r.default)(a)).call.apply(e,[this].concat(o))),n.dropDown=function(e){var t=n.props,a=t.list,r=t.dispatch,i=t.status;if(a.page>a.total/10)return e.lock(),e.noData(),void e.resetload();E.default.request(c({},L.init,{params:{page:a.page+1,group_status:H[i],page_size:10}})).then(function(t){r(D("concatDataSuccess",{result:t.data,dataType:H[i],page:a.page+1})),e.resetload()}).catch(function(t){throw e.resetload(),r(D("concatDataError",{error:t})),new Error(t)})},C(n,t)}return S(a,d.Component),p(a,[{key:"render",value:function(){var t=this.props,a=t.list,r=t.status;return f.default.createElement("div",{className:"swiper-slide",ref:"list",style:{overflow:"auto",height:document.body.clientHeight-40}},a.load?f.default.createElement(v.LoadingRound,null):a.data&&a.data.length?f.default.createElement(j,{scrollArea:e(this.refs.list),swiper:this.props.swiper,dropDown:this.dropDown,list:a,listStatus:r}):f.default.createElement(v.NoMoreOrder,null))}}]),a}();var P=(0,h.connect)(function(e,t){return{list:e.groupList.list[H[t.status]]}})(A),M=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return S(t,d.Component),p(t,[{key:"getHtml",value:function(){return this.props.list.data.map(function(e,t){var a=!1;return"拼团中"===y.groupStatus[e.group_status]&&(a=!0),f.default.createElement(q,{key:t,data:e,showCtrl:a})})}},{key:"render",value:function(){return f.default.createElement("div",{className:"list-data"},this.getHtml())}}]),t}(),j=(0,g.DropDownLoad)(M),q=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return S(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props.data;return f.default.createElement("li",{className:"one-order"},f.default.createElement(z,{data:e}),this.props.showCtrl?f.default.createElement(R,{tid:e.object_id}):"")}}]),t}(),z=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return S(t,d.Component),p(t,[{key:"render",value:function(){var e=this.props.data,t=e.title,a=e.order_shop_no,r=e.pic_path,n=e.group_status,i=e.spec_nature_info,o=e.required_person,s=void 0===o?0:o,l=e.num,u=e.payment,c=y.groupStatus[n];return f.default.createElement("div",{className:"order-info"},f.default.createElement("div",{className:"list-body"},f.default.createElement("div",{className:"list-img"},f.default.createElement(m.Link,{to:"/tradeDetail?tid="+a+"&orderflag=2"},f.default.createElement("img",{src:r}))),f.default.createElement("div",{className:"list-body-ctt"},f.default.createElement("div",{className:"order-info-detail"},f.default.createElement("div",{className:"order-info-top"},f.default.createElement(m.Link,{to:"/tradeDetail?tid="+a+"&orderflag=2",className:"order-info-title"},t),f.default.createElement("div",{className:"order-info-type"},i)),f.default.createElement("div",{className:"order-status-wrap"},f.default.createElement("div",{className:"order-status"},y.groupStatus[n]),"拼团中"===c&&f.default.createElement("div",{className:"order-status"},"差",s,"人"))),f.default.createElement("div",{className:"order-total"},f.default.createElement("span",{className:"order-number"},"共",l,"件商品")," 实付款：",f.default.createElement("span",{className:"order-total-pay"},(+u).toFixed(2))))))}}]),t}(),R=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return S(t,d.Component),p(t,[{key:"render",value:function(){return f.default.createElement("div",{className:"order-ctrl c-tr"},f.default.createElement(m.Link,{className:"ctrl-red cancel-order",to:"/groupDetail?object_id="+this.props.tid},"邀请好友参团"))}}]),t}();t.default=(0,h.connect)(function(e,t){return c({},e.groupList,{navList:e.groupList.navList,status:t.params.status})},function(e){return{dispatch:e,resetData:function(){e(D("resetData"))}}})(T)}).call(this,a("OOjC"))}}]);
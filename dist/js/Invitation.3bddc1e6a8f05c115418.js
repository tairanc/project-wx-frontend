(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{IqSi:function(e,t,a){},yw8p:function(e,t,a){"use strict";(function(e){var n=o(a("mvHQ")),l=o(a("Zx67")),r=o(a("kiBT")),i=o(a("OvRC")),c=o(a("pFYg")),u=o(a("C4MV")),s=o(a("woOf"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var f,d,m,p,g=s.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,u.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a("U7vG"),E=M(v),y=a("5qLU"),_=M(a("4GUf")),b=a("4n+p"),w=a("f2Hk"),N=a("qeJi");function M(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,c.default)(t))&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}a("IqSi");(0,w.concatPageAndType)("invitation"),(0,w.actionAxios)("invitation");var x=(d=f=function(t){function a(t){S(this,a);var r=k(this,(a.__proto__||(0,l.default)(a)).call(this,t));return r.btnClick=function(){r.setState({cover:!0})},r.getShareMsg=function(){e.ajax({url:"/wxapi/inviteSellPersonal.api",type:"get",success:function(e){if(200===e.code&&e.status){var t={title:e.data.share.title,desc:e.data.share.description,link:location.origin+"/blank?invite_code="+e.data.invite_code,imgUrl:e.data.share.image,type:"",dataUrl:"",success:function(){},cancel:function(){}};wx.ready(function(){wx.onMenuShareTimeline(t),wx.onMenuShareAppMessage(t),wx.onMenuShareQQ(t),wx.onMenuShareQZone(t)})}else _.default.MsgTip({msg:e.msg})},error:function(e){_.default.MsgTip({msg:"服务器繁忙"})}})},r.closeCover=function(){r.setState({cover:!1})},r.getJSApi=function(t){var a=r;e.ajax({url:"/wxapi/getJSApi?url="+encodeURIComponent(t),type:"GET",dataType:"json",contentType:"application/json;chartset=utf-8",success:function(e){wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),a.setState({config:!0}),wx.error(function(e){console.log((0,n.default)(e))}),a.getShareMsg()},error:function(e){a.showMsg="绑定域名不正确！",a.setState({showStatus:!0})}})},r.state={data:[],update:!1,cover:!1},r}return C(a,v.Component),h(a,[{key:"componentWillMount",value:function(){N.browser.versions.weixin||(location.href=N.browser.versions.ios?"http://a.app.qq.com/o/simple.jsp?pkgname=com.tairanchina.taiheapp":"https://m.tairanmall.com/guide?redirect=trmall://main?page=home"),document.title="邀请有奖";var t=location.href.split("#")[0];this.getJSApi(t);var a=this;e.ajax({url:"/wxapi/inviteSellAwardPreview.api",type:"get",success:function(e){a.props.isLogin||(location.href="/login?redirect_uri=%2FuserCenter"),200===e.code&&e.status?a.setState({data:e.data,update:!0}):_.default.MsgTip({msg:e.msg})},error:function(e){_.default.MsgTip({msg:e.msg}),a.props.isLogin||(location.href="/login?redirect_uri=%2FuserCenter")}})}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.update;return E.default.createElement("div",{"data-page":"invitation"},a?E.default.createElement("section",{id:"invitation",ref:"invitation"},E.default.createElement(L,null),E.default.createElement(j,{data:t}),E.default.createElement("div",{className:"footer"},E.default.createElement("button",{onClick:this.btnClick},"邀请好友，一起赚钱")),this.state.cover?E.default.createElement(T,{fn:this.closeCover}):""):E.default.createElement(y.LoadingRound,null))}}]),a}(),f.contextTypes={store:E.default.PropTypes.object,isLogin:E.default.PropTypes.bool},d),T=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"render",value:function(){var e=this.props.fn;return E.default.createElement("div",{className:"cover"},E.default.createElement("img",{className:"hand",src:"src/img/logistics/img/hand.png"}),E.default.createElement("img",{onClick:e,className:"btn",src:"src/img/logistics/img/button.png"}))}}]),t}(),L=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"render",value:function(){return E.default.createElement("div",{className:"banner c-pr"},E.default.createElement("img",{src:"src/img/logistics/img/banner.png",style:{width:"100%"}}))}}]),t}(),j=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"render",value:function(){var e=this.props.data;return E.default.createElement("div",{className:"detail"},E.default.createElement("ul",{className:"rule c-mb10"},E.default.createElement("li",null,E.default.createElement("p",null,"1"),E.default.createElement("div",null,"成功邀请好友",E.default.createElement("br",null),"您可获得优惠券")),E.default.createElement("li",null,E.default.createElement("p",null,"2"),E.default.createElement("div",null,"好友购小泰良品",E.default.createElement("br",null),"您可获得提成")),E.default.createElement("li",{style:{border:"none"}},E.default.createElement("p",null,"3"),E.default.createElement("div",null,"您购小泰良品",E.default.createElement("br",null),"可获得返点"))),E.default.createElement(A,{data:e}),E.default.createElement(U,null))}}]),t}(),A=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"render",value:function(){var e=this.props.data;return E.default.createElement("div",{className:"reward c-mb35"},E.default.createElement("img",{className:"icon",src:"src/img/logistics/img/icon.png"}),e.invite_count?E.default.createElement(R,{data:e}):E.default.createElement(I,null))}}]),t}(),I=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"render",value:function(){return E.default.createElement("div",{className:"no-reward"},E.default.createElement("h2",{className:"c-tc c-fs18 c-mb20"},"我获得的奖励"),E.default.createElement("img",{src:"src/img/logistics/img/line.png"}),E.default.createElement("p",{className:"c-fs14 c-c666 c-tc"},"还没有奖励,快去邀请好友领奖励吧！"))}}]),t}(),R=(p=m=function(e){function t(){return S(this,t),k(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return C(t,v.Component),h(t,[{key:"componentWillMount",value:function(){this.setState({btn:!0})}},{key:"render",value:function(){var e=this.props.data;return E.default.createElement("div",{className:"has-reward c-pr"},E.default.createElement("p",{className:"c-fs18 c-tc c-mb30"},"我获得的奖励"),E.default.createElement("ul",{className:"c-clrfix"},E.default.createElement("a",{href:y.ZXURL+"/invitedFriends"},E.default.createElement("li",null,E.default.createElement("p",{className:"c-fs12 c-c666"},"成功邀请（人）"),E.default.createElement("p",{className:"c-fs18 c-fb"},e.invite_count))),E.default.createElement("a",{href:y.FYURL+"/balanceList"},E.default.createElement("li",null,E.default.createElement("p",{className:"c-fs12 c-c666"},"累计提成（元）"),E.default.createElement("p",{className:"c-fs18 c-fb"},e.total_income))),E.default.createElement("a",{href:y.FYURL+"/balanceList"},E.default.createElement("li",null,E.default.createElement("p",{className:"c-fs12 c-c666"},"累计返点（元）"),E.default.createElement("p",{className:"c-fs18 c-fb"},e.total_rebate)))),E.default.createElement("div",{className:"c-tc",style:{paddingTop:"16px"}},E.default.createElement("a",{href:"https://m.tairanmall.com/guide?redirect=trmall://main?page=home"},E.default.createElement("button",{className:"c-fs14"},"去客户端提现 >"))))}}]),t}(),m.contextTypes={isApp:E.default.PropTypes.bool,isLogin:E.default.PropTypes.bool},p),U=function(t){function a(){return S(this,a),k(this,(a.__proto__||(0,l.default)(a)).apply(this,arguments))}return C(a,v.Component),h(a,[{key:"componentWillMount",value:function(){this.setState({list:[]})}},{key:"componentDidMount",value:function(){var t=this;e.ajax({url:"/wxapi/inviteSellAwards.api",type:"get",data:{page:1,page_size:10},success:function(e){200===e.code&&e.status?t.setState({list:e.data.awards}):_.default.MsgTip({msg:e.msg})},error:function(e){_.default.MsgTip({msg:"服务器繁忙"})}})}},{key:"render",value:function(){var e=this.state.list,t="";return e.length&&(t=e.map(function(e,t){return E.default.createElement(P,{data:e,key:t})})),E.default.createElement("div",{className:"reward-detail"},E.default.createElement("div",{className:"reward-detail-head"},E.default.createElement("div",{className:"head c-tc c-fs14 c-c666"},"我的奖励明细",E.default.createElement("span",{className:"left-one"}),E.default.createElement("span",{className:"right-one"}))),E.default.createElement("ul",{className:"rewards"},t),e.length?E.default.createElement("div",{className:"check c-pr"},E.default.createElement("a",{href:y.ZXURL+"/orderList"},E.default.createElement("button",null,"查看明细 >"))):"")}}]),a}(),P=function(e){function t(){var e,a,n;S(this,t);for(var r=arguments.length,i=Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=n=k(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(i))),n.getDate=function(e){var t=new Date(1e3*parseInt(e));return t.getFullYear()+"-"+(parseInt(t.getMonth())+1>9?parseInt(t.getMonth())+1:"0"+(parseInt(t.getMonth())+1))+"-"+(t.getDate()>9?t.getDate():"0"+t.getDate())},k(n,a)}return C(t,v.Component),h(t,[{key:"render",value:function(){var e=this.props.data,t=this.getDate(e.awarded_at),a=e.type;return E.default.createElement("li",{className:"each-reward c-fs12 c-c666 c-pr"},E.default.createElement("div",{className:"user-img c-fl"},E.default.createElement("img",{src:"src/img/logistics/img/"+{Invite:"coupon",Consume:"money",Rebate:"return"}[a]+".png"}),{Invite:"优惠券",Consume:"提成",Rebate:"返点"}[a]),E.default.createElement("p",{style:{marginTop:"2px"}},e.message),E.default.createElement("p",null,t),E.default.createElement("span",{className:"c-fs14 c-pa"},e.award.worth,"元"))}}]),t}();t.default=(0,b.connect)(function(e,t){return g({},e.userCenter,e.global)})(x)}).call(this,a("OOjC"))}}]);
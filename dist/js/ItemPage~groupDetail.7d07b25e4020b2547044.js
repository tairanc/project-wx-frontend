(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8x+B":function(e,t,a){"use strict";var n=s(a("Zx67")),r=s(a("kiBT")),i=s(a("OvRC")),l=s(a("pFYg")),o=s(a("C4MV"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NewModal=void 0;var c,u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a("U7vG"),p=h(d),m=(a("XKGu"),h(a("bhYP"))),f=h(a("211U"));function h(e){return e&&e.__esModule?e:{default:e}}t.NewModal=(0,f.default)(m.default,{allowMultiple:!0})(c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,l.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,d.Component),u(t,[{key:"render",value:function(){var e=this.props.isOpen;return p.default.createElement("div",null,e?p.default.createElement("div",{styleName:"shady",onClick:this.props.onClose}):"",p.default.createElement("div",{styleName:"animationModal "+(e?"active":""),style:{borderRadius:"10px 10px 0 0"}},this.props.title&&p.default.createElement("span",{styleName:"title"},this.props.title),p.default.createElement("span",{styleName:"closeBtn",onClick:this.props.onClose},p.default.createElement("i",null)),p.default.createElement("div",null,this.props.children)))}}]),t}())||c},"G/Ei":function(e,t,a){"use strict";var n=s(a("Zx67")),r=s(a("kiBT")),i=s(a("OvRC")),l=s(a("pFYg")),o=s(a("C4MV"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadMask=void 0;var c,u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a("U7vG"),p=g(d),m=g(a("211U")),f=g(a("XSP4")),h=a("f+hS");function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,m.default)(f.default)(c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,l.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}(t,d.Component),u(t,[{key:"render",value:function(){return p.default.createElement("div",{styleName:"mask"},p.default.createElement("img",{styleName:"mask-load",src:a("rgEM")}))}}]),t}())||c;t.loadMask=new h.Modal(v)},JmOZ:function(e,t,a){"use strict";(function(e){var n,r,i,l,o,s,c,u=y(a("mvHQ")),d=y(a("fZjL")),p=y(a("Zx67")),m=y(a("gRE1")),f=y(a("kiBT")),h=y(a("OvRC")),g=y(a("pFYg")),v=y(a("woOf")),E=y(a("C4MV"));function y(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BarrageStripConnnect=t.BarrageStripWrap=t.createChooseSpec=t.createBuyAction=t.Buy=t.BuyModal=t.ExpectTax=t.Specs=t.BuyModalButton=t.BuyModalTitle=t.TotopAndCart=t.Collect=t.GoodsDetail=t.ShopArea=t.RecommendArea=t.LinkChange=t.LinkAndChange=t.EvaluateAreaContents=t.EvaluateArea=t.SeverArea=t.CouponList=t.CouponWrap=t.PromotionWrap=t.ActiveArea=t.Tag=t.GoodsTit=t.VipArea=t.Price=t.PriceArea=t.ScrollImageState=t.ItemNav=t.CouponType=t.params=t.PromotionInfo=t.pageApi=void 0;var _=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,E.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),w=v.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.setExtraInfo=H,t.rangePrice=$,t.chooseSpec=ee,t.scaleImg=te,t.flyToCart=ae,t.FreePostage=ue,t.promotionState=ge,t.promotionDispatch=ve,t.couponsState=we,t.couponsDispatch=Ne,t.addState=Ie,t.addDispatch=Te,t.searverState=Be,t.searverDispatch=De,t.collectState=We,t.collectDispatch=He;var N=a("U7vG"),S=O(N),k=(O(a("O27J")),a("4n+p")),A=(O(a("BYKG")),a("Zfgq")),b=a("rsfq"),C=a("f2Hk"),I=a("G/Ei"),T=a("d2xe"),x=a("6quk"),M=a("fw66"),B=a("8x+B"),D=a("ZdiO"),P=a("XKGu"),L=O(a("qAHI")),F=a("5qLU"),R=a("tJWF"),Q=a("f2t5");function O(e){return e&&e.__esModule?e:{default:e}}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,g.default)(t))&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,g.default)(t)));e.prototype=(0,h.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.default?(0,f.default)(e,t):e.__proto__=t)}a("kjFZ");(0,C.actionAxios)("itemIndex");var Y=(0,C.concatPageAndType)("itemIndex"),q=void 0,X=void 0,Z=function(e){return w({},e.global)},W=t.pageApi={toCart:{url:F.WXAPI+"/cart/add",method:"post"},DelFav:{url:F.WXAPI+"/user/removeItemCollection",method:"get"},Fav:{url:F.WXAPI+"/user/saveItemCollection",method:"post"},GetCoupon:{url:F.WXAPI+"/promotion/obtainCoupon",method:"post"},Coupon:{url:F.WXAPI+"/item/coupon",method:"get"},CheckGroupBuy:{url:F.WXAPI+"/promotion/checkGroupBuy",method:"post"}};function H(e,t,a,n,r,i){return{type:"ds-gwc",goodsId:e,skuId:t,goodsCounts:a,httpcode:n,serviceCode:r,message:i}}var K=t.PromotionInfo={DirectReduction:{getValue:function(e){var t=e.itemdata,a=e.deductPrice,n=t.deduct_price;return S.default.createElement("span",null,"直降",parseFloat(a||n),"元 ")},getTagName:"直降"},SecKill:{getValue:function(e){return S.default.createElement("span",null,"限时秒杀,每个ID限购",e.itemdata.rules.user_buy_limit,"件")},getTagName:"秒杀"},FlashSale:{getValue:function(e){return S.default.createElement("span",null,"限时特卖正在火热抢购中...")},getTagName:"特卖"},FullMinus:{link:function(e){return"/searchResult?promotion_id="+e.id+"&shop="+e.shop_id},getValue:function(e){var t=e.itemdata,a=t.rules.rule.map(function(e,a){return"满"+e.limit_money+"减"+e.deduct_money+(a!==t.rules.rule.length-1?";":"")});return t.rules.no_capped&&a.push(";上不封顶"),S.default.createElement("ul",{className:"full-cut-list c-fl"},S.default.createElement("li",{className:"minus-full-activity"},a.join("")))},name:"fullminus",getTagName:"满减"},FullDiscount:{link:function(e){return"/searchResult?promotion_id="+e.id+"&shop="+e.shop_id},getValue:function(e){var t=e.itemdata.rules;return S.default.createElement("ul",{className:"full-cut-list c-fl"},S.default.createElement("li",{className:"minus-full-activity"},t.map(function(e,a){return e.full+"件"+e.percent/10+"折"+(a!==t.length-1?";":"")}).join(""),";"))},getTagName:"满折"},OptionBuy:{link:function(e){return"/searchResult?promotion_id="+e.id+"&shop="+e.shop_id},getValue:function(e){var t=e.itemdata;return S.default.createElement("span",{className:"option-buy"},t.rules.amount+"元任选"+t.rules.quantity+"件")},getTagName:"N元任选"},ExchangeBuy:{getValue:function(e){var t=e.itemdata;return e.flag?S.default.createElement("a",{href:"/searchResult?promotion_id="+t.id+"&shop="+t.shop_id},S.default.createElement("span",null,"满",t.rules.exchange_full,"元加价可在购物袋换购热销商品"),S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"}))):S.default.createElement("span",null,"满",t.rules.exchange_full,"元加价可在购物袋换购热销商品")},getTagName:"加价换购"},GiftBuy:{getValue:function(e){if(e.flag){var t=[];(0,m.default)(e.itemdata.subItems).forEach(function(e,a){for(var n in e)t.push(e[n])});var a=t.map(function(e,t){return S.default.createElement("li",{key:t},S.default.createElement("span",{className:"title"},"赠品",t+1),S.default.createElement("a",{href:"/item?item_id="+e.item_id},S.default.createElement("span",{className:"image"},S.default.createElement("img",{src:"open"===e.subItemStatus?e.primary_image:"/src/img/item/no-item.png"})),S.default.createElement("i",null,"×",e.giftNum)))});return S.default.createElement("div",{className:"gift-title"},S.default.createElement("p",{className:"gift-p"},"购买可获赠热销商品，赠完为止"),S.default.createElement("div",{className:"gift-wrapper"},S.default.createElement("ul",{className:"gift-buy"},S.default.createElement("div",{className:"wrapper"},a))))}return S.default.createElement("div",{className:"gift-title",style:{display:"inline-block"}},S.default.createElement("p",{style:{display:"inline-block",lineHeight:"28px"}},"购买可获赠热销商品，赠完为止"))},getTagName:"赠品"},default:function(){return null}},J={Good:"好评!",Bad:"差评!",Neutral:"中评!"},V=t.params={newTime:0,oldTime:0,enlarge:!1,touchesX:0,touchesY:0,FirstX:0,FirstY:0,x1:0,x2:0,y1:0,startX:0,startY:0,endX:0,endY:0,wid:0,hei:0,lef:0,to:0,timerScale:null};function z(t){var a=Math.abs(e(window).scrollTop()||e("#item-details")[0]&&-e("#item-details")[0].offsetTop||z.disTop);t&&e("#item-details")[0]?(z.disTop=a,e("#item-details").css({position:"fixed",top:-a,width:"100%"})):(e("#item-details").css({position:"static",top:""}),e(window).scrollTop(z.disTop||0))}function $(e,t){var a=e.info.skus,n=[],r=void 0;for(var i in a)t?n.push(parseFloat(parseFloat(a[i].price).toFixed(2))):n.push(parseFloat(parseFloat(a[i].market_price).toFixed(2)));return n.length>1?(n=n.sort(function(e,t){return e-t}),r="FlashSale"===e.activity_type||"SecKill"===e.activity_type||e.groupBuy?n[0]:n[0]!==n[n.length-1]?n[0]+"-"+n[n.length-1]:n[0]):r=n[0],r}function ee(e,t){var a=e.specKey,n=e.selectArr,r=[],i=void 0;return a&&a.map(function(e,a){i=t[e].values.filter(function(e,t){return e.spec_value_id==n[a]}),r.push(S.default.createElement("span",{key:e},i[0].text," "))}),r}function te(t,a,n){var r=n.newTime,i=n.oldTime,l=n.enlarge,o=n.touchesX,s=n.touchesY,c=n.FirstX,u=n.FirstY,d=n.x1,p=(n.x2,n.y1),m=n.startX,f=n.endX,h=(n.startY,n.endY,n.wid),g=(n.hei,n.lef),v=n.to,E=n.timerScale,y=n.self;n.isLarge;e(t+" img").on("touchstart",function(n){n.preventDefault();var _=n.target;clearTimeout(E);var w=_.height/_.width;d=2*(e(n.target).offset().left-e(t).offset().left)-n.touches[0].clientX,p=2*(e(n.target).offset().top-e(t).offset().top)-n.touches[0].clientY,2==n.touches.length&&(n.touches[1].pageX,m=Math.abs(n.touches[0].clientX-n.touches[1].clientX),Math.abs(n.touches[0].pageY-n.touches[1].pageY),h=_.width,_.height,g=e(n.target).offset().left-e(t).offset().left,v=e(n.target).offset().top-e(t).offset().top),o=n.touches[0].clientX,s=n.touches[0].pageY,c=e(n.target).offset().left-e(t).offset().left,u=e(n.target).offset().top-e(t).offset().top,i=r,r=(new Date).getTime(),E=setTimeout(function(){r-i>300?(y.setState({isLarge:!1}),l=!1,r=0,e(_).css({width:w>1.8?"80%":"100%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"relative"}),a&&a.unlockSwipeToNext(),a&&a.unlockSwipeToPrev()):!1===l?(e(_).css({width:w>1.8?"160%":"200%",height:"auto",top:p,left:d,transform:"translate(0, 0)",position:"relative"}),a&&a.lockSwipeToNext(),a&&a.lockSwipeToPrev(),l=!0):(e(_).css({width:w>1.8?"80%":"100%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"relative"}),a&&a.unlockSwipeToNext(),a&&a.unlockSwipeToPrev(),l=!1)},300);var N=function(t){if(t.preventDefault(),1==t.targetTouches.length){var n=t.targetTouches[0];l&&(e(_).css({left:n.pageX-o+c}),e(_).css({top:n.pageY-s+u})),Math.abs(n.pageX-d)>2&&clearTimeout(E)}else if(2==t.targetTouches.length){clearTimeout(E);var r=t.targetTouches[0],i=t.targetTouches[1];f=Math.abs(r.clientX-i.clientX),Math.abs(r.pageY-i.pageY);e(window).height();var p=h+(f-m),y=e(window).width();(p=(p=p>2*y?2*y:p)<y?y:p)>y?(e(_).css({margin:0}),l=!0,a&&a.lockSwipeToNext(),a&&a.lockSwipeToPrev()):(l=!1,a&&a.unlockSwipeToNext(),a&&a.unlockSwipeToPrev()),e(_).css({width:p+"px",left:g-(f-m)/2,top:v-(f-m)/2*w,transform:"translate(0, 0)",position:"relative"})}};_.addEventListener("touchmove",N,!1),e(_).on("touchend",function(t){t.preventDefault(),_.removeEventListener("touchmove",N,!1),_.width!=e(window).width()&&_.height!=e(window).height()||e(_).css({width:w>1.8?"80%":"100%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"relative"})})})}function ae(){var t=e(".posit-img").find("img").offset(),a=e(".cart-toTop .cart").offset(),n=e(".posit-img").find("img").attr("src");Zepto('<img class="u-flyer" src="'+n+'" />').fly({start:{left:t.left,top:t.top-document.body.scrollTop},end:{left:a.left+40,top:a.top-document.body.scrollTop+40,width:0,height:0},onEnd:function(){this.destory()}})}var ne=t.CouponType={text:function(e){return e.apply_text},title:function(e){return"0"===e.type?"店铺券":"1"===e.type?"跨店券":"2"===e.type?"平台券":"3"===e.type?"红包抵用券":"免单券"}},re=t.ItemNav=function(t){function a(t){G(this,a);var n=j(this,(a.__proto__||(0,p.default)(a)).call(this,t));return n.scrollEvent=function(){var t=n.state.ratio;window.removeEventListener("scroll",n.addScrollEvent),n.addScrollEvent=function(){var a=e(window).scrollTop(),r=e(".scroll-banner").height()-44;t=(t=a/r)>=1?1:t,n.setState({ratio:t});var i=n.state;e(".item-nav").css({display:t<=0?"none":"block",backgroundColor:"rgba(255,255,255,"+t+")",color:"rgba(53,53,53,"+t+")"}),a<e(".screen-rate")[0].offsetTop-44?0!==i&&n.setState({index:0}):a<e(".screen-detail")[0].offsetTop-44?1!==i&&n.setState({index:1}):2!==i&&n.setState({index:2})},window.addEventListener("scroll",n.addScrollEvent)},n.navClick=function(t){0===t?e(window).scrollTop(0):1===t?e(window).scrollTop(e(".screen-rate")[0].offsetTop-44):e(window).scrollTop(e(".screen-detail")[0].offsetTop-44)},n.state={index:0,ratio:0},n}return U(a,P.PureComponent),_(a,[{key:"componentDidMount",value:function(){this.scrollEvent()}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.addScrollEvent)}},{key:"render",value:function(){var e=this,t=this.state,a=t.index,n=t.ratio;return S.default.createElement("div",{className:"item-nav c-fs14 c-c666",style:{display:"none"}},S.default.createElement("ul",null,S.default.createElement("li",{onClick:function(){e.navClick(0)}},S.default.createElement("span",{style:0===a?{borderBottom:"2px solid rgba(53,53,53,"+n+")"}:{}},"商品")),S.default.createElement("li",{onClick:function(){e.navClick(1)}},S.default.createElement("span",{className:1===a?"active":""},"评价")),S.default.createElement("li",{onClick:function(){e.navClick(2)},className:"c-fr"},S.default.createElement("span",{className:2===a?"active":""},"详情"))))}}]),a}(),ie=t.ScrollImageState=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.largeBanner=function(){a.setState({isLarge:!a.state.isLarge})},a.state={isLarge:!1},a}return U(t,P.PureComponent),_(t,[{key:"componentDidMount",value:function(){var e=w({},V,{isLarge:this.state.isLarge,self:this});this.initSwiper(),this.initLargeSwiper(),te(".swiper-container-large",X,e)}},{key:"initSwiper",value:function(){q&&q.destroy(),q=new Swiper(this.refs.swiperBanner,{pagination:".swiper-pagination-banner",observer:!0,loop:!1,paginationType:"fraction",onSlideChangeStart:function(e){X.slideTo(e.activeIndex)}})}},{key:"initLargeSwiper",value:function(){X&&X.destroy(),X=new Swiper(this.refs.swiperLarge,{pagination:".swiper-pagination-large",observer:!0,loop:!1,paginationType:"fraction",onSlideChangeStart:function(e){q.slideTo(e.activeIndex)}})}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.images,n=t.item_type,r=t.activity_type,i=this.props.group_data,l=this.props.data.item_tag&&this.props.data.item_tag.images.mb_square_img,o=this.props.data.item_tag&&this.props.data.item_tag.images.mb_rectangular_img,s=this.state.isLarge,c=a&&a.length>0?a.map(function(t,a){return S.default.createElement("div",{className:"swiper-slide",key:a},S.default.createElement("img",{src:(0,Q.addImageSuffix)(t,"_l")||"/src/img/item/no-img.png",onClick:e.largeBanner}))}):S.default.createElement("div",{className:"swiper-slide"},S.default.createElement("img",{src:"/src/img/item/no-img.png"})),u=a.map(function(t,a){return S.default.createElement("div",{className:"swiper-slide swiper-slide-large",key:a,onClick:function(t){e.setState({isLarge:!1})}},S.default.createElement("img",{src:(0,Q.addImageSuffix)(t,"_l")||"/src/img/item/no-img.png",id:"img"+a}))});return S.default.createElement("div",{className:"c-pr scroll-banner","data-plugin":"swiper"},s&&S.default.createElement("div",{className:"shady-banner"}),i&&"Rookie"===i.group_type?S.default.createElement("img",{className:"c-pa tag2",src:"/src/img/activity/new-group.png"}):l?S.default.createElement("img",{className:"c-pa tag1",src:l}):"",S.default.createElement("div",{className:"swiper-container",ref:"swiperBanner"},S.default.createElement("div",{className:"swiper-wrapper"},c),a.length>0&&S.default.createElement("div",{className:"swiper-pagination swiper-pagination-banner"})),S.default.createElement("div",{className:"swiper-container swiper-container-large",ref:"swiperLarge",style:s?{display:"block"}:{display:"none"}},S.default.createElement("div",{className:"swiper-wrapper"},u),S.default.createElement("div",{className:"swiper-pagination swiper-pagination-banner swiper-pagination-large"})),!o||"NORMAL"!==n&&"VIRTUAL"!==n&&"INTERNAL"!==n||"FlashSale"===r?"":S.default.createElement("img",{className:"H5D_pic",src:o}))}}]),t}(),le=t.PriceArea=(n=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return r.call(a),a.state={flashsaleFlag:!1},a}return U(t,P.PureComponent),_(t,[{key:"componentDidMount",value:function(){this.props.proStatus&&"FlashSale"===this.props.data.activity_type&&this.judgeFlashsale(this.props.promotion)}},{key:"componentWillReceiveProps",value:function(e){e.proStatus&&e.proStatus!==this.props.proStatus&&"FlashSale"===e.data.activity_type&&this.judgeFlashsale(e.promotion)}},{key:"render",value:function(){var e=this.state.flashsaleFlag,t=this.props,a=t.proStatus,n=t.promotion,r=t.data;return S.default.createElement("div",null,e&&a&&S.default.createElement(oe,this.props),S.default.createElement("div",{className:"price-area"},e?null:S.default.createElement(se,{item:r,proStatus:a,promotion:n}),S.default.createElement(de,{item:r,promotion:n}),S.default.createElement(pe,{item:r})))}}]),t}(),r=function(){var e=this;this.judgeFlashsale=function(t){var a=e.props.intervalT,n=t.promotion[0],r=n.start_time,i=n.now_time,l=n.end_time,o=n.type;i=new Date(i.replace(/-/g,"/")).getTime()+parseInt(a),r=new Date(r.replace(/-/g,"/")).getTime(),l=new Date(l.replace(/-/g,"/")).getTime(),"FlashSale"===o&&i>r&&i<l&&e.setState({flashsaleFlag:!0})}},n),oe=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.getMarketPrice=function(e,t){var a=e.info.skus,n=void 0;for(var r in a)if(a[r].price===t){n=a[r].market_price;break}return n},a.state={time:0},a}return U(t,N.Component),_(t,[{key:"componentDidMount",value:function(){var e=this.props.intervalT,t=this.props.promotion.promotion[0],a=t.end_time,n=t.now_time;a=new Date(a.replace(/-/g,"/")).getTime(),(n=new Date(n.replace(/-/g,"/")).getTime()+parseInt(e))<a&&this.setState({time:parseInt((a-n)/1e3)}),this.intervalTime()}},{key:"intervalTime",value:function(){var e=this;this.timer=setTimeout(function(){var t=--e.state.time;t<0?location.reload():(e.state.time=t,e.setState(e.state),e.intervalTime())},1e3)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){var e=$(this.props.promotion,!0),t=this.getMarketPrice(this.props.promotion,e);return S.default.createElement("div",{className:"flashsale-price c-cfff"},S.default.createElement("span",{className:"c-fs25 c-dpib c-fl"}," ¥",e),t&&t!==e?S.default.createElement("span",{className:"c-dpib c-fl market-price c-ml5"}," ¥",t):null,S.default.createElement("span",{className:"flashsale-tag"},"限时特卖"),S.default.createElement("div",{className:"c-fr c-tr"},S.default.createElement("div",{className:"time-notice"},"距结束仅剩"),S.default.createElement("div",{className:"time-notice"},Q.timeCtrl.formatTextTime(this.state.time))))}}]),t}(),se=t.Price=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.getMarketPrice=function(e,t){var a=e.info.skus,n=void 0;for(var r in a)if(a[r].price===t){n=a[r].market_price;break}return n},a.state={sellPrice:parseFloat(parseFloat(a.props.item.sell_price).toFixed(2)),marketPrice:parseFloat(parseFloat(a.props.item.market_price).toFixed(2))},a}return U(t,N.Component),_(t,[{key:"componentWillReceiveProps",value:function(e){e.proStatus&&e.proStatus!==this.props.proStatus&&this.setState({sellPrice:$(e.promotion,!0),marketPrice:"seckill"===e.item.item_type?this.getMarketPrice(e.promotion,$(e.promotion,!0)):$(e.promotion,!1)})}},{key:"componentDidMount",value:function(){this.props.proStatus&&(this.setState({sellPrice:$(this.props.promotion,!0)}),this.setState({marketPrice:"seckill"===this.props.item.item_type?this.getMarketPrice(this.props.promotion,$(this.props.promotion,!0)):$(this.props.promotion,!1)}))}},{key:"render",value:function(){var e=this.props.item,t=e.is_free,a=e.trade_type,n=e.tax_rate,r=e.item_type,i=e.shop,l=e.activity_type,o=this.state,s=o.sellPrice,c=o.marketPrice;return S.default.createElement("div",{className:"price-info c-clrfix"},S.default.createElement("span",{className:"c-dpib c-fl standard-price"}," ¥",s),c?S.default.createElement("span",{className:"c-dpib c-fl market-price"}," ¥",c):null,"NORMAL"===r&&3!==i.attr&&"FlashSale"!==l&&S.default.createElement(ue,{data:{is_free:t,trade_type:a,tax_rate:n},className:"c-fl"}))}}]),t}(),ce=t.VipArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props.vipInfo,t=void 0===e?{}:e,a=t.is_support_vip,n=t.vip_discount,r=a&&n/10;return S.default.createElement("div",null,a?S.default.createElement("div",{className:"price-vip"},S.default.createElement("img",{src:"/src/img/icon/icon-vip.png"}),S.default.createElement("span",{className:"vip-title"},"泰享会员"+r+"折特惠")):null)}}]),t}();function ue(e){var t=e.data,a=e.className;return t.is_free||"DOMESTIC"!==t.trade_type&&!Number(t.tax_rate)?S.default.createElement("span",{className:a+" free-postage-tag"},t.is_free?"包邮":"","DOMESTIC"!==t.trade_type&&0===Number(t.tax_rate)?"包税":""):null}var de=t.GoodsTit=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props.item,t=e.title,a=e.sub_title,n=e.vip_info;return S.default.createElement("div",null,S.default.createElement(ce,{vipInfo:n}),S.default.createElement("p",{className:"goods-tit"},t),a&&S.default.createElement("p",{className:"c-c666 sub-title"},a))}}]),t}(),pe=t.Tag=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"getList",value:function(){var e=this.props.item,t=e.country,a=e.trade_type,n=e.shop.biz_model,r=(0,b.FilterTradeType)(a),i=[];return t.imageUrl&&i.push(S.default.createElement("li",{key:"brandcountry"},S.default.createElement("img",{src:t.imageUrl}),t.text,"品牌")),r&&i.push(S.default.createElement("li",{key:"tradetype"},S.default.createElement("img",{src:"/src/img/icon/trade-type-icon.png"})," ",r)),1===n?i.push(S.default.createElement("li",{key:"trc"},S.default.createElement("img",{src:"/src/img/icon/trc-logo-icon.png"})," 泰然城自营")):i.push(S.default.createElement("li",{key:"trc"},S.default.createElement("img",{src:"/src/img/icon/trc-logo-icon.png"})," 泰然城精选商家")),i}},{key:"render",value:function(){var e=this.getList();return e.length?S.default.createElement("ul",{className:"all-tag"},e):null}}]),t}(),me=t.ActiveArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,P.PureComponent),_(t,[{key:"render",value:function(){return S.default.createElement("div",{className:"active-area"},S.default.createElement(ye,this.props),S.default.createElement(fe,this.props))}}]),t}(),fe=t.PromotionWrap=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"getPromotion",value:function(){var e=this.props.promotion,t=e.promotion,a=e.activity_type;return t.length?S.default.createElement(he,{promotion:t,activity_type:a,retState:this.props.retState}):null}},{key:"render",value:function(){return this.getPromotion()}}]),t}(),he=(0,k.connect)(ge,ve)(i=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"getList",value:function(e){for(var t=this.props.promotion,a=0,n=[],r=void 0;r=t[a];)n.push(S.default.createElement(Ee,w({},this.props,{itemdata:r,key:a,hasLink:e,flag:e}))),a++;return n}},{key:"render",value:function(){var e=this;return S.default.createElement("div",null,S.default.createElement("div",{className:"goods-promotion",onClick:function(){e.props.ChangePromotionModal(!0)}},S.default.createElement(B.NewModal,{isOpen:this.props.promotionModal,title:"促销活动",onClose:function(t){t.stopPropagation(),e.props.ChangePromotionModal(!1)}},S.default.createElement("div",{className:"goods-promotion-modal"},S.default.createElement("section",{className:"promotion-list-modal"},S.default.createElement("div",{className:"list-details-modal"},S.default.createElement("ul",{className:"promotion-ul-modal"},this.getList(!0)))))),S.default.createElement("div",{className:"promotion_ti c-fl"},"促销"),S.default.createElement("section",{className:"promotion-list c-fl"},S.default.createElement("div",{className:"list-details"},S.default.createElement("ul",{className:"promotion-ul"},this.getList()))),S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"})),S.default.createElement("p",{className:"clearfix"})))}}]),t}())||i;function ge(e){return{promotionModal:e.itemIndex.promotionModal}}function ve(e){return{BackFlag:function(){e(Y("promotionBackFlag"))},ChangePromotionModal:function(t){e(Y("changePromotionModal",{flag:t}))}}}var Ee=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"linkTo",value:function(){var e=this.getLink();e&&A.browserHistory.push(e),this.props.BackFlag()}},{key:"getLink",value:function(){var e=this.props.itemdata,t=K[e.type];if(t)return"function"==typeof t.link?t.link(e):t.link}},{key:"render",value:function(){var e=this,t=this.props,a=t.itemdata,n=t.flag,r=t.hasLink,i=t.retState,l=K[a.type];return S.default.createElement("li",{className:"promotion-li",onClick:function(){return r&&e.linkTo()}},S.default.createElement("div",{className:"clearfix"},S.default.createElement("button",{type:"button",className:"c-fl"},l.getTagName),l?S.default.createElement(l.getValue,{itemdata:a,flag:n,deductPrice:i&&i.deductPrice}):S.default.createElement(K.default,this.props),r&&this.getLink()?S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"})):null))}}]),t}(),ye=t.CouponWrap=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"getCoupon",value:function(){var e=this.props,t=e.promotion,a=e.shop;return t.coupon?S.default.createElement(_e,{promotion:t,shop:a}):null}},{key:"render",value:function(){return this.getCoupon()}}]),t}(),_e=(0,k.connect)(we,Ne)(l=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.getModalCouponList=function(){var e=[];I.loadMask.show(),L.default.request(w({},W.Coupon,{params:{item_id:a.props.item_id}})).then(function(t){var n=t.data;I.loadMask.destroy(),n.data&&n.data.map(function(t,n){e.push(S.default.createElement(ke,w({},a.props,{itemdata:t,key:n})))}),a.setState({couponList:e})}).catch(function(e){I.loadMask.destroy(),console.log(e),x.tip.show({msg:e.response.data.message||"服务器繁忙"})})},a.state={couponList:[]},a}return U(t,N.Component),_(t,[{key:"getCouponList",value:function(){var e=[];return this.props.promotion.coupon.some(function(t,a){if(!(a<=2))return!1;e.push(S.default.createElement("span",{key:a},"满",t.limit_money,"减",t.deduct_money))}),e}},{key:"render",value:function(){var e=this;return S.default.createElement("div",{className:"addr-ser"},S.default.createElement(B.NewModal,{title:"领取优惠劵",isOpen:this.props.couponsModal,onClose:function(t){t.stopPropagation(),e.props.ChangeCouponsModal(!1)}},S.default.createElement("div",{className:"goods-coupon-modal"},S.default.createElement("div",{className:"coupon-wrap"},S.default.createElement("div",{className:"coupone-list"},this.state.couponList)))),S.default.createElement("div",{className:"sever-addr",onClick:function(){e.getModalCouponList(),e.props.ChangeCouponsModal(!0)}},S.default.createElement("span",{className:"coupon-list"},"领券： ",this.getCouponList(),S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"})))))}}]),t}())||l;function we(e){return{couponsModal:e.itemIndex.couponsModal,item_id:e.itemIndex.data.item_id}}function Ne(e){return{BackFlag:function(){e(Y("couponsBackFlag"))},ChangeCouponsModal:function(t){e(Y("changeCouponsModal",{flag:t}))}}}var Se=function(t){function a(e){G(this,a);var t=j(this,(a.__proto__||(0,p.default)(a)).call(this,e));return t.getCoupon=function(){var e=t,a=e.props,n=a.itemdata,r=a.shop;e.setState({buttonClick:!1}),L.default.request(w({},W.GetCoupon,{params:{coupon_id:n.id,shop_id:r.id,source:"goods"}})).then(function(t){t&&200===t.status&&(e.setState({buttonClick:!0}),x.tip.show({msg:"领取成功"}))}).catch(function(t){e.setState({buttonClick:!0}),console.log(t),x.tip.show({msg:t.response.data.message||"服务器繁忙"})})},t.state={buttonClick:!0},t}return U(a,N.Component),_(a,[{key:"render",value:function(){var t=this,a=this.props,n=a.itemdata,r=a.shop,i=a.BackFlag,l=a.isLogin;n.shop=r;var o;n.coupon_type;return S.default.createElement("div",{className:"coupon "+(o=n,o.isset_limit_money?"coupon-red":"coupon-yellow")},S.default.createElement("div",{className:"coupon-li-wrap"},S.default.createElement("div",{className:"c-fl coupon-left"},S.default.createElement("h3",{className:String(n.deduct_money).length<4?"h3-a":"h3-b"},S.default.createElement("span",null,"¥"),n.deduct_money),S.default.createElement("p",null,"满",n.limit_money,"使用")),S.default.createElement("div",{className:"c-fr coupon-right"},S.default.createElement("h3",null,ne.title(n)),S.default.createElement(Oe,{BackFlag:i,flag:!0},S.default.createElement("button",{className:"buy-button",onClick:function(a){var n=e(a.target).parent()[0].href;t.state.buttonClick&&!n&&l&&t.getCoupon()}},"立即领取")),S.default.createElement("p",{className:"coupon-right-type"},"• ",ne.text(n)),S.default.createElement("p",{className:"coupon-right-use-date"},Q.dateUtil.format(new Date(n.use_start_time.replace(/-/g,"/")).getTime(),"Y/M/D H:F").slice(2),"至 ",Q.dateUtil.format(new Date(n.use_end_time.replace(/-/g,"/")).getTime(),"Y/M/D H:F").slice(2)))))}}]),a}(),ke=t.CouponList=(0,k.connect)(Z)(Se),Ae=t.SeverArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,P.PureComponent),_(t,[{key:"render",value:function(){return S.default.createElement("div",{className:"c-pb10"},S.default.createElement(Ce,null),S.default.createElement(be,this.props),S.default.createElement(Me,this.props))}}]),t}(),be=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.showChargeMsg=function(e,t,a){switch(e){case 0:return S.default.createElement("li",null,"该商品已包邮 ",S.default.createElement("span",{className:"tag"},"包邮"));case 1:return S.default.createElement("li",null,"满 "+a+" 件包邮");case 2:return S.default.createElement("li",null,"满 "+t+" 元包邮");case 3:return S.default.createElement("li",null,"满 "+a+" 件，且满 "+t+"元包邮");case 4:return S.default.createElement("li",null,a+" kg内包邮");case 5:return S.default.createElement("li",null,"满 "+t+" 元包邮");case 6:return S.default.createElement("li",null,a+" kg内，且满 "+t+"元包邮")}},n.chooseChargeRule1=function(e){var t=n.props.retState;t.nowPrice,t.num;if(e.limit_quantity)switch(e.free_type){case 1:return n.showChargeMsg(1,null,e.limit_quantity);case 2:return n.showChargeMsg(2,e.limit_money,null);case 3:return n.showChargeMsg(3,e.limit_money,e.limit_quantity)}else switch(e.free_type){case 1:return n.showChargeMsg(4,null,e.limit_weight);case 2:return n.showChargeMsg(5,e.limit_money,null);case 3:return n.showChargeMsg(6,e.limit_money,e.limit_weight)}},n.chooseChargeRule2=function(e,t){var a=e.start_standard,r=e.start_freight,i=e.add_standard,l=e.add_freight,o=void 0,s=n.props.retState,c=s.num,u=s.weight;return i&&l&&(1===t?+e.start_standard<c*u:+e.start_standard<c)?(o=1===t?+r+Math.ceil((c*u-a)/i)*l:+r+(i&&l&&Math.ceil((c-a)/i)*l),o=parseFloat(o.toFixed(2))):o=+r,S.default.createElement("li",null,"预计运费",o,"元")},n.chooseChargeRule3=function(e){var t=e.rules;if(!(t instanceof Array)){var a=[];for(var r in t)a.push(t[r]);t=a}var i=n.props.retState,l=i.nowPrice,o=i.num,s=i.groupPrice;l=s||l;var c=String(l).split("-").length;l=1===c?l*o:n.props.data.sell_price*o;var u=void 0;return t.filter(function(e,t){(e.upper?l>=+e.boundary&&l<+e.upper:l>=+e.boundary)&&(u=e.freight)}),S.default.createElement("li",null,"预计运费",u,"元")},n.chooseAssignArea=function(e,t){return e.filter(function(a,n){var r=a.area&&a.area.split(",");return r&&r.some(function(a){if(a===t[0]||a===t[1])return e[n]})})},n.calculateCharge=function(){var e=n.props.mix.dlytmplInfo,t=n.props.areaData.areaCode,a=[],r=e.freight_conf,i=e.free_conf,l=e.valuation_type,o=e.is_free,s=n.props.retState,c=s.num,u=s.weight;if(+o)return S.default.createElement("li",null,"该商品已包邮 ",S.default.createElement("span",{className:"tag"},"包邮"));if(1===l||2===l){if(i){if((a=n.chooseAssignArea(i,t)).length>0&&(3===a[0].free_type&&(a[0].limit_weight||a[0].limit_quantity)&&a[0].limit_money||2===a[0].free_type&&a[0].limit_money||1===a[0].free_type&&(a[0].limit_quantity||a[0].limit_weight)))return n.chooseChargeRule1(a[0]);if(i[0]&&(3===i[0].free_type&&(i[0].limit_weight||i[0].limit_quantity)&&i[0].limit_money||2===i[0].free_type&&i[0].limit_money||1===i[0].free_type&&(i[0].limit_quantity||i[0].limit_weight)))return n.chooseChargeRule1(i[0])}var d=(a=n.chooseAssignArea(r,t)).length>0&&a[0],p=d.start_standard,m=d.start_freight,f=d.add_standard,h=d.add_freight;return a.length&&(""!=p&&""!=m&&""!=f&&""!=h||""!=f&&""!=h&&(1===l?u<=p:c<=p))?n.chooseChargeRule2(a[0],l):n.chooseChargeRule2(r[0],l)}return(a=n.chooseAssignArea(r,t)).length?n.chooseChargeRule3(a[0]):n.chooseChargeRule3(r[0])},j(n,a)}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.calculateCharge();return S.default.createElement("ul",{className:"charge c-fs13"},S.default.createElement("li",{className:"c-mr15"},"运费"),e)}}]),t}(),Ce=(0,k.connect)(Ie,Te)(o=function(t){function a(e){G(this,a);var t=j(this,(a.__proto__||(0,p.default)(a)).call(this,e));return t.isInArea=function(e,a){var n=t.props.mix.delivery_regions;return!(n instanceof Array)||n.some(function(t){if(t==e||t==a)return!0})},t.changeState=function(e){t.setState(e)},t.confirmAnimal=function(e,a,n,r,i,l){t.isInArea(r,i)?(n?t.props.ChangeAreaData({areaData:{area:e+"/"+a+"/"+n,areaCode:[r,i],addressData:{area:{province:{code:r,text:e},city:{code:i,text:a},district:{code:l,text:n}},detail_address:e+a+n}}}):t.props.ChangeAreaData({areaData:{area:e+"/"+a,areaCode:[r,i],addressData:{area:{province:{code:r,text:e},city:{code:i,text:a}},detail_address:e+a}}}),t.setState({animalStatus:!1,slideIn:!1,shadySlide:!1,addSlideIn:!1})):x.tip.show({msg:"不在配送区域"})},t.cancel=function(){var e=t.state,a=e.animalStatus,n=e.slideIn,r=t.props.mix.addrList,i=t.props.isLogin;!i||i&&0===r.recent_addr.length&&!r.default_addr.area?t.changeState({slideIn:!1,shadySlide:!1,addSlideIn:!1,flag:!0}):a&&n?t.changeState({slideIn:!1,flag:!0}):t.changeState({shadySlide:!1,addSlideIn:!1,flag:!0})},t.state={flag:!0,shadySlide:!1,addSlideIn:!1,addStart:!1,animalStatus:!1,slideIn:!1},t}return U(a,N.Component),_(a,[{key:"render",value:function(){var t=this,a=this.props,n=a.mix,r=a.areaData,i=a.ChangeAreaData,l=a.isLogin,o=(n.dlytmplInfo,n.addrList),s=n.storehouse&&n.storehouse.name,c=this.state,u=c.shadySlide,d=c.addSlideIn,p=c.addStart,m=c.animalStatus,f=c.slideIn,h=c.flag,g=S.default.createElement("div",{className:"addr-solected"},S.default.createElement("span",{className:"c-mr15"},"配送"),S.default.createElement("span",{className:"addr-fh"}),s,"至",S.default.createElement("i",{className:"icon place-icon"}),S.default.createElement("span",null,r.area),S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"})));return S.default.createElement("div",{className:"addr-ser"},S.default.createElement("div",{className:"shady "+(u?"":"c-dpno"),style:{height:e(window).height()},onClick:this.cancel}),S.default.createElement(xe,{addrList:o,addStart:p,shadySlide:u,flag:h,addSlideIn:d,areaData:r,animalStatus:m,slideIn:f,cancel:this.cancel,changeState:this.changeState,confirm:this.confirmAnimal,ChangeAreaData:i,isInArea:this.isInArea}),S.default.createElement("div",{className:"sever-addr"},S.default.createElement("div",{className:"addr-a",onClick:function(){t.changeState({addStart:!0,shadySlide:!0,addSlideIn:!0,flag:!1}),(!l||l&&o.recent_addr.length<0||l&&!o.default_addr)&&t.setState({animalStatus:!0,slideIn:!0})}},g)))}}]),a}())||o;function Ie(e){return w({mix:e.itemIndex.mix,areaData:e.itemIndex.areaData},e.global)}function Te(e){return{ChangeAreaData:function(t){e(Y("changeAreaData",t))}}}var xe=function(t){function a(){return G(this,a),j(this,(a.__proto__||(0,p.default)(a)).apply(this,arguments))}return U(a,N.Component),_(a,[{key:"render",value:function(){var t=this;this.props.addSlideIn?z(!0):z(!1);var a=this.props,n=a.addSlideIn,r=a.addStart,i=a.animalStatus,l=a.slideIn,o=a.addrList,s=a.areaData,c=o?o.recent_addr.length>0?o.recent_addr:o.default_addr:[],u=c.length>0&&c.map(function(a,n){var r=e(".addr-d"+n).height();return S.default.createElement("li",{key:n,className:"choose-add add-detail",style:r>19?{paddingTop:"8px"}:{paddingTop:"15px"},onClick:function(){var e=a.area,n=e.province,r=e.city,i=e.district,l=[];t.props.isInArea(a.area.province.code,a.area.city.code)?(l.push(n.code),l.push(r.code),i.code&&l.push(i.code),a.address_id=a.id,t.props.ChangeAreaData({areaData:{area:a.detail_address,areaCode:l,addressData:a}}),t.props.changeState({shadySlide:!1,addSlideIn:!1})):x.tip.show({msg:"不在配送区域"})}},S.default.createElement("img",{className:"img-l",src:s.area===a.detail_address?"/src/img/icon/orientation-icon-red.png":"/src/img/icon/orientation-icon.png"}),S.default.createElement("div",{className:"addr-d"+n+" "+(s.area===a.detail_address?"c-cdred":"")},a.detail_address))});return S.default.createElement("div",{className:"add-pop"},S.default.createElement(D.ChooseAddress,{animalStatus:i,slideIn:l,confirm:this.props.confirm}),S.default.createElement("div",{className:"animation-add "+(r?n?"animation1":"animation2":"")},S.default.createElement("div",{className:"title"},S.default.createElement("li",{className:"c-fr",onClick:this.props.cancel},S.default.createElement("img",{src:"/src/img/icon/close/icon-modal-close.png"})),S.default.createElement("li",{className:"c-c35 c-fs15"},"配送至")),S.default.createElement("ul",{className:"c-fs13 "},u,S.default.createElement("li",{className:"c-cdred choose-add",onClick:function(){t.props.changeState({animalStatus:!0,slideIn:!0})}},S.default.createElement("img",{className:"img-l",src:"/src/img/icon/choose-add.png"}),"选择其他区域"))))}}]),a}(),Me=(0,k.connect)(Be,De)(s=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.onClose=function(){n.props.ChangeSearverModal(!1)},j(n,a)}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.mix,n=t.data,r=t.searverModal,i=a.storehouse&&a.storehouse.name,l=(0,b.TradeFade)(n),o=a.delivery_regions,s=a.tags;return S.default.createElement("div",null,S.default.createElement(Pe,{mix:a,isTradeFade:l,data:n,searverModal:r,onClose:function(){return e.onClose()}}),S.default.createElement("div",{className:"goods-tax",onClick:function(){e.props.ChangeSearverModal(!0)}},S.default.createElement("ul",null,S.default.createElement("li",{className:n.support_ecard?"":"no-support"},S.default.createElement("i",{className:n.support_ecard?"detail-serve-icon":"point-notice-icon"}),n.support_ecard?"支持活动e卡":"不支持活动e卡"),l&&"DOMESTIC"!==n.trade_type?S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),"商品税费"):null,S.default.createElement("li",{className:s.free_refund?"":"no-support"},S.default.createElement("i",{className:s.free_refund?"detail-serve-icon":"point-notice-icon"}),s.free_refund?"支持":"不支持","七天无理由退换货"),n.is_free?S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),"包邮"):null,S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),"正品保证"),i?S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),i):"",S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),"担保交易"),"number"!=typeof o?S.default.createElement("li",null,S.default.createElement("i",{className:"detail-serve-icon"}),"部分区域配送"):""),S.default.createElement("p",{className:"clearfix"})))}}]),t}())||s;function Be(e){return{searverModal:e.itemIndex.searverModal}}function De(e){return{ChangeSearverModal:function(t){e(Y("changeSearverModal",{flag:t}))}}}var Pe=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.mix,a=e.isTradeFade,n=e.data,r=t.storehouse&&t.storehouse.name,i=t.delivery_regions,l=t.tags,o=(1e4*+n.tax_rate/1e4*100).toFixed(2);return S.default.createElement(B.NewModal,{isOpen:this.props.searverModal,title:"服务说明",onClose:this.props.onClose},S.default.createElement("section",{className:"modal-wrap-container",style:{height:"335px"}},S.default.createElement("ul",null,S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:n.support_ecard?"mark-icon":"no-mark-icon"})," ",n.support_ecard?"支持活动e卡":"不支持活动e卡"),S.default.createElement("div",{className:"tax-cont"},n.support_ecard?"店铺为支持活动e卡，商品贸易类型为一般贸易的商品。":"不支持活动e卡。")),a&&"DOMESTIC"!==n.trade_type?S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," 商品税费"),S.default.createElement("div",{className:"tax-cont"},"按照国家规定，本商品适用于跨境综合税，税率为",o,"%， 实际结算税费请以提交订单时的应付总额明细为准。")):null,S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:l.free_refund?"mark-icon":"no-mark-icon"})," ",l.free_refund?null:"不支持","七天无理由退换货"),S.default.createElement("div",{className:"tax-cont"},l.free_refund?"此商品支持7天无理由退换货，在商品签收之日起7天内可发起退换货申请，退回商品应不影响第二次销售":"此商品不支持七天无理由退换货")),n.is_free?S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," 包邮"),S.default.createElement("div",{className:"tax-cont"},"此商品全国地区包邮。")):null,S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," 正品保证"),S.default.createElement("div",{className:"tax-cont"},"泰然城每件商品都经过严苛的质量把关，保障正品、保障品质，杜绝一切假货，让您购物无忧。")),r?S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," ",r),S.default.createElement("div",{className:"tax-cont"},"本商品由",r,"发货。")):null,S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," 担保交易"),S.default.createElement("div",{className:"tax-cont"},"担保交易，放心购买。")),"number"!=typeof i?S.default.createElement("li",null,S.default.createElement("div",{className:"hd"},S.default.createElement("i",{className:"mark-icon"})," 部分区域配送"),S.default.createElement("div",{className:"tax-cont"},"本商品只支持部分配送区域。")):null)))}}]),t}(),Le=t.EvaluateArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,P.PureComponent),_(t,[{key:"render",value:function(){var e=this.props,t=e.rate,a=e.itemId,n=t.rates,r=t.total,i=t.good_rate_ratio;return S.default.createElement("div",{className:"evaluate-area detail"},S.default.createElement("div",{className:"hd"},S.default.createElement(A.Link,{to:"/evaluate?item_id="+a,"data-notLogin":!0},"商品评价 (",r,")",S.default.createElement("i",{className:"icon icon-forward"},S.default.createElement("span",{className:"c-cdred"},"好评",i,"%"),S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"})))),n.length>0&&S.default.createElement(Fe,{rates:n,itemId:a}))}}]),t}(),Fe=t.EvaluateAreaContents=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"getList",value:function(){var e=this.props,t=e.rates,a=e.itemId;return t.map(function(e,t){return S.default.createElement(Re,{data:e,key:t,itemId:a})})}},{key:"componentDidMount",value:function(){this.refs.swiper&&this.initSwiper()}},{key:"initSwiper",value:function(){this.swiper=new Swiper(this.refs.swiper,{loop:!1,slidesPerView:1.35})}},{key:"render",value:function(){var e=this.getList(),t=this.props.rates.length;return 7===t?S.default.createElement("div",{"data-plugin":"swiper"},S.default.createElement("div",{className:"swiper-container evaluate-swiper-container",ref:"swiper"},S.default.createElement("div",{className:"swiper-wrapper"},e,S.default.createElement("div",{className:"swiper-slide more-evaluate c-fs12 c-c666",key:t},S.default.createElement(A.Link,{to:"/evaluate?item_id="+this.props.itemId,"data-notLogin":!0},S.default.createElement("ul",{className:"more"},S.default.createElement("li",null,"查看更多"),S.default.createElement("li",{className:"line-wrap"},S.default.createElement("i",{className:"line"}," ")),S.default.createElement("li",null,"See more"))))))):null}}]),t}(),Re=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.getName=function(e){return e?e.length>2?e.substring(0,1)+"**"+e.substring(e.length-1):e:null},n.getPhone=function(e){var t=String(e);return e?t.substring(0,3)+"***"+t.substring(t.length-3):null},j(n,a)}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.itemId;return S.default.createElement("div",{className:"swiper-slide each-evaluate"},S.default.createElement(A.Link,{to:"/evaluate?item_id="+a,"data-notLogin":!0},S.default.createElement("div",{className:"c-fl",style:0===t.images.length?{width:"100%"}:{}},S.default.createElement("h2",null,S.default.createElement("div",{className:"head"},S.default.createElement("img",{src:t.head_portrait?(0,Q.addImageSuffix)(t.head_portrait,"_t"):"/src/img/icon/avatar/default-avatar.png"})),S.default.createElement("font",null,t.user_name)),S.default.createElement("div",{className:"evaluate-content"},t.content||J[t.experience])),t.images.length>0&&S.default.createElement("div",{className:"c-fr"},S.default.createElement("img",{src:(0,Q.addImageSuffix)(t.images[0],"_s")}),S.default.createElement("span",{className:"img-num"},t.images.length,"张"))),S.default.createElement("p",{className:"c-cb"}))}}]),t}(),Qe=t.LinkAndChange=function(t){function a(){return G(this,a),j(this,(a.__proto__||(0,p.default)(a)).apply(this,arguments))}return U(a,N.Component),_(a,[{key:"render",value:function(){var t=this.props,a=t.notLogin,n=t.onTouchTap,r=t.onClick,i=t.className,l=t.style,o=t.children,s=t.isLogin,c=t.to,u=t.href,d=t.flag,p=t.BackFlag,m=t.GoScrollHeght,f={onTouchTap:n,onClick:r,className:i,style:l,href:u,to:c},h={className:i,style:l,href:u,to:c};encodeURIComponent(c||location.href.slice(location.origin.length));return!0===a||s?S.default.createElement(A.Link,f,o):S.default.createElement(A.Link,w({},h,{onClick:function(t){t.preventDefault(),d?p():m(e(window).scrollTop()),A.browserHistory.push("/login?redirect_uri="+location.href)}}),o)}}]),a}(),Oe=t.LinkChange=(0,k.connect)(Z,function(e){return{GoScrollHeght:function(t){e(Y("goScrollHeght",{height:t}))}}})(Qe),Ge=t.RecommendArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,P.PureComponent),_(t,[{key:"componentDidMount",value:function(){this.refs.swiperRecommend&&this.initSwiper()}},{key:"initSwiper",value:function(){this.swiper=new Swiper(this.refs.swiperRecommend,{pagination:".swiper-pagination-recommend"})}},{key:"render",value:function(){var e=this.props.recommend,t=[],a=(t=e.length<=6?[e]:e.length>6&&e.length<=12?[e.slice(0,6),e.slice(6,e.length)]:[e.slice(0,6),e.slice(6,12),e.slice(12,e.length)]).map(function(e,t){return S.default.createElement(je,{key:t,data:e})});return e.length>0?S.default.createElement("div",{className:"recommend-area c-fs14","data-plugin":"swiper"},S.default.createElement("p",null,"为您推荐"),S.default.createElement("div",{className:"swiper-container recommend-swiper-container",ref:"swiperRecommend"},S.default.createElement("div",{className:"swiper-wrapper"},a),t.length>1&&S.default.createElement("div",{className:"swiper-pagination swiper-pagination-recommend"}))):null}}]),t}(),je=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props.data.map(function(e,t){return S.default.createElement("li",{key:t,className:"rec-item",style:(t+1)%3==0?{marginRight:"0px"}:{}},S.default.createElement(A.Link,{to:"/item?item_id="+e.item_id},S.default.createElement("div",{className:"img-wraper"},S.default.createElement("img",{src:e.images[0]&&(0,Q.addImageSuffix)(e.images[0],"_m")||"/src/img/item/no-img.png"}),e.promotion.tag&&S.default.createElement("span",{className:"tag"},e.promotion.tag)),S.default.createElement("div",{className:"title"},e.title),S.default.createElement("div",{className:"price"},S.default.createElement("span",{className:"c-fs11 c-cdred"},"¥",e.sell_price))))});return S.default.createElement("div",{className:"swiper-slide recommend-content"},e)}}]),t}(),Ue=t.ShopArea=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props.shop;return e.is_open?S.default.createElement(A.Link,{className:"link",to:"/store/home?shop="+ +e.id},S.default.createElement("div",{className:"gap bgf4"}),S.default.createElement("ul",{className:"shop-arer"},S.default.createElement("li",{className:"image"},S.default.createElement("img",{src:(0,Q.addImageSuffix)(e.logo,"_s")})),S.default.createElement("li",null,S.default.createElement("p",{className:"shop-name c-fs15"},e.alias?e.alias:e.name),S.default.createElement("p",{className:"shop-msg c-fs10 c-c999"},1===e.biz_model?"泰然城自营":"泰然城精选商家")),S.default.createElement("li",{className:"button"},"进入店铺"))):null}}]),t}(),Ye=function(t){function a(t){G(this,a);var n=j(this,(a.__proto__||(0,p.default)(a)).call(this,t));return n.onClickImage=function(t){e(t.target).height(),e(t.target).width();var a=t.target.width,r=t.target.height;n.props.changeImgData(e(t.target)[0].src,a,r)},n.state={imgUrl:""},n}return U(a,N.Component),_(a,[{key:"componentDidMount",value:function(){e(".goods-pic img").click(this.onClickImage)}},{key:"render",value:function(){var e=this.props.data;return S.default.createElement("div",null,S.default.createElement("div",{className:"goods-pic",dangerouslySetInnerHTML:{__html:e.desc&&e.desc.wap}}))}}]),a}(),qe=t.GoodsDetail=function(t){function a(e){G(this,a);var t=j(this,(a.__proto__||(0,p.default)(a)).call(this,e));return t.changeImgData=function(e,a,n){t.setState({imgSrc:e,width:a,height:n})},t.state={active:0,imgSrc:"",width:0,height:0},t}return U(a,P.PureComponent),_(a,[{key:"componentWillUnmount",value:function(){this.unMount&&this.unMount()}},{key:"componentDidMount",value:function(){this.unMount=this.mount()}},{key:"mount",value:function(){var t=e(window).height(),a=this,n=e(this.refs.twContent).offset().top;function r(){window.scrollY+t>=n&&(a.setState(a.state),e(window).unbind("scroll",r))}return e(this.refs.detail).css("min-height",t-140),e(window).bind("scroll",r),function(){return e(window).unbind("scroll",r)}}},{key:"changeTag",value:function(e){e!=this.state.active&&this.setState({active:e})}},{key:"checkTag",value:function(e){return this.state.active===e?"active":""}},{key:"getList",value:function(){var e=this.props.data,t=e.properties,a=e.art_no,n=e.shelved_at,r=e.weight,i=[S.default.createElement("li",{key:"id"},"商品编号：",S.default.createElement("span",{className:"c-fr"},a)),S.default.createElement("li",{key:"time"},n&&"上架时间：",S.default.createElement("span",{className:"c-fr"},n&&n.split(" ")[0])),S.default.createElement("li",{key:"weight"},"商品毛重：",S.default.createElement("span",{className:"c-fr"},r,"kg"))];for(var l in t)i.push(S.default.createElement("li",{key:l},t[l].name,"：",S.default.createElement("span",{className:"c-fr"},t[l].text)));return i}},{key:"render",value:function(){var t=this,a=this.props.data,n=a.trade_type,r=this.state,i=r.imgSrc,l=r.width,o=r.height;return S.default.createElement("div",{className:"pic-area detail goods-detail",ref:"twContent"},S.default.createElement(M.ItemFix,null,S.default.createElement("div",{className:"tab-ti-wrap"},S.default.createElement("div",{className:"tab-ti"},S.default.createElement("ul",null,S.default.createElement("li",{className:this.checkTag(0),onClick:function(){return t.changeTag(0)}},S.default.createElement("span",null,"商品介绍")),S.default.createElement("li",{className:this.checkTag(1),onClick:function(){return t.changeTag(1)}},S.default.createElement("span",null,"商品参数")))))),S.default.createElement("div",{className:"tab-con"},S.default.createElement("div",{className:"tw-con "+this.checkTag(0)},"Direct"==n||"Overseas"==n?S.default.createElement("div",{className:"zhiyou img-w"},S.default.createElement("img",{src:"/src/img/pintuan/zhiyou.jpg",onClick:function(a){t.changeImgData("/src/img/pintuan/zhiyou.jpg",e(window).width(),a.target.height)}})):null,S.default.createElement(Ye,{data:a,changeImgData:this.changeImgData}),"Direct"==n||"Bonded"==n||"Overseas"==n?S.default.createElement("div",{className:"goods_text img-w"},S.default.createElement("img",{src:"/src/img/pintuan/goods_text.jpg",onClick:function(a){t.changeImgData("/src/img/pintuan/goods_text.jpg",e(window).width(),a.target.height)}})):"",S.default.createElement("div",{className:"price_text img-w"},S.default.createElement("img",{src:"/src/img/pintuan/price_text.jpg",onClick:function(a){t.changeImgData("/src/img/pintuan/price_text.jpg",e(window).width(),a.target.height)}}))),S.default.createElement("div",{className:"cs-con "+this.checkTag(1),ref:"detail"},S.default.createElement("ul",{className:"goods-detail"},this.getList()))),i&&S.default.createElement(Xe,{imgSrc:i,width:l,height:o,changeImgSrc:function(){t.state.imgSrc=""}}))}}]),a}(),Xe=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.photoSwiper=function(e){a.state.gallery;var t=document.querySelectorAll(".pswp")[0],n=[{src:a.props.imgSrc,w:a.props.width,h:a.props.height}];new PhotoSwipe(t,PhotoSwipeUI_Default,n,{history:!1,focus:!1,tapToClose:!0,showAnimationDuration:0,hideAnimationDuration:0}).init()},a.state={gallery:""},a}return U(t,N.Component),_(t,[{key:"componentDidMount",value:function(){this.photoSwiper()}},{key:"componentDidUpdate",value:function(){this.photoSwiper()}},{key:"render",value:function(){return S.default.createElement("div",null,S.default.createElement("div",{className:"pswp",tabIndex:"-1",role:"dialog","aria-hidden":"true"},S.default.createElement("div",{className:"pswp__bg",onClick:this.props.changeImgSrc()}),S.default.createElement("div",{className:"pswp__scroll-wrap"},S.default.createElement("div",{className:"pswp__container"},S.default.createElement("div",{className:"pswp__item"}),S.default.createElement("div",{className:"pswp__item"}),S.default.createElement("div",{className:"pswp__item"})),S.default.createElement("div",{className:"pswp__ui pswp__ui--hidden"},S.default.createElement("div",{className:"pswp__top-bar"},S.default.createElement("div",{className:"pswp__counter"}),S.default.createElement("div",{className:"pswp__preloader"},S.default.createElement("div",{className:"pswp__preloader__icn"},S.default.createElement("div",{className:"pswp__preloader__cut"},S.default.createElement("div",{className:"pswp__preloader__donut"}))))),S.default.createElement("div",{className:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},S.default.createElement("div",{className:"pswp__share-tooltip"})),S.default.createElement("button",{className:"pswp__button pswp__button--arrow--left",title:"Previous (arrow left)"}),S.default.createElement("button",{className:"pswp__button pswp__button--arrow--right",title:"Next (arrow right)"}),S.default.createElement("div",{className:"pswp__caption"},S.default.createElement("div",{className:"pswp__caption__center"}))))))}}]),t}(),Ze=t.Collect=(0,k.connect)(We,He)(c=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.onCollect=function(){var e=n.props.favorite;if(!n.locked()){n.locked(!0);var t=w({},e?W.DelFav:W.Fav,{params:{item_id:n.props.data.item_id}});L.default.request(t).then(function(t){n.props.ChangeCollectStatus(!e),n.locked(!1)}).catch(function(e){console.log(e),x.tip.show({msg:e.response.data.message||"服务器繁忙"})})}},j(n,a)}return U(t,N.Component),_(t,[{key:"locked",value:function(e){return null!=e&&(this.update=e),this.update}},{key:"render",value:function(){var e=this,t=this.props.favorite;return S.default.createElement("div",{className:"collect"},S.default.createElement(Oe,{className:t?"save curr uncollect-goods":"save collect-goods",onClick:function(){return e.onCollect()}},t?[S.default.createElement("span",{className:"icon icon-favor text_sc",key:"0"},S.default.createElement("img",{src:"/src/img/icon/collected-icon.png"})),S.default.createElement("span",{className:"icon-title",key:"1"},"已收藏")]:[S.default.createElement("span",{className:"shoucang",key:"0"},S.default.createElement("img",{src:"/src/img/icon/collect-icon.png"})),S.default.createElement("span",{className:"icon-title",key:"1"}," 收藏")]))}}]),t}())||c;function We(e){return{favorite:e.itemIndex.favorite}}function He(e){return{ChangeCollectStatus:function(t){e(Y("changeCollectStatus",{status:t}))}}}var Ke=t.TotopAndCart=function(t){function a(){return G(this,a),j(this,(a.__proto__||(0,p.default)(a)).apply(this,arguments))}return U(a,N.Component),_(a,[{key:"componentWillUnmount",value:function(){e(window).unbind("scroll.top")}},{key:"componentDidMount",value:function(){var t=e(window),a=(t.height(),e(".toTop")),n=void 0;a.on("click",function(){clearInterval(n);var e=t.scrollTop();n=setInterval(function(){e-=100,t.scrollTop(e),e<=0&&clearInterval(n)},1)}),e(window).bind("scroll.top",function(){e(this).scrollTop()>e(window).height()?a.show():a.hide()})}},{key:"render",value:function(){var e=this.props.cartNum;return S.default.createElement("div",{className:"cart-toTop",style:(0,Q.judgeIphoneX)()?{bottom:"80px"}:{}},S.default.createElement("ul",null,S.default.createElement("div",{onClick:function(){window.sessionStorage.setItem("areaData",""),A.browserHistory.push("/shopCart")}},S.default.createElement("li",{className:"cart"},S.default.createElement("span",{className:e?e>=10?"width2":"width1":"c-dpno"},e))),S.default.createElement("li",{className:"toTop"})))}}]),a}(),Je=t.BuyModalTitle=function(t){function a(){G(this,a);var e=j(this,(a.__proto__||(0,p.default)(a)).call(this));return e.state={isLarge:!1},e}return U(a,N.Component),_(a,[{key:"getImg",value:function(){var e=this.props.data,t=this.props.retState,a=t.specKey,n=t.selectArr,r=this.props.promotion.info,i=void 0,l=void 0;return a&&a.some(function(e,t){return l=r.specs[e].values.filter(function(e,a){return e.spec_value_id==n[t]}),i=l[0].image}),i||e.primary_image}},{key:"componentDidUpdate",value:function(){this.state.isLarge&&te(".ui-table-view-large-wrapper",null,{newTime:0,oldTime:0,enlarge:!1,relativeX:0,relativeY:0,x1:0,x2:0,y1:0,startX:0,endX:0,wid:0,hei:0,lef:0,to:0,timerScale:null,self:this,isLarge:this.state.isLarge})}},{key:"render",value:function(){var t=this,a=this.props,n=(a.data,a.retState),r=a.promotion.info.specs,i=this.state.isLarge,l=this.props.retState.storeNum,o=ee(n,r);return S.default.createElement("div",null,i&&S.default.createElement("div",{className:"ui-table-view-large-img",style:{height:e(window).height(),top:e(".action-buy-modal").height()}},S.default.createElement("div",{className:"buy-shady",onClick:function(){t.setState({isLarge:!1})}}),S.default.createElement("div",{className:"ui-table-view-large-wrapper",style:{height:e(window).height()}},S.default.createElement("img",{src:(0,Q.addImageSuffix)(this.getImg(),"_l")}))),S.default.createElement("ul",{className:"ui-table-view"},S.default.createElement("li",{className:"ui-table-view-cell"},S.default.createElement("span",{className:"posit-img"},S.default.createElement("img",{className:"ui-media-object ui-pull-left",src:this.getImg()?(0,Q.addImageSuffix)(this.getImg(),"_s"):"/src/img/item/no-img.png",width:"80",height:"80",onClick:function(){t.setState({isLarge:!0})}})),S.default.createElement("div",{className:"ui-media-body window-head"},S.default.createElement("div",{className:"price-tag"},S.default.createElement("p",{className:"ui-ellipsis text-price action-update-price"},"¥",n.nowPrice)),S.default.createElement("span",{className:"c-c999"},"库存",l),!(r instanceof Array)&&o.length>0&&S.default.createElement("p",{className:"text-price-sel",style:{display:"block"}}," 已选：",o," ")))))}}]),a}(),Ve=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.initList=function(){var e=n.props.promotion.info.specs;return(0,d.default)(e).map(function(t,a){return S.default.createElement($e,w({specs:e[t],index:a},n.props,{key:a}))})},n.getLimit=function(){var e=n.props.promotion.activity_type,t=n.props.promotionData;return"FlashSale"===e?S.default.createElement("span",{className:"limit_buy"},"限购",t[e].rules.user_buy_limit,"件 (已购",t[e].purchased_quantity,"件)"):null},n.numValid=function(e){var t=n.props,a=t.addMinNum,r=t.promotionData,i=n.props.promotion.activity_type,l=n.props.retState,o=l.num,s=l.storeNum,c=l.once,u=l.min;o=+o;var d="FlashSale"===i?r[i].rules.user_buy_limit-r[i].purchased_quantity:null;switch(e){case"plus":c?(o+c<=s&&(o+=c),a(o)):!(o===s||""===o||null!==d&&o>=d||0===s)&&a(o+1);break;case"minus":o>u&&(c?o%c?o=parseInt(o/c)*c:o-c>=c&&(o-=c):o-=1,a(o))}},j(n,a)}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.changeNum,n=t.importNum,r=t.promotionData,i=t.focusNum,l=this.props.promotion.activity_type,o=this.props.retState,s=o.num,c=o.storeNum,u=o.min,d=o.once,p=o.moqAmount,m="FlashSale"===l?r[l].rules.user_buy_limit-r[l].purchased_quantity:null;return S.default.createElement("div",{className:"attr-wrap"},S.default.createElement("div",{className:"standard-area stable-standard cur"},S.default.createElement("div",{className:"standard-info"},this.initList())),S.default.createElement("div",{className:"buy-amount"},S.default.createElement("span",{className:"amount-tit row-title"},"购买数量："),!d&&p?S.default.createElement("span",{className:"c-c999 c-fs10"},"(",p,"件起售)"):"",d?S.default.createElement("span",{className:"c-c999 c-fs10"},"(",d,"倍购买)"):"",S.default.createElement("span",{className:"number-increase-decrease"},S.default.createElement("span",{className:"btn btn-action action-decrease "+(s<=u||""===s?"dis-click":""),onTouchTap:function(){e.numValid("minus")}},"－"),S.default.createElement("input",{type:"number",className:"action-quantity-input",value:s,onBlur:n,onChange:a,onFocus:i}),S.default.createElement("span",{className:"btn btn-action action-increase "+(s>=c||""===s||null!==m&&s>=m||0===c||d&&s+d>c?"dis-click":""),onTouchTap:function(){e.numValid("plus")}},"＋")),this.getLimit(),S.default.createElement("div",{className:"clearfix"})),S.default.createElement(et,this.props))}}]),t}(),ze=t.BuyModalButton=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.buyActive,a=e.onClickCart,n=e.onClickBuy,r=(e.purchaseLimit,e.toCartClick),i=e.isNonPayment,l=e.retState,o=this.props.promotion.realStore;return S.default.createElement("div",null,l.optionBtnShow?S.default.createElement("div",{className:"buy-option-btn",style:(0,Q.judgeIphoneX)()?{height:"85px"}:{}},i?S.default.createElement("div",{className:"btn-tobuy-disable",style:{width:"100%"}},"还有机会"):S.default.createElement("div",null,o?S.default.createElement("div",{className:"btn-addcart "+("chooseSpec"===t?"btn-group btn-group-cart":"buy"===t?"c-dpno":"")+" "+("cart"===t?"btn-cart-only":""),onTouchTap:r?a:"",id:"add-package"},"加入购物袋"):S.default.createElement("div",{className:"btn-tobuy-disable"},"已售罄"),S.default.createElement("div",null,null,S.default.createElement("div",{className:"btn-tobuy "+("chooseSpec"===t?"btn-group btn-group-buy":"cart"===t?"c-dpno":""),onTouchTap:function(){n(t)}},"立即购买")))):null)}}]),t}(),$e=t.Specs=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"initList",value:function(){var e=this,t=this.props,a=t.isHasStore,n=t.specs,r=(t.promotion,t.index),i=t.judgeSingleSku,l=this.props.retState,o=l.newData,s=l.selectArr,c=n.values,u=n.spec_id;return c.map(function(t,n){var l=t.spec_value_id,c=a({spec:l,index:r},o,s);return S.default.createElement("li",{key:n,onClick:function(t){!i()&&c&&e.props.specSelect(l,r,u)},className:c?i()||s[r]===l?"on":"abled":"disabled"},S.default.createElement("span",{title:t.text},"Text"!=t.show_type&&t.image?S.default.createElement("span",null,S.default.createElement("img",{src:t.image,width:"25",height:"25",style:{marginTop:"-4px"}})," ",S.default.createElement("span",null," ",t.text," ")):t.text))})}},{key:"render",value:function(){var e=this.props.specs;return S.default.createElement("div",{className:"color parameter"},S.default.createElement("span",{className:"tit row-title"},e.name),S.default.createElement("ul",{className:"size_ul"},this.initList()))}}]),t}(),et=t.ExpectTax=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.state={rateShow:!1},a}return U(t,N.Component),_(t,[{key:"getRate",value:function(){var e=this,t=this.props,a=t.data,n=t.buyActive,r=t.promotion,i=this.props.retState,l=i.nowPrice,o=i.num;if(!(0,b.TradeFade)(a)||"DOMESTIC"===a.trade_type)return null;var s=(1e4*+a.tax_rate/1e4*100).toFixed(2),c=String(l).split("-").length;l="groupBuy"===n?r.promotion[0].rules.group_price:1===c?l:a.sell_price;var u=(o="groupBuy"===n?1:o)*a.tax_rate*l;return+(u=(+u.toFixed(2)+(parseFloat((u-u.toFixed(2)).toFixed(10))>=1e-5?.01:0)).toFixed(2))?S.default.createElement("div",null,S.default.createElement("div",{className:"expect_tax",onClick:function(){return e.setState({rateShow:!e.state.rateShow})}},"预计税费",S.default.createElement("span",{className:"icon_slide c-fr "+(this.state.rateShow?"rotate":"")},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-btm-icon.png"})),S.default.createElement("span",{className:"tax_count c-fr",style:{display:this.state.rateShow?"none":"block"}},"￥",u)),S.default.createElement("div",{className:"expect_tax_con disnon",style:{display:this.state.rateShow?"block":"none"}},S.default.createElement("div",{className:"tax_count"},"￥",u),S.default.createElement("div",{className:"c-pl15 c-pr15"},S.default.createElement("div",{className:"hd"},S.default.createElement("img",{src:"/src/img/icon/checked-icon.png"})," 税率",S.default.createElement("span",{id:"tax_cou"},s),"%"),S.default.createElement("div",{className:"tax_cont tax_cont1"}," 按照国家规定，本商品适用于跨境综合税，税率为",s,"%， 实际结算税费请以提交订单时的应付总额明细为准。"),S.default.createElement("div",{className:"hd"},S.default.createElement("img",{src:"/src/img/icon/checked-icon.png"})," 税费计算"),S.default.createElement("div",{className:"tax_cont"},"进口税费=商品完税价格*税率")))):null}},{key:"render",value:function(){return this.getRate()}}]),t}(),tt=t.BuyModal=function(e){function t(e){G(this,t);var a=j(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.changeBusinessPrice=function(){var e=a.props.retState,t=(e.num,e.nowPrice),n=e.nowSkuId,r=e.storeNum,i=e.selectArr,l=e.specKey,o=e.originalPrice,s=(e.min,e.once,a.props.promotion.info.skus),c=a.props.promotion.info.specs,u=(0,d.default)(s),p=void 0;u.map(function(e){0!==s[""+e].store&&(p=e)}),p=p||u[0],t=s[p].price,o=s[p].price,n=s[p].sku_id,r=s[p].store,i=p.split("_"),l=(0,d.default)(c);var m=w({},a.props.retState,{nowPrice:t,nowSkuId:n,storeNum:r,selectArr:i,specKey:l,originalPrice:o});a.props.InitState(m)},a.judgeSingleSku=function(){var e=a.props.promotion.info.skus,t=[],n=(0,d.default)(e);return n.map(function(a){0!==e[""+a].store&&t.push(e[""+a])}),1===n.length||1===t.length},a.addMinNum=function(e){var t=a.props.retState,n=t.num,r=t.nowPrice,i=(t.nowSkuId,t.selectArr,t.oldNum);n=i=e;var l=w({},a.props.retState,{num:n,oldNum:i,nowPrice:r});a.props.InitState(l)},a.purchaseLimit=function(){var e=a.props.data.trade_type;if(a.props.retState.num>1&&a.props.retState.nowSkuId&&(0,b.PurchaseLimit)(e))return a.props.retState.num*a.props.retState.nowPrice>2e3},a.getActionData=function(e){var t=a.props,n=t.retState,r=t.promotion,i=t.areaData,l=t.data,o=l.shop_id,s=(l.shop.attr,t.itemId),c=[],u=a.props.location.query.user_id;a.props.mix&&a.props.mix.addrList;r.promotion&&r.promotion.map(function(e,t){c.push({promotion_id:e.id,role:"main_good",type:e.type})});var d={subscribe:[{quantity:n.num,cart_id:0,sku_id:n.nowSkuId,item_id:s,created_at:(new Date).getTime(),extra:{promotion:c,commission_user_id:u}}]};return d=e?w({},d,{buyMode:"fast_buy",bizMode:"online",bizAttr:"trmall",address:i.addressData}):{item_id:s,sku_id:n.nowSkuId,quantity:n.num,shop_id:o,extra:{price:n.originalPrice,commission_user_id:u}}},a.onClickCart=function(){var e=a;a.checkSpec()?x.tip.show({msg:"请选择规格"}):(e.setState({toCartClick:!1}),L.default.request(w({},W.toCart,{params:a.getActionData()})).then(function(t){e.setState({toCartClick:!0}),e.props.UpdateCartInfo(t.data.data),ae(),e.props.closeModal();var n=a.getActionData(),r=n.item_id,i=n.quantity,l=H(r,n.sku_id,i,t.status,t.data.code,"加入购物车成功");sdk.dispatch("click",document.getElementById("add-package"),l)}).catch(function(t){var n=t.response,r=n.status,i=n.data,l=n.message,o=a.getActionData(),s=o.item_id,c=o.quantity,u=H(s,o.sku_id,c,r,i.code,l);sdk.dispatch("click",document.getElementById("add-package"),u),x.tip.show({msg:t.response.data.message||"服务器繁忙"}),e.setState({toCartClick:!0})}))},a.onClickBuy=function(e){var t=a.props.location.query.item_id;if(a.checkSpec())x.tip.show({msg:"请选择规格"});else{var n=a.getActionData(!0);sessionStorage.setItem("fast_buy",(0,u.default)(n)),A.browserHistory.push("/orderConfirm?item_id="+t)}},a.isHasStore=function(e,t,a){return t&&t.some(function(t,n){if(t.ids[e.index]==e.spec){var r=a.slice();return r[e.index]&&delete r[e.index],!!r.every(function(e,n){return a[n]==t.ids[n]})&&t.skus.store>0}return!1})},a.specSelect=function(e,t,n){var r,i=a.props.retState,l=a.props.promotion.info.skus,o=a.props.promotion,s=o.realStore,c=(o.activity_type,i.selectArr),u=i.specKey,d=i.nowSku,p=i.storeNum,m=i.newData,f=i.nowSkuId,h=i.nowPrice,g=i.num,v=i.min,E=i.oldNum,y=i.deductPrice,_=i.originalPrice;(c=c.slice())[t]===e?(delete c[t],delete u[t]):(c[t]=e,u[t]=n),r=c.join("_"),c.length==m[0].ids.length&&l[r]?(d=l[r],f=l[r].sku_id,h=l[r].price,_=l[r].price,E=g=(g=+v)<(p=l[r].store)?g:p,y=l[r].deduct_price):(h=$(a.props.promotion,!0),p=s,f="",d="",y="",_="",g=+v);var N=w({},a.props.retState,{nowSku:d,selectArr:c,specKey:u,nowSkuId:f,nowPrice:h,num:g,min:v,oldNum:E,storeNum:p,deductPrice:y,originalPrice:_});a.props.InitState(N)},a.importNum=function(e){var t=+e.target.value,n=void 0,r=a.props.retState,i=r.num,l=r.storeNum,o=r.nowPrice,s=r.once,c=r.oldNum,u=r.min,d=(r.optionBtnShow,a.props),p=d.promotionData,m=d.promotion.activity_type,f="FlashSale"===m?p[m].rules.user_buy_limit-p[m].purchased_quantity:null;t?s?t%s?(i=c,n="仅支持"+s+"倍购买"):i=c=t>l?l:t:t<u?(n="该商品"+u+"件起售",i=l<u?c=l:c):i=c=l<u?l:t>l?l:t:i=c,f&&(i=c=i>f?f:i),n&&x.tip.show({msg:n});var h=w({},a.props.retState,{num:i,oldNum:c,nowPrice:o,optionBtnShow:!0});a.props.InitState(h)},a.changeNum=function(e){var t=a.props.retState.num;t=e.target.value.replace(/[^\d]/g,"");var n=w({},a.props.retState,{num:t});a.props.InitState(n)},a.focusNum=function(){a.props.retState.optionBtnShow;var e=w({},a.props.retState,{optionBtnShow:!1});a.props.InitState(e)},a.state={toCartClick:!0},a}return U(t,N.Component),_(t,[{key:"componentWillMount",value:function(){this.judgeSingleSku()&&this.changeBusinessPrice()}},{key:"checkSpec",value:function(){var e=this.props.retState,t=e.specKey,a=e.nowSkuId,n=this.props.promotion.info.specs;return!a&&((0,d.default)(n).filter(function(e,a){return+e!==t[a]}),!0)}},{key:"render",value:function(){var e=w({focusNum:this.focusNum,addMinNum:this.addMinNum,changeNum:this.changeNum,importNum:this.importNum,isHasStore:this.isHasStore,onClickCart:this.onClickCart,onClickBuy:this.onClickBuy,specSelect:this.specSelect,judgeSingleSku:this.judgeSingleSku,purchaseLimit:this.purchaseLimit,retState:this.props.retState,promotion:this.props.promotion,promotionData:this.props.promotionData,data:this.props.data,buyActive:this.props.buyActive,isNonPayment:this.props.isNonPayment},this.state);return S.default.createElement(B.NewModal,{isOpen:this.props.buyModal,onClose:this.props.closeModal},S.default.createElement("div",{className:"action-buy-modal",style:(0,Q.judgeIphoneX)()?{paddingBottom:"34px"}:{}},S.default.createElement(Je,e),S.default.createElement(Ve,e),S.default.createElement(ze,e)))}}]),t}(),at=t.Buy=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.active=function(e){n.props.UpdateBuyModal({buyModal:!0,buyActive:e})},n.isNonPayment=function(){var e=n.props.promotion,t=e.activity_type,a=e.realStore;if(t){var r=n.props.promotionData[""+t],i=r.activity_sales,l=r.activity_store;if(!a)return i!==l}},j(n,a)}return U(t,N.Component),_(t,[{key:"render",value:function(){var e=this;return this.props.mixStatus&&this.props.proStatus?S.default.createElement("div",null,this.props.choose?S.default.createElement(Oe,{className:"choose-btn",onClick:function(){e.active("chooseSpec")}}):this.props.data.is_charge?null:"SHELVING"===this.props.data.status?this.isNonPayment()?S.default.createElement("div",{className:"action-btn-group c-fr"},S.default.createElement(Oe,{type:"button",className:"ui-btn action-disable"},"还有机会")):this.props.promotion.realStore?S.default.createElement("div",{className:"action-btn-group c-fr"},S.default.createElement(Oe,{className:"ui-btn  action-addtocart c-fl",onClick:function(){e.active("cart")}},"加入购物袋"),S.default.createElement(Oe,{className:"ui-btn  action-buy-now c-fl",onClick:function(){e.active("buy")}},"立即购买")):S.default.createElement("div",{className:"action-btn-group c-fr"},S.default.createElement(Oe,{type:"button",className:"ui-btn action-disable"},"已售罄")):S.default.createElement("div",{className:"action-btn-group c-fr"},S.default.createElement(Oe,{type:"button",className:"ui-btn action-disable"},"已下架"))):S.default.createElement("div",{className:"action-btn-group c-fr"},S.default.createElement("span",{className:"ui-btn  action-addtocart c-fl incomplete-addtocart"},"加入购物袋"),S.default.createElement("span",{className:"ui-btn  action-buy-now c-fl incomplete-buy-now"},"立即购买"))}}]),t}(),nt=(t.createBuyAction=function(e){var t=e.Buy;return function(e){function a(){return G(this,a),j(this,(a.__proto__||(0,p.default)(a)).apply(this,arguments))}return U(a,P.PureComponent),_(a,[{key:"render",value:function(){var e=this.props,a=e.data,n=e.data.shop.attr,r=e.mix,i=e.cartNum,l=e.cartInfoStatus,o=e.mixStatus;return S.default.createElement("div",{className:"buy-action",style:(0,Q.judgeIphoneX)()?{height:"85px"}:{}},S.default.createElement("div",{className:"collect serve_kf"},S.default.createElement(A.Link,{to:"/homeIndex",className:"save"},S.default.createElement("span",{className:"details_kf"},S.default.createElement("img",{src:"/src/img/icon/home-icon.png"})),S.default.createElement("span",{className:"icon-title"},"首页"))),S.default.createElement("div",{className:"collect serve_kf"},S.default.createElement(T.CustomerService,{className:"save",shopAttr:n},S.default.createElement("span",{className:"details_kf"},S.default.createElement("img",{src:"/src/img/icon/serve-phone-icon.png"})),S.default.createElement("span",{className:"icon-title"},"客服"))),S.default.createElement(Ze,{mix:r,data:a,mixStatus:o}),l&&S.default.createElement(Ke,{cartNum:i}),S.default.createElement(t,this.props))}}]),a}()})({Buy:at}),rt=(t.createChooseSpec=function(e){var t=e.Buy;return function(e){function a(){return G(this,a),j(this,(a.__proto__||(0,p.default)(a)).apply(this,arguments))}return U(a,P.PureComponent),_(a,[{key:"render",value:function(){var e=this.props.promotion.info.specs,a=this.props,n=a.retState,r=a.data,i=a.promotion,l=ee(n,e);return e instanceof Array?null:S.default.createElement("div",{className:"choose-col"},S.default.createElement("div",{className:"choose-spec c-fs13"},S.default.createElement("span",{className:"c-mr15"},l.length>0?"已选择 ":"选择 "),l.length>0&&ee(n,e),S.default.createElement("i",{className:"icon icon-forward vertical-middle"},S.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"}))),"SHELVING"===r.status&&i.realStore?S.default.createElement(t,w({},this.props,{choose:!0})):null,S.default.createElement("div",{className:"gap bgf4"}))}}]),a}()})({Buy:at}),it=t.BarrageStripWrap=function(e){function t(){return G(this,t),j(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return U(t,N.Component),_(t,[{key:"componentWillMount",value:function(){this.props.getBarrage()}},{key:"render",value:function(){return this.props.barrage?S.default.createElement(R.BarrageStrip,{data:this.props.barrage,reset:this.props.resetBarrage}):null}}]),t}(),lt=t.BarrageStripConnnect=(0,k.connect)(R.homePageState,R.homePageDispatch)(it),ot=function(e){function t(){var e,a,n;G(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=n=j(this,(e=t.__proto__||(0,p.default)(t)).call.apply(e,[this].concat(i))),n.closeModal=function(){n.props.UpdateBuyModal({buyModal:!1})},n.isNonPayment=function(){var e=n.props.promotion,t=e.activity_type,a=e.realStore;if(t){var r=n.props.promotionData[""+t],i=r.activity_sales,l=r.activity_store;if(!a)return i!==l}},j(n,a)}return U(t,N.Component),_(t,[{key:"componentWillUnmount",value:function(){window.sessionStorage.removeItem("dcpPageTitle")}},{key:"render",value:function(){var e=this.props,t=e.location,a=e.data,n=e.mix,r=e.rate,i=e.recommend,l=e.promotion,o=e.cartNum,s=e.isLogin,c=e.pending,u=e.mixStatus,d=e.rateStatus,p=e.recommendStatus,m=e.proStatus,f=e.cartInfoStatus,h=e.retState,g=e.areaData,v=e.UpdateBuyModal,E=e.InitState,y=e.OrderInitParams,_=e.UpdateCartInfo,N=e.buyModal,k=e.buyActive,A=e.promotionData,b=e.intervalT,C=a.item_id,I={itemId:C,location:t,retState:h,data:a,mix:n,promotion:l,promotionData:A,mixStatus:u,proStatus:m,buyModal:N,buyActive:k,UpdateBuyModal:v,InitState:E,UpdateCartInfo:_,OrderInitParams:y,areaData:g},T=w({},I,{isNonPayment:this.isNonPayment(),closeModal:this.closeModal});return S.default.createElement("div",{"data-page":"item-detail",id:"item-details",ref:"details"},S.default.createElement(lt,null),S.default.createElement(re,null),u&&m&&S.default.createElement(tt,T),S.default.createElement("div",null,S.default.createElement(ie,{data:a,ref:"scrollImage"}),S.default.createElement(le,{data:a,proStatus:m,promotion:l,intervalT:b}),m&&S.default.createElement(me,{promotion:l,shop:a.shop,retState:h}),S.default.createElement("div",{className:"gap bgf4"}),u&&m&&S.default.createElement(rt,I),u&&S.default.createElement(Ae,{mix:n,data:a,retState:h,areaData:g,isLogin:s,pending:c}),S.default.createElement("div",{className:"gap bgf4"})),S.default.createElement("div",{className:"screen-rate"},d&&S.default.createElement(Le,{rate:r,itemId:C}),S.default.createElement("div",{className:"gap bgf4"}),p&&S.default.createElement(Ge,{recommend:i.data}),S.default.createElement("div",{className:"gap bgf4"}),S.default.createElement(Ue,{shop:a.shop})),S.default.createElement("div",{className:"screen-detail"},S.default.createElement(qe,{data:a})),S.default.createElement(nt,w({cartNum:o,cartInfoStatus:f},I)))}}]),t}();t.default=ot}).call(this,a("OOjC"))},Wkbk:function(e,t,a){"use strict";(function(e){var n=d(a("mvHQ")),r=d(a("fZjL")),i=d(a("Zx67")),l=d(a("kiBT")),o=d(a("OvRC")),s=d(a("pFYg")),c=d(a("C4MV")),u=d(a("woOf"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.createChooseSpec=t.ActiveArea=t.Buy=t.BuyModalButton=t.BuyModalTitle=t.BuyModal=void 0;var p=u.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,c.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a("U7vG"),h=A(f),g=(A(a("O27J")),a("Zfgq")),v=a("rsfq"),E=(a("d2xe"),a("6quk")),y=(a("fw66"),a("8x+B")),_=a("XKGu"),w=A(a("qAHI")),N=a("JmOZ"),S=a("f2t5");a("kjFZ");var k=a("JmOZ");function A(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,s.default)(t))&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,s.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.default?(0,l.default)(e,t):e.__proto__=t)}var T=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,_.PureComponent),m(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"notice-group-price"},h.default.createElement(x,{item:this.props.data,proStatus:this.props.proStatus,promotion:this.props.promotion}),this.props.proStatus&&h.default.createElement(M,p({},this.props.promotion.promotion[0],{intervalT:this.props.intervalT})))}}]),t}(),x=function(e){function t(e){b(this,t);var a=C(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={sellPrice:parseFloat((+a.props.item.sell_price).toFixed(2)),marketPrice:parseFloat((+a.props.item.market_price).toFixed(2)),groupPerson:""},a}return I(t,f.Component),m(t,[{key:"componentWillReceiveProps",value:function(e){e.proStatus&&this.setState({sellPrice:e.promotion.promotion[0].rules.group_price,groupPerson:e.promotion.promotion[0].rules.group_person})}},{key:"componentDidMount",value:function(){this.props.proStatus&&this.setState({sellPrice:this.props.promotion.promotion[0].rules.group_price,groupPerson:this.props.promotion.promotion[0].rules.group_person})}},{key:"render",value:function(){var e=this.props.item,t=(e.is_free,e.trade_type,e.tax_rate,this.state),a=t.sellPrice,n=t.marketPrice,r=t.groupPerson;return h.default.createElement("div",{className:"c-cfff"},h.default.createElement("span",{className:"c-fs10 c-dpib c-fl group-person"},r,"人团"),h.default.createElement("span",{className:"c-fs20 c-dpib c-fl"}," ¥",a),n&&n!==a?h.default.createElement("span",{className:"c-dpib c-fl market-price"}," ¥",n):null)}}]),t}(),M=function(e){function t(e){b(this,t);var a=C(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.changeTime=function(){var e=a.props,t=e.start_time,n=e.now_time,r=e.end_time,i=a.state.intervalT;n=new Date(n.replace(/-/g,"/")).getTime()+parseInt(i),t=new Date(t.replace(/-/g,"/")).getTime(),r=new Date(r.replace(/-/g,"/")).getTime(),n<t?a.setState({time:parseInt((t-n)/1e3),startFlag:!0}):a.setState({time:parseInt((r-n)/1e3),startFlag:!1})},a.state={time:0,startFlag:!1,intervalT:a.props.intervalT},a}return I(t,f.Component),m(t,[{key:"componentDidMount",value:function(){this.changeTime(),this.intervalTime()}},{key:"componentWillReceiveProps",value:function(e){e.intervalT!==this.state.intervalT&&this.setState({intervalT:e.intervalT},function(){this.changeTime(),window.clearInterval(this.timer),this.timer=null,this.intervalTime()})}},{key:"intervalTime",value:function(){var e=this;this.timer=setInterval(function(){var t=--e.state.time;t<0?location.reload():(e.state.time=t,e.setState(e.state))},1e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){return h.default.createElement("div",{className:"c-cfff c-fs12 c-fr group-purchase-deadLine",id:"group-purchase-deadLine"},h.default.createElement("div",null,this.state.startFlag?"距开始仅剩":"距结束仅剩"),h.default.createElement("div",null,S.timeCtrl.formatTextTime(this.state.time)))}}]),t}(),B=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this.props.data.vip_info;return h.default.createElement("div",{className:"price-area"},h.default.createElement(k.VipArea,{vipInfo:e}),h.default.createElement(D,this.props),h.default.createElement(k.Tag,{item:this.props.data}))}}]),t}(),D=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this.props.data,t=e.title,a=e.sub_title;e.shop;return h.default.createElement("div",null,h.default.createElement("p",{className:"goods-tit"},t),this.props.proStatus&&"Rookie"===this.props.promotion.promotion[0].rules.group_type?h.default.createElement("p",{className:"c-c666 sub-title"},"该商品所有用户均可开团，仅限泰然城购物的新用户参团哦！开团后邀请泰然城新朋友参团吧"):a&&h.default.createElement("p",{className:"c-c666 sub-title"},a))}}]),t}(),P=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this.props,t=e.promotion,a=e.location;return h.default.createElement("div",{className:"fight-group-active"},h.default.createElement("div",{className:"c-fs12 fight-group-top"},"支付开团并邀请",h.default.createElement("span",null,t.promotion[0].rules.group_person-1),"人参团，人数不足退款"),h.default.createElement(g.Link,{to:"/pintuan-rules",className:"fight-group-rules"},h.default.createElement("p",{className:"c-fs15 c-cf55 c-mb5"},"拼团玩法"),h.default.createElement("img",{src:"src/img/pintuan/group-rules.png"}),h.default.createElement("img",{className:"direction-right-icon",src:"src/img/pintuan/black-direction-right.png"})),h.default.createElement(L,{promotion:t,location:a}))}}]),t}(),L=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"getDetailList",value:function(){var e=this.props.promotion.groupBuy,t=e.group_info,a=e.group_data,n=this.props.location,r=[];return t&&t.forEach(function(e,t){r.push(h.default.createElement(F,{key:t,data:e,groupData:a,location:n}))}),r}},{key:"render",value:function(){var e=this.props.promotion.groupBuy.group_info;return e?h.default.createElement("div",{className:"fight-group-detail"},e.length?h.default.createElement("h3",null,h.default.createElement("i",{className:"current-icon"},h.default.createElement("img",{src:"src/img/pintuan/red-current-icon.png",alt:""})),"以下小伙伴正在发起团购，您可以直接参与"):null,h.default.createElement("ul",{className:"participants"},this.getDetailList())):null}}]),t}(),F=function(e){function t(e){b(this,t);var a=C(this,(t.__proto__||(0,i.default)(t)).call(this,e)),n=a.props.location.query.user_id;return a.state={user_id:n},a}return I(t,f.Component),m(t,[{key:"componentWillMount",value:function(){var e=this.props.data,t=e.expire_time,a=e.now_time;t=new Date(t.replace(/-/g,"/")).getTime(),(a=new Date(a.replace(/-/g,"/")).getTime())>t&&(this.state.unUpdate=!0)}},{key:"componentDidMount",value:function(){var e=this.props.data,t=e.expire_time,a=e.now_time;t=new Date(t.replace(/-/g,"/")).getTime(),a=new Date(a.replace(/-/g,"/")).getTime(),this.unUpdate||(this.state.time=(t-a)/1e3,this.intervalTime())}},{key:"intervalTime",value:function(){var e=this;this.timer=setTimeout(function(){var t=--e.state.time;t<0?e.state.unUpdate=!0:(e.state.time=t,e.intervalTime()),e.setState(e.state)},1e3)}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.timer),this.timer=null}},{key:"getTime",value:function(){return this.state.unUpdate?"团已过期":S.timeCtrl.formatTime(this.state.time)}},{key:"getName",value:function(e,t){return e?e.length>2?e.substring(0,1)+"**"+e.substring(e.length-1):e:t&&t.replace(/(\d{3})\d{5}(\d{3})/,"$1*****$2")}},{key:"render",value:function(){var e=this.props.data,t=this.state.user_id;return h.default.createElement("li",null,h.default.createElement("div",{className:"list-detail"},h.default.createElement("div",{className:"list-left"},h.default.createElement("div",{className:"participants-name"},this.getName(e.nickname,e.name)),h.default.createElement("div",{className:"group-info"},h.default.createElement("div",{className:"group-info-residue"},"还差",e.required_person-e.current_person,"人成团"),h.default.createElement("div",{className:"group-info-time"},this.getTime()))),h.default.createElement(k.LinkChange,{className:"list-right",to:t?"/groupDetail?object_id="+e.id+"&user_id="+t+"&&itemFlag=true":"/groupDetail?object_id="+e.id+"&&itemFlag=true"},"去参团",h.default.createElement("i",{className:"group-direction-right"}))),h.default.createElement("img",{className:"participants-avatar",src:e.avatar||"/src/img/icon/avatar/default-avatar.png",alt:"头像"}))}}]),t}(),R=t.BuyModal=function(e){function t(e){b(this,t);var a=C(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.judgeSingleSku=function(){var e=a.props.promotion.info.skus,t=[],n=(0,r.default)(e);return n.map(function(a){0!==e[""+a].store&&t.push(e[""+a])}),1===n.length||1===t.length},a.changeBusinessPrice=function(){var e=a.props.retState,t=(e.num,e.nowPrice),n=e.nowSkuId,i=e.storeNum,l=e.selectArr,o=e.specKey,s=e.originalPrice,c=a.props.promotion.info.skus,u=a.props.promotion.info.specs,d=(0,r.default)(c),m=void 0;d.map(function(e){0!==c[""+e].store&&(m=e)}),m=m||d[0],t=c[m].price,s=c[m].price,n=c[m].sku_id,i=c[m].store,l=m.split("_"),o=(0,r.default)(u);var f=p({},a.props.retState,{nowPrice:t,nowSkuId:n,storeNum:i,selectArr:l,specKey:o,originalPrice:s});a.props.InitState(f)},a.addMinNum=function(e){var t=a.props.retState,n=t.num,r=t.nowPrice;t.nowSkuId,t.selectArr;n=n+e;var i=p({},a.props.retState,{num:n,nowPrice:r});a.props.InitState(i)},a.purchaseLimit=function(){var e=a.props.data.trade_type;if(a.props.retState.num>1&&a.props.retState.nowSkuId&&(0,v.PurchaseLimit)(e))return a.props.retState.num*a.props.retState.nowPrice>2e3},a.getActionData=function(e){var t=a.props,n=t.retState,r=t.promotion,i=t.areaData,l=t.data,o=l.shop_id,s=(l.shop.attr,t.itemId),c=[],u=a.props.location.query.user_id,d=a.props.mix&&a.props.mix.addrList;d&&(d.recent_addr.length>0&&d.recent_addr[0].addr_id||d.default_addr&&d.default_addr.addr_id);r.promotion&&r.promotion.map(function(e,t){c.push({promotion_id:e.id,role:"main_good",type:e.type})});var m={subscribe:[{quantity:1,cart_id:0,sku_id:n.nowSkuId,item_id:s,created_at:(new Date).getTime(),extra:{group_buy_params:{type:r.promotion[0].rules.group_type,object_id:a.props.data.object_id||0,mode:a.props.data.object_id?"join":"open"},promotion:c,commission_user_id:u}}]};return m=e?p({},m,{buyMode:"fast_buy",bizMode:"online",bizAttr:"trmall",address:i.addressData}):{item_id:s,sku_id:n.nowSkuId,quantity:n.num,shop_id:o,extra:{price:n.originalPrice,commission_user_id:u}}},a.isHasStore=function(e,t,a){return t&&t.some(function(t,n){if(t.ids[e.index]==e.spec){var r=a.slice();return r[e.index]&&delete r[e.index],!!r.every(function(e,n){return a[n]==t.ids[n]})&&t.skus.store>0}return!1})},a.specSelect=function(e,t,n){var r,i=a.props.retState,l=a.props.promotion.info.skus,o=a.props.promotion,s=o.realStore,c=(o.activity_type,i.selectArr),u=i.specKey,d=i.nowSku,m=i.storeNum,f=i.newData,h=i.nowSkuId,g=i.nowPrice,v=i.num,E=i.deductPrice,y=i.originalPrice;(c=c.slice())[t]===e?(delete c[t],delete u[t]):(c[t]=e,u[t]=n),r=c.join("_"),c.length==f[0].ids.length&&l[r]?(d=l[r],h=l[r].sku_id,g=l[r].price,m=l[r].store,y=l[r].price,v=v<m?v:m,E=l[r].deduct_price):(g=(0,k.rangePrice)(a.props.promotion,!0),m=s,h="",d="",E="",y="");var _=p({},a.props.retState,{nowSku:d,selectArr:c,specKey:u,nowSkuId:h,nowPrice:g,num:v,storeNum:m,deductPrice:E,originalPrice:y});a.props.InitState(_)},a.importNum=function(e){var t=e.target.value,n=a.props.retState,r=n.num,i=n.storeNum;if(!t){r=a.preNum||i;var l=p({},a.props.retState,{num:r});a.props.InitState(l)}},a.changeNum=function(e){var t=a.props.retState,n=t.num,r=(t.nowSku,t.storeNum),i=e.target.value;a.preNum=n,n=+(i=i.replace(/[^\d]/g,""))?+i>r?n:+i:"";var l=p({},a.props.retState,{num:n});a.props.InitState(l)},a.onClickBuy=function(e){var t=a.props,r=t.itemId,i=t.data.object_id,l=t.promotion;if(a.checkSpec())E.tip.show({msg:"请选择规格"});else{var o=!("groupBuy"!==e&&!a.props.active);if(o)w.default.request(p({},k.pageApi.CheckGroupBuy,{params:{promotion_id:l.promotion[0].id,object_id:i||0,group_type:l.promotion[0].rules.group_type}})).then(function(){var t=a.getActionData(o);sessionStorage.setItem("fast_buy",(0,n.default)(t)),a.props.UpdateBuyModal({buyModal:!a.props.active,buyActive:a.props.active?"":e}),g.browserHistory.push("/orderConfirm?item_id="+r)}).catch(function(e){console.log(e),E.tip.show({msg:e.response&&e.response.data.message||"服务器繁忙"})});else{var s=a;s.setState({toCartClick:!1}),w.default.request(p({},k.pageApi.toCart,{params:a.getActionData()})).then(function(e){s.setState({toCartClick:!0}),s.props.UpdateCartInfo(e.data.data),(0,k.flyToCart)(),s.props.closeModal();var t=a.getActionData(),n=t.item_id,r=t.quantity,i=t.sku_id,l=(0,k.setExtraInfo)(n,i,r,e.status,e.data.code,"加入购物车成功");sdk.dispatch("click",document.getElementById("add-package"),l)}).catch(function(e){var t=e.response,n=t.status,r=t.data,i=t.message,l=a.getActionData(),o=l.item_id,s=l.quantity,c=l.sku_id,u=(0,k.setExtraInfo)(o,c,s,n,r.code,i);sdk.dispatch("click",document.getElementById("add-package"),u),E.tip.show({msg:e.response.data.message||"服务器繁忙"})})}}},a.state={toCartClick:!0},a}return I(t,f.Component),m(t,[{key:"componentWillMount",value:function(){this.judgeSingleSku()&&this.changeBusinessPrice()}},{key:"checkSpec",value:function(){var e=this.props.retState,t=e.specKey,a=e.nowSkuId,n=this.props.promotion.info.specs;return!a&&((0,r.default)(n).filter(function(e,a){return+e!==t[a]}),!0)}},{key:"render",value:function(){var e=p({addMinNum:this.addMinNum,changeNum:this.changeNum,importNum:this.importNum,isHasStore:this.isHasStore,specSelect:this.specSelect,judgeSingleSku:this.judgeSingleSku,onClickBuy:this.onClickBuy,purchaseLimit:this.purchaseLimit},this.state,this.props);return h.default.createElement(y.NewModal,{isOpen:this.props.buyModal,onClose:this.props.closeModal},h.default.createElement("div",{className:"action-buy-modal",style:(0,S.judgeIphoneX)()?{paddingBottom:"34px"}:{}},h.default.createElement(Q,e),h.default.createElement(O,e),h.default.createElement(G,e)))}}]),t}(),Q=t.BuyModalTitle=function(t){function a(){b(this,a);var e=C(this,(a.__proto__||(0,i.default)(a)).call(this));return e.state={isLarge:!1},e}return I(a,f.Component),m(a,[{key:"componentDidUpdate",value:function(){if(this.state.isLarge){var e={newTime:0,oldTime:0,enlarge:!1,relativeX:0,relativeY:0,x1:0,x2:0,y1:0,startX:0,endX:0,wid:0,hei:0,lef:0,to:0,timerScale:null,self:this,isLarge:this.state.isLarge};(0,k.scaleImg)(".ui-table-view-large-wrapper",null,e)}}},{key:"getImg",value:function(){var e=this.props.data,t=this.props.retState,a=t.specKey,n=t.selectArr,r=this.props.promotion.info,i=void 0,l=void 0;return a&&a.some(function(e,t){return l=r.specs[e].values.filter(function(e,a){return e.spec_value_id==n[t]}),i=l[0].image}),i||e.primary_image}},{key:"render",value:function(){var t=this,a=this.props,n=(a.data,a.retState),r=a.promotion,i=a.buyActive,l=r.info.specs,o=(0,k.chooseSpec)(n,l),s=parseFloat(parseFloat(n.groupPrice).toFixed(2));return h.default.createElement("div",null,this.state.isLarge&&h.default.createElement("div",{className:"ui-table-view-large-img",style:{height:e(window).height(),top:e(".action-buy-modal").height()}},h.default.createElement("div",{className:"buy-shady",onClick:function(){t.setState({isLarge:!1})}}),h.default.createElement("div",{className:"ui-table-view-large-wrapper",style:{height:e(window).height()}},h.default.createElement("img",{src:(0,S.addImageSuffix)(this.getImg(),"_l")}))),h.default.createElement("ul",{className:"ui-table-view"},h.default.createElement("li",{className:"ui-table-view-cell"},h.default.createElement("span",{className:"posit-img"},h.default.createElement("img",{className:"ui-media-object ui-pull-left",src:this.getImg()?(0,S.addImageSuffix)(this.getImg(),"_s"):"/src/img/item/no-img.png",width:"80",height:"80",onClick:function(){t.setState({isLarge:!0})}})),h.default.createElement("div",{className:"ui-media-body window-head"},h.default.createElement("div",{className:"price-tag"},h.default.createElement("p",{className:"ui-ellipsis text-price action-update-price"},"¥","buy"===i?n.nowPrice:s)),!(l instanceof Array)&&o.length>0&&h.default.createElement("p",{className:"text-price-sel",style:{display:"block"}}," 已选 ",o," ")))))}}]),a}(),O=function(e){function t(){var e,a,n;b(this,t);for(var l=arguments.length,o=Array(l),s=0;s<l;s++)o[s]=arguments[s];return a=n=C(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(o))),n.initList=function(){var e=n.props.promotion.info.specs;return(0,r.default)(e).map(function(t,a){return h.default.createElement(k.Specs,p({specs:e[t],index:a},n.props,{key:a}))})},n.getLimit=function(){var e=n.props.data.activity_type,t=n.props.promotion.itemRules;return"groupBuy"==e?h.default.createElement("span",{className:"limit_buy"},"限购",t.user_buy_limit,"件 (已购",t.purchased_quantity,"件)"):null},C(n,a)}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this.props,t=e.addMinNum,a=e.changeNum,n=e.importNum,r=e.buyActive,i=(this.props.promotion.itemRules,this.props.retState),l=i.num,o=i.storeNum;return h.default.createElement("div",{className:"attr-wrap"},h.default.createElement("div",{className:"standard-area stable-standard cur"},h.default.createElement("div",{className:"standard-info"},this.initList())),h.default.createElement("div",{className:"buy-amount"},h.default.createElement("span",{className:"amount-tit"},"数量："),"buy"===r?h.default.createElement("span",{className:"number-increase-decrease"},h.default.createElement("span",{className:"btn btn-action action-decrease "+(1===l||""===l?"dis-click":""),onTouchTap:1===l||""===l?"":function(){return t(-1)}},"－"),h.default.createElement("input",{type:"number",className:"action-quantity-input",value:l,onBlur:n,onChange:a}),h.default.createElement("span",{className:"btn btn-action action-increase "+(l===o||""===l||0===o?"dis-click":""),onTouchTap:l===o||""===l||0===o?"":function(){return t(1)}},"＋")):h.default.createElement("span",{className:"number-increase-decrease"},h.default.createElement("span",{className:"btn btn-action action-decrease dis-click"},"－"),h.default.createElement("input",{type:"text",className:"action-quantity-input",readOnly:!0,value:"1"}),h.default.createElement("span",{className:"btn btn-action action-increase dis-click"},"＋")),h.default.createElement("span",{className:"store_buy"},"库存",o,"件"),this.getLimit(),h.default.createElement("div",{className:"clearfix"})),h.default.createElement(k.ExpectTax,this.props))}}]),t}(),G=t.BuyModalButton=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this.props,t=e.onClickBuy,a=(e.purchaseLimit,e.toCartClick),n=e.buyActive,r=(e.singleBuy,e.active),i=e.intervalT,l=e.promotion,o=0,s=0;l.promotion[0]&&(s=l.promotion[0].now_time,o=l.promotion[0].start_time,s=new Date(s.replace(/-/g,"/")).getTime()+parseInt(i),o=new Date(o.replace(/-/g,"/")).getTime());return h.default.createElement("div",{className:"buy-option-btn",style:(0,S.judgeIphoneX)()?{height:"85px"}:{}},s<o&&"groupBuy"===n?h.default.createElement("div",{className:"c-bgfc15",onClick:function(){E.tip.show({msg:"拼团还未开始，请耐心等待哦~"})}},"即将开始"):h.default.createElement("div",null,null,h.default.createElement("div",{className:"btn-tobuy btn-group",style:{width:"100%"},onTouchTap:function(){"groupBuy"===n?t(n):a&&t()}},r?"确定":"groupBuy"===n?"立即开团":"确定")))}}]),t}(),j=t.Buy=function(e){function t(){var e,a,n;b(this,t);for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=n=C(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.active=function(e,t){t&&n.setState({singleBuy:!0}),n.props.UpdateBuyModal({buyModal:!0,buyActive:e})},C(n,a)}return I(t,f.Component),m(t,[{key:"render",value:function(){var e=this,t=this.props.proStatus&&this.props.promotion.promotion[0],a=t.rules,n=t.now_time,r=t.start_time;n=n&&new Date(n.replace(/-/g,"/")).getTime()+parseInt(this.props.intervalT),r=r&&new Date(r.replace(/-/g,"/")).getTime();var i=this.props,l=i.promotion,o=i.data,s=this.props.proStatus&&(0,k.rangePrice)(this.props.promotion,!0);return this.props.mixStatus&&this.props.proStatus?h.default.createElement("div",null,this.props.choose?h.default.createElement(k.LinkChange,{className:"choose-btn",onClick:function(){e.active("groupBuy")}}," "):"SHELVING"===o.status?l.realStore?h.default.createElement("div",{className:"pintuan-btn-group"},n<r?h.default.createElement(k.LinkChange,{className:"fight-group-start"},h.default.createElement("div",{id:"person-price"},"￥",parseFloat((+a.group_price).toFixed(2))),h.default.createElement("div",{onClick:function(){E.tip.show({msg:"拼团还未开始，请耐心等待哦~"})}},"即将开始")):h.default.createElement(k.LinkChange,{className:"fight-group-purchase",onClick:function(){return e.active("groupBuy")}},h.default.createElement("div",{id:"group-price"},"￥",parseFloat((+a.group_price).toFixed(2))),h.default.createElement("div",null,a.group_person,"人团")),h.default.createElement(k.LinkChange,{className:"buy-separately-btn",onClick:function(){return e.active("buy",!0)}},h.default.createElement("div",{id:"person-price"},"￥",s),h.default.createElement("div",null,"加入购物袋"))):h.default.createElement("div",{className:"pintuan-btn-group action-btn-group"},h.default.createElement(k.LinkChange,{type:"button",className:"ui-btn action-disable"},"已售罄")):h.default.createElement("div",{className:"pintuan-btn-group action-btn-group"},h.default.createElement(k.LinkChange,{type:"button",className:"ui-btn action-disable"},"已下架"))):h.default.createElement("div",{className:"action-btn-group c-fr"},h.default.createElement("span",{className:"ui-btn  action-addtocart c-fl incomplete-addtocart"},"加入购物袋"),h.default.createElement("span",{className:"ui-btn  action-buy-now c-fl incomplete-buy-now"},"立即购买"))}}]),t}(),U=(0,k.createBuyAction)({Buy:j}),Y=t.ActiveArea=function(e){function t(){return b(this,t),C(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return I(t,f.Component),m(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"active-area"},h.default.createElement(k.CouponWrap,this.props))}}]),t}(),q=(t.createChooseSpec=function(e){var t=e.Buy;return function(e){function a(){return b(this,a),C(this,(a.__proto__||(0,i.default)(a)).apply(this,arguments))}return I(a,_.PureComponent),m(a,[{key:"render",value:function(){var e=this.props,a=e.data,n=e.promotion,r=e.retState,i=n.info.specs,l=(0,k.chooseSpec)(r,i);return i instanceof Array?null:h.default.createElement("div",{className:"choose-col"},h.default.createElement("div",{className:"choose-spec c-fs13"},h.default.createElement("span",{className:"c-mr15"},l.length>0?"已选择 ":"选择 "),l.length>0&&(0,k.chooseSpec)(r,i),h.default.createElement("i",{className:"icon icon-forward vertical-middle"},h.default.createElement("img",{src:"/src/img/icon/arrow/arrow-right-icon.png"}))),"SHELVING"===a.status&&n.realStore?h.default.createElement(t,p({},this.props,{choose:!0})):null,h.default.createElement("div",{className:"gap bgf4"}))}}]),a}()})({Buy:j}),X=function(e){function t(e){b(this,t);var a=C(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.closeModal=function(){a.props.UpdateBuyModal({buyModal:!1})},a.state={singleBuy:!1},a}return I(t,_.PureComponent),m(t,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.data,n=e.mix,r=e.rate,i=e.recommend,l=e.promotion,o=e.cartNum,s=e.isLogin,c=e.pending,u=e.mixStatus,d=e.rateStatus,m=e.recommendStatus,f=e.proStatus,g=e.cartInfoStatus,v=e.retState,E=e.areaData,y=e.UpdateBuyModal,_=e.InitState,w=e.UpdateCartInfo,S=e.buyModal,A=e.buyActive,b=e.intervalT,C=a.item_id,I={itemId:C,location:t,retState:v,data:a,mix:n,promotion:l,mixStatus:u,proStatus:f,buyModal:S,buyActive:A,UpdateBuyModal:y,InitState:_,UpdateCartInfo:w,singleBuy:this.state.singleBuy,closeModal:this.closeModal,areaData:E,intervalT:b},x=f&&l.groupBuy.group_data;return h.default.createElement("div",{"data-page":"item-detail",id:"item-details",ref:"details"},h.default.createElement(N.BarrageStripConnnect,null),h.default.createElement(k.ItemNav,null),u&&f&&h.default.createElement(R,I),h.default.createElement("div",null,h.default.createElement(k.ScrollImageState,{data:a,group_data:x,ref:"scrollImage"}),h.default.createElement(T,{data:a,proStatus:f,promotion:l,intervalT:b}),h.default.createElement(B,{data:a,proStatus:f,promotion:l}),h.default.createElement("div",{className:"gap bgf4"}),f&&h.default.createElement(P,{promotion:l,location:t}),f&&h.default.createElement(Y,{promotion:l,shop:a.shop}),h.default.createElement("div",{className:"gap bgf4"}),u&&f&&h.default.createElement(q,I),u&&h.default.createElement(k.SeverArea,{mix:n,data:a,retState:v,areaData:E,isLogin:s,pending:c}),h.default.createElement("div",{className:"gap bgf4"})),h.default.createElement("div",{className:"screen-rate"},d&&h.default.createElement(k.EvaluateArea,{rate:r,itemId:C}),h.default.createElement("div",{className:"gap bgf4"}),m&&h.default.createElement(k.RecommendArea,{recommend:i.data}),m&&h.default.createElement("div",{className:"gap bgf4"}),h.default.createElement(k.ShopArea,{shop:a.shop})),h.default.createElement("div",{className:"screen-detail"},h.default.createElement(k.GoodsDetail,{data:a})),h.default.createElement(U,p({cartNum:o,cartInfoStatus:g},I)))}}]),t}();t.default=X}).call(this,a("OOjC"))},XKGu:function(e,t,a){"use strict";var n=c(a("Zx67")),r=c(a("fZjL")),i=c(a("kiBT")),l=c(a("OvRC")),o=c(a("pFYg")),s=c(a("C4MV"));function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PureComponent=void 0;var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a("U7vG");function p(e,t){if(e===t)return!0;var a=(0,r.default)(e),n=(0,r.default)(t);return a.length===n.length&&a.every(function(a){return e[a]===t[a]})}t.PureComponent=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,l.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}(t,d.Component),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return!p(this.props,e)||!p(this.state,t)}}]),t}()},XSP4:function(e,t,a){e.exports={mask:"_2qI4xAoOjtDUtWzdkg3nQc","mask-load":"_3MB5waMloANAJkIfLleUZw"}},bhYP:function(e,t,a){e.exports={shady:"igpwK6JRam1rKPGXleStb",animationModal:"_3FpO11SqbtZesZ5VvHQaaE",active:"_2E6xE1QHpxQOoQAKfH8e2",title:"_2chFzR_tMW2iPvPv65nArl",closeBtn:"_27spKdzTKfQwobr0Cw83vH"}},kjFZ:function(e,t,a){},rgEM:function(e,t){e.exports="data:image/gif;base64,R0lGODlhMAAwAPUAAORGTOyepOzKzPTi5OR2fPTu7OReZPTq7PTW3Pzi5OyKjORSXOyytPzu7PTe3OyGjPTy9ORqbPzm7Oy6vORKVPTS1PTm5Ox6hPTu9Pzq7PTa3Pzi7ORWXOy2vPze5PTO1ORqdOR+hORSVOyutPTW1Ox6fOzGxOR6fPTm7ORudOy2tORibOyanORiZOyipAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBQAfACwAAAAAMAAwAAAF/+AnjmQ5QlhzYOIUTNVhznR9ZtKWeFsjKgAAhXNhDGzIGUSS2PCevg8wSF0oNMnk0vPsbjI/qjj4cGSVDZ5zs16DpeMxhwE5n3JPp9cTVVCEcVQKLHZLO1xdiHxhVH+OYg91WiJLbGtqbIsfD3+BgAZYWhKSW3mITlEPnlQGCJSSShk8pBKKbRmSAgEEC51irZQWozRpa7SZPRCwJwMdEb7AHxAHPG8lEJdsx7hJGAy9HK7SB3obyyJ45QmEynYfAw+h02o8Etem5eeFlNSXPITodmRzMswdiXnZ6p0QaGqWwWsJ84nIEJFNlIckZEX08KZWQocYD3rEZw9bQ4shTf+QwzcLAz5jKSGy7NFgY8GYlGqxxKARnzWcEzdm4JmhqFFuQEcQLSrBKMCkUKPaIXqgaFWkUKlaLcpTqNSeXjIU2ENQX8hSp7g0qEmvjVmMJi3lwRC34UWc1PY4HDnwrTu0ae19oDjzbkhylpBxpLRRh98sJhXlgZWu4c2HW8ohEkxpprmzOdv+K8EEX5R2hQpm5rKB84m+OTcUeEypgEBap8wW43G6NJvZ+pTVzHbsC41Kn6XxVdOUUAEcmifnvHxNtU7JiKJcT5v7FRLcieWiQtdmII8EtKsnSjv+g87omqnbMPRRkXbsehBhPQNhd/lM2oWXh0XpHVdZWvfZwpoefJgdWA06JzGYEgTQuUHegvtJJU0DPBHCE4cFlhACACH5BAkFAAIALAAAAAAwADAAAAb/QIFwSCwOIZjGASNUNjAQo3RKPWYkm4Rn0xBKtltJI1otGyGSxAa87gpQ6806TDZX0R6wfpPxxrd/EnV2RBANgIhyW30CWHt5cgkZg3Zof3OYHm5fcZ2QG4KEQmhaeXqmmn5sbJihZmSWip2Km5dgWnGUU2iwX6uQqY22l1xCBQVUEBlbvaidk0IYV8NbTAIHJwq6TWy9smO6EMqcgG4HIQAADFIQxN7QZYa5xifpABwDRo6YCdbiogJ4CbFQwl66B0UgrMK0rZIQbAbTUSBBJM3CNa4ADilQUCIACukUHMH1a0NDQhY4RLQnIp+ADMPkuNFYhMHHmwZHeFkI6aQo/wggVqYjENBWOZpTOgilwAEFhovMkEoZoHIlhQ8NqGWUeoQATnsUGCwbxohrkQBCAQSQlqGtW3hmiXwIQLcuXRNx8+rNy/ZAW79w9fb921YatbJ6xwJbVOARRp8A8TjL0yBrIkCQf85iA4VasLwHFjNsxFNO5le+JksQArP0TK4H5Mj+w6hd6QSnk82ZbHLIvl9bNeLJlGf1kdK9kTaTVa2IxUtu/v10NRyS8ULuRmEpkBlCAVzNeko5FCf68w3cw8m75I3PLizJq3eSkMFagWmiowaUELwQ9dSomLJJgKfoJ10y2gEy2x+1KMjKFrhFRk6ADO70yCP9JZOGUagMSDZhgIFVQh4rsgUDX4mzjCGVJQW2YaEpreR2x2+QMEJOjHuNMk0cNrYSYo4BPVFfNBk8IeMQQQAAIfkECQUAAgAsAAAAADAAMAAABv9AgXBILA4hmMYBI1Q2MBCjdEo9ZiSbhGfTEEq2W0kjWi0bIZLEBrzuClDrzTpMNlfRHrB+k/HGt38SdXZEEA2AiHJbfQJYe3lyCRmDdmh/c5gebl9xnZAbgoRCaFp5eqaafmxsmKFmZJaKnYqbl2BacZRTaLBfq5CpjbaXXKO6Vlu9qJ2TQhhXw1tMAmiuRoe5o1hxY7oQEFesbqR8UhDEvXzHRYbZ1GmAuo6YCdPfou/KgeyrmOuv2vrVIwKPmAdr+LThWiXhyMI/yRKyU9MvC5kMw+S4kUgkQz9TjDj92vBPFB5ioKjZArSRI5EDK5NhqBjRJTuUWxo0iIbQ5rv/kR6efSzns4jHYRmeZVjKtFlRIkqbLp32tKpVjkoPLNXq1GqFAGDDgjWB8SMjqwEAqF2rNkCBR2t62oRAgC1bBjsTxbNqgYNdtRQ+nPsY7GmHv2oXoGg0lORTDCkQAyAgpOywli4ZSAYwYlQ0iz77Sl4wYMi8X3JFFTgh+UGhxiXvCDnA+m+FIgXZjIvNzhUKAhTYur7JKl0B3hAK4CKDoW7i0td0KwR03Fu7S2RQ1O6wa5s+VhKSCikADRib7AQe/OMVEJX7Te5P1cRAdVdAOfhlBZunX1YC3oWI5N4f8D3ySGrdUQQRKgUu415XhBhSEX775YfSGC5ZIl8bXgwIIAmC+Gg4xyIdQgQKgCZBE0dIrUB41ShPiCfAM0+gSEQQACH5BAkFAAQALAAAAAAwADAAAAb/QIJwSCwOIZjGASNUNjAQo3RKPWYkm4Rn0xBKtltJI1otGyGSxAa87hIObE+YbK6i5WvwNuNlr/8SdHVEEA1bf4h7Qhl4jWxjg0dYcXptXn9+bIGRBGhacnqgHm6TmKZzdWRoG6x+raSnsYJUaKpflGCwcaYJbhCzhIwbtqKIGWQYV7FbTJ0Sm1KGf7atXL9nEFd+vmkbfGemw0Krx2aF0+Ol4kWleAnN15G16WBaEkUQu3jAg8ThBUTS7FoDjZMkLafujUNIaZ3BI2oGJiCTIRYrNw+JCMP17cupLfwM3gm34R6EjxczSjnwESSGgSBVgnO1pUGDZQVl0sMEJpk+/286jWw0lSFZhqNIywUlYjTp0WZLo0rNaPTAUatKpVa9+rSivm9SN1bKUKASmJw67xSTYzMRopAPTx4yBWXZKKlwzMb0OBCuvFtrFXqNhVEmS1aIwXyTG2ti2jxrHbbjiZbTSEceFI776VDkTrrsGP7x5deIBQUaduLRfCQctQKlCWBQwQGAgdTOQHUeIq1mOoQbYAODYKEDCADIbeNeBVQKc39+JBQVIiDAiQXJs69Y/gzuvNyiwrt5kL088tvjSvtDnNgSAfLmy6P/G0p3LiHwy1Mo/yD2wZagjKeffg9A1U9viCQmYHzILcCAgZa1Y9+C8T2AW1oSKvKeeQtYOB1VJ8r88Q18FCxwAgMDfIjPE9MR0EEAHQgAYR1BAAAh+QQJBQACACwAAAAAMAAwAAAG/0CBcEgsDiGYxgEjVDYwEKN0Sj1mJJuNZ9MQSrZbSSNaLRshWK3a0xUcwNow2VxFe8D4TcYLX28kc3REEA1baodbewIZd3GOW2OCR1hwjZZtlH5+gJICaHGWd6KYfpVqnGZkn1l9rKSmpoFUaKpflZdepZptELKDjBu1on0ZZBhXulsFQmioRoVqtaxcvWcQV328aYpFEJrSxakN0cyZwUaZjRvLnr51qHZrEt2wW+50wprsuaZazp3lks1jlswewG7TWpHJoCtLm4NEgN3yoOhLKYMQB1lsNc/bLYcZjRy4aA9DP4whj2hS02AcrH8p4+XxUECiH24ph9iEk+FYhv+fQMPlJOIz6E8mQ5MqzejzwE+nQpU2fXqUISycQyXmyVBgpr97B+0Mi9MS0SGwAD1m8QOl4MOcb2Ya3PhtqNixHgZa1fU248i1CRWp7Yc2FShR5PhdhNlJJp68g2BlKTyrnCE4SIekYykEg4XG8DaGOVPXzQkOHfbNKpD47rlncNocOAGgNogOFnz1Yu1Hmp4pq8gUoF27OIcTLDR0RhaqtQTGk8gcKFG8enEGfEINw1itjpDZ1sNjF5Cm1bTXggpQt07B+nhbj/BCn1LgQfvw1cfHfRxq/iwGHOB3HR8JnRcVQA6EcJ943zXXiH+SaPDAAgySd5gcSwkwAAMnLHAUn35wiEFZSAdU0EEAFXx31IhFBAEAIfkECQUAAgAsAAAAADAAMAAABv9AgXBILA4hmEYBI1RmMBCjdEo9ZiSbhMfTEEo8m6ykEa2ajRBJYgMGbzJCFLsNlpTP1fR2zocLsG1hbXZ4UhANbomCb15sfHtZGXeFaY50j11/gY58G4SFAmlaW3SkXI2Bm3ufZmWVi26CmYCWtWCTVGmuX6l7p3+2tRuZELhEEBm3QnqknJJCGFfBYEyhEqxFiI67i2TGxVebxGqMaMLcz60N28tqbsa0ewnVxaDWu6kSRRCpfMaU7frNI+JOmAds9qxpsaVv2cJeG/6BgrCmX5YyGYKFyZSwSDJbW/x8ARmxI5qRmzyFIjnMpBQM/fYgsajM5T6NXNbFRGhTT7D/aDHL2fQY9EmGo0iPSnQZLSnSakOjSp1qIoDVq1YrTB1S4GjXDF8xBABAtizZAFuFFDBlKoMKs2YJLE0I4ZGlBh8owCXLwcLWukExWOCwl2yHrWtN+RNwojAAEFB7kgQjZARcvYalrp3mZ4AIxxxQDAXsK9CdB4X1KpjbCqWvMEQqODaAwCU+W5EFoIZLexnrfShurzIygHDZ3qHkFPgNoQA7a77+jcCMHAKKQcu/HYJVErrQfQ8oVJdT2lO6roAu1UzDcwiGB7WTDyg15xcvtopdsXZ1fZGtWZyEIaAjCfx2TH9BgSFSafix0d4UlZTHFoAN0vFgLtpYxMYsKW2SJU5HPkG0YCmrGNiaevbV58iFJiFDSzkomWdiiw1EU000Nc44RBAAIfkECQUAAgAsAAAAADAAMAAABv9AgXBILA4hmMYBI1Q2MBCjdEo9ZiSbhGfTEEq2W0kjWi0bIZLEBrzuCg5sT5hsrqLla/A242Wv/xJ0dUQQDVt/iHtCGXiNbGODR1hxem1ef35sgZECaFpyeqAebpOYpnN1ZGgbrH6tpKexglQFDxpCd5RgsHGmCW4Qs4QKAAa3nV+giBlkGFexW0zIm1IMANfGuFh/Y8LBV37AaRt8RgMc19ctx6vMZoV/qqUbwg/p6dmdwnbUd2taEoqQuAeAArZjnHBp67WhABFi6Qyme7BvkKdeHgIKGbCAYDoOAxIWgZCFYQIyIzxeo8BApBE4p+SUI6ASAAhpLiUx3BDwADr/lR1yvsS4BcIHiQQXWBA6MlabDjUJVBTprxeGADUDMH0JLYOJAGDDgv2wtYizDGjTZsBZtq1bkWcPoJXr7m3cuWiddX0rgFGevxkKVAJDrWwuZXIaNEiEaGpCkodMQYE2yi2cwUUFfHHq2GIyUWs0ZoDGpewBVqgxlYMc6yRTyKLY0ClFqTDVzY4yEsLIqjMVeYfYsNWsxRQw34T64Q5zxhQ9bQ19QyhQHDiefYa4aSse3Rs8U/JYlTuzDbhzCWuFFHjmKJ422yOVx45Nan6e67g6m0/dypJmRM5t4VokVcWGSX2Y/ZURctvFJAqCoMVWF4HZufLKJam5AolLq4SyJEsfEaKyVYf3kdMHJiK6BcEzf5QzSRgT8oXLE+kJ4MwTDBIRBAAh+QQJBQABACwAAAAAMAAwAAAG/8CAcEgsDg+ViesjLGQwGIhxSq0OB4wShwIAjISSjSexkTSk1rRRo1h0315wwiOuS9Bqq+MB738DYXSCdnh5RBAMHH1+YHUegoNnhkMFCouLfxZ1m4Med5MBBSeXjICOYp0bCZ9qaAejAFyLFJmnqXSFVRCsBwSkXX+BtnUJDUIQuYcZuEIYvn0LBCwazRnCqRjHEqxGDYOusBQRHQPJyNaDG8YBu6oZUxCnG2gWBBwj2WkQGHVou3Mb5hm5RidBPgwWQO3yJ6GThCIQbjEDNYRhKoNEJABM5ynZpH+3Hh7b6GgixYpkUqlCk2FYwHUniSyz9egdIIkCYx5qKK8MO/+aL3UaOUATFwaVJoUe60mnQYNhHZXu7CQIw8xUNqUOuXrqSYavYL96FGo1LNh8WtOqjVn2wFe3GcbqbPv2q1WoWdNehbQhQwG+grhJ3fWoMCqnnDbJpRiPTsBBUaB6gCn1wCNUmKXwVLnYEOHClz0JaXlLnVaiAVMLstl4WILO+lCB7jfkWknBjDdDEl2xdM6TFh/XQSsn1TpkClkRxizykDyGGwrAhlAAoMXLHr3VOa7RsXRzEJ6egt6XSrucy9NJeNLEGubQ6LfJXagNtP3JYO7LnojcSvDUqomxjjDCOVYQbFPtBx9+NwEGGG7+aVRUYQPqZ19cjGmXjmoDAtgpkyQxtbObIBXOdhmEwBFEh02bMYfgR+7VwSJzGK4FUQNWHZQBji8SEQQAOw=="},rsfq:function(e,t,a){"use strict";var n,r=a("woOf"),i=(n=r)&&n.__esModule?n:{default:n};Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=t.PurchaseLimit=t.FilterTradeClass=t.FilterTradeType=t.TradeFade=t.FilterTrade=t.createMSG=void 0;var l=a("f2t5"),o=function(e){return e&&e.__esModule?e:{default:e}}(a("4GUf"));var s=t.createMSG=(0,l.wrap)((0,l.filter)({ACTIONERROR:"请求错误",NOTAREA:"不在配送区域",CARTSUCCESS:"加入购物车成功",SELECTSPEC:"请选择所有规格",MINNUM:"此商品最少购买1件",MAXNUM:"此商品最多只能购买{0}件",STRATEGY:"请先选择分期策略"}),function(e,t){var a=e(t),n=[].concat(Array.prototype.slice.call(arguments));return a.replace(/\{(\d+)\}/g,function(e,t){return n[+t+2]})}),c={Domestic:"国内贸易",Overseas:"海淘",Bonded:"跨境保税",Direct:"海外直邮"};t.FilterTrade=function(e){if("BONDED"==e||"DIRECT"==e)return c[e]},t.TradeFade=function(e){return"DOMESTIC"!==e.trade_type&&0!=e.tax_rate},t.FilterTradeType=function(e){return"OVERSEAS"===e||"DIRECT"===e?"海外直邮":"BONDED"===e?"跨境保税":""},t.FilterTradeClass=function(e){return("BONDED"===e?"blue-label":"yellow-label")+" label"},t.PurchaseLimit=function(e){return"DIRECT"===e||"BONDED"===e},t.createAction=function(e,t){return(0,l.wrap)((0,l.filter)(e),function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e(a);if(!r)return null;var l=n.success,c=n.error;return(0,i.default)({},r,n,t?{error:function(e){o.default.MsgTip({msg:s("ACTIONERROR")}),c&&c(e)},success:function(e){(e.msg||e.message)&&o.default.MsgTip({msg:e.msg||e.message}),l&&l(e)}}:{})})}}}]);